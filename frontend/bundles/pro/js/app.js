(function(){"use strict";var e={6699:function(e,t,l){l.d(t,{b:function(){return As},E:function(){return Ds}});var a=l(9242),r=l(3396),n=l(7139),o=l(4870),s=l(65),u=l(2748);const i=e=>((0,r.dD)("data-v-0882032e"),e=e(),(0,r.Cn)(),e),p={id:"qp-header-menu-player"},d=["textContent"],c=["textContent"],m=["textContent"],g=["textContent"],w=i((()=>(0,r._)("br",null,null,-1))),_=["textContent"],v=i((()=>(0,r._)("hr",null,null,-1))),h=["textContent"],f=["textContent"],y=["textContent"],C=i((()=>(0,r._)("hr",null,null,-1))),x=["textContent"],b=["textContent"],q=i((()=>(0,r._)("hr",null,null,-1))),k=["textContent"];var $={__name:"qpHeaderNavPlayer",setup(e){const t=(0,s.oR)(),l=(0,r.Fl)((()=>t.getters.rat)),a=(0,r.Fl)((()=>t.getters.player));return(e,t)=>{const s=(0,r.up)("el-icon"),u=(0,r.up)("el-menu-item"),i=(0,r.up)("el-menu"),$=(0,r.up)("el-badge"),W=(0,r.up)("el-sub-menu");return(0,r.wg)(),(0,r.iD)("div",p,[(0,o.SU)(l)?((0,r.wg)(),(0,r.j4)(i,{key:1,router:"",mode:"horizontal","menu-trigger":"click","default-active":e.$route&&e.$route.name?e.$route.name:null},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{disabled:"",index:"notifications"},{default:(0,r.w5)((()=>[(0,r.Wm)($,{hidden:!0,"is-dot":""},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{class:"mdi mdi-bell-outline"})])),_:1})])),_:1}),(0,r.Wm)(u,{disabled:"",index:"messages"},{default:(0,r.w5)((()=>[(0,r.Wm)($,{hidden:!0,value:123,max:99},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{class:"mdi mdi-email-outline"})])),_:1})])),_:1}),(0,r.Wm)(W,{index:"1"},{title:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)((0,o.SU)(a)?.playername)},null,8,m)])),default:(0,r.w5)((()=>[(0,r.Wm)(u,{disabled:"",index:"profile",class:"qp-multiline"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("SignedInAs"))},null,8,g),w,(0,r._)("strong",{textContent:(0,n.zw)((0,o.SU)(a)?.playername)},null,8,_)])),_:1}),v,(0,r.Wm)(u,{disabled:"",index:"profile"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("YourProfile"))},null,8,h)])),_:1}),(0,r.Wm)(u,{index:"MeCharacters",route:{name:"MeCharacters"},disabled:e.$route.name&&"MeCharacters"==e.$route.name},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("YourCharacters"))},null,8,f)])),_:1},8,["disabled"]),(0,r.Wm)(u,{index:"MeWorlds",route:{name:"MeWorlds"},disabled:e.$route.name&&"MeWorlds"==e.$route.name},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("YourWorlds"))},null,8,y)])),_:1},8,["disabled"]),C,(0,r.Wm)(u,{disabled:"",index:"help"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Help"))},null,8,x)])),_:1}),(0,r.Wm)(u,{disabled:"",index:"settings"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Settings"))},null,8,b)])),_:1}),q,(0,r.Wm)(u,{index:"AuthLogout",route:{name:"AuthLogout"}},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Logout"))},null,8,k)])),_:1})])),_:1})])),_:1},8,["default-active"])):((0,r.wg)(),(0,r.j4)(i,{key:0,router:"",mode:"horizontal","menu-trigger":"click"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{index:"AuthLogin",route:{name:"AuthLogin"}},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{class:"mdi mdi-power"}),(0,r._)("span",{textContent:(0,n.zw)(e.$t("Login"))},null,8,d)])),_:1}),(0,r.Wm)(u,{index:"AuthRegister",route:{name:"AuthRegister"}},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{class:"mdi mdi-login-variant"}),(0,r._)("span",{textContent:(0,n.zw)(e.$t("Register"))},null,8,c)])),_:1})])),_:1}))])}}},W=l(89);const z=(0,W.Z)($,[["__scopeId","data-v-0882032e"]]);var S=z;const j=e=>((0,r.dD)("data-v-504bcf68"),e=e(),(0,r.Cn)(),e),T={id:"qp-app-header"},D={id:"qp-header-logo-img"},A=j((()=>(0,r._)("div",{class:"image-slot"},null,-1))),H={id:"qp-header-logo-title"},E=["textContent"],U={id:"qp-header-menu-app"},O=["textContent"],F=["textContent"];var R={__name:"qpHeader",setup(e){const t=(0,s.oR)(),a=(0,r.Fl)((()=>t.getters.app)),i=(0,o.iH)(l(4465)),p=()=>{t.commit("TOGGLE_SIDEBAR")};return(e,t)=>{const l=(0,r.up)("el-image"),s=(0,r.up)("el-icon"),d=(0,r.up)("el-menu-item"),c=(0,r.up)("el-menu"),m=(0,r.up)("el-col"),g=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",T,[(0,r.Wm)(g,{gutter:20,align:"middle"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{span:10,class:"text-left"},{default:(0,r.w5)((()=>[(0,r._)("div",{id:"qp-header-logo",onClick:t[0]||(t[0]=t=>e.$router.go({name:"Home"}))},[(0,r._)("div",D,[(0,r.Wm)(l,{src:i.value,fit:"cover"},{error:(0,r.w5)((()=>[A])),_:1},8,["src"])]),(0,r._)("div",H,[(0,r._)("span",{textContent:(0,n.zw)((0,o.SU)(Ds).shortname)},null,8,E)])]),(0,o.SU)(a).win.w>=1200?((0,r.wg)(),(0,r.iD)("div",{key:0,id:"qp-header-toggle-sidebar",onClick:t[1]||(t[1]=e=>p())},[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,o.SU)(a).sidebar.collapse?((0,r.wg)(),(0,r.j4)((0,o.SU)(u.M0b),{key:0})):((0,r.wg)(),(0,r.j4)((0,o.SU)(u.qFw),{key:1}))])),_:1})])):(0,r.kq)("",!0),(0,r._)("div",U,[(0,r.Wm)(c,{router:"",mode:"horizontal","menu-trigger":"click"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{disabled:"",index:"discover"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Discover"))},null,8,O)])),_:1}),(0,r.Wm)(d,{disabled:"",index:"browse"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Browse"))},null,8,F)])),_:1})])),_:1})])])),_:1}),(0,r.Wm)(m,{span:14,class:"text-right"},{default:(0,r.w5)((()=>[(0,r.Wm)(S)])),_:1})])),_:1})])}}};const V=(0,W.Z)(R,[["__scopeId","data-v-504bcf68"]]);var L=V;const M=e=>((0,r.dD)("data-v-efada940"),e=e(),(0,r.Cn)(),e),P={id:"qp-sidebar-profile"},Y={id:"qp-sidebar-banner"},N=M((()=>(0,r._)("div",{class:"image-slot"},null,-1))),B={id:"qp-sidebar-avatar"},Z={id:"qp-sidebar-name"},I=["textContent"],K={key:0,id:"qp-sidebar-title"},J=["textContent"];var G={__name:"qpSidebarProfile",setup(e){const t=(0,s.oR)(),l=(0,r.Fl)((()=>t.getters.rat)),a=(0,r.Fl)((()=>t.getters.player)),i=(0,o.iH)("Qui ne fait que passer");return(e,t)=>{const s=(0,r.up)("el-image"),p=(0,r.up)("el-icon"),d=(0,r.up)("el-avatar");return(0,r.wg)(),(0,r.iD)("div",P,[(0,r._)("div",Y,[(0,r.Wm)(s,{src:(0,o.SU)(a)?.banner,fit:"cover"},{error:(0,r.w5)((()=>[N])),_:1},8,["src"])]),(0,r._)("div",B,[(0,r.Wm)(d,{src:(0,o.SU)(a)?.avatar},{default:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(u.n5m))])),_:1})])),_:1},8,["src"])]),(0,r._)("div",Z,[(0,r._)("h2",null,[(0,r._)("span",{textContent:(0,n.zw)((0,o.SU)(a)?.playername)},null,8,I)])]),(0,o.SU)(l)?((0,r.wg)(),(0,r.iD)("div",K,[(0,r._)("p",null,[(0,r._)("span",{textContent:(0,n.zw)(i.value)},null,8,J)])])):(0,r.kq)("",!0)])}}};const Q=(0,W.Z)(G,[["__scopeId","data-v-efada940"]]);var X=Q;const ee=e=>((0,r.dD)("data-v-7535a16a"),e=e(),(0,r.Cn)(),e),te={id:"qp-sidebar-nav"},le=ee((()=>(0,r._)("i",{class:"mdi mdi-home"},null,-1))),ae=["textContent"],re=ee((()=>(0,r._)("i",{class:"mdi mdi-hops"},null,-1))),ne=["textContent"],oe=ee((()=>(0,r._)("i",{class:"mdi mdi-scale-balance"},null,-1))),se=["textContent"],ue=ee((()=>(0,r._)("i",{class:"mdi mdi-script-text"},null,-1))),ie=["textContent"],pe=ee((()=>(0,r._)("i",{class:"mdi mdi-forum-outline"},null,-1))),de=["textContent"],ce=ee((()=>(0,r._)("i",{class:"mdi mdi-account-group"},null,-1))),me=["textContent"],ge=ee((()=>(0,r._)("i",{class:"mdi mdi-hops"},null,-1))),we=["textContent"];var _e={__name:"qpSidebarNav",setup(e){const t=(0,s.oR)(),l=(0,r.Fl)((()=>t.getters.app)),a=(0,r.Fl)((()=>t.getters.player));return(e,t)=>{const s=(0,r.up)("el-menu-item"),u=(0,r.up)("el-sub-menu"),i=(0,r.up)("el-menu");return(0,r.wg)(),(0,r.iD)("div",te,[(0,r.Wm)(i,{router:"","default-active":e.$route&&e.$route.params&&"slug"in e.$route.params?e.$route.params.slug:e.$route.name,collapse:(0,o.SU)(l).win.w<1200||(0,o.SU)(l).sidebar?.collapse},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{index:"Home",route:{name:"Home"}},{default:(0,r.w5)((()=>[le,(0,r._)("span",{textContent:(0,n.zw)(e.$t("Home"))},null,8,ae)])),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,o.SU)(a).worldnavs,((t,l)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[e.$route.params.slug&&e.$route.params.slug==t.slug?((0,r.wg)(),(0,r.j4)(u,{key:`world-nav-group-${l}`,index:t.slug},{title:(0,r.w5)((()=>[re,(0,r._)("span",{textContent:(0,n.zw)(t.name)},null,8,ne)])),default:(0,r.w5)((()=>[(0,r.Wm)(s,{disabled:"",index:`${t.slug}-rules`,route:{name:"World",params:{world_pk:t.id,slug:t.slug}}},{default:(0,r.w5)((()=>[oe,(0,r._)("span",{textContent:(0,n.zw)(e.$t("Rules"))},null,8,se)])),_:2},1032,["index","route"]),(0,r.Wm)(s,{disabled:"",index:`${t.slug}-context`,route:{name:"World",params:{world_pk:t.id,slug:t.slug}}},{default:(0,r.w5)((()=>[ue,(0,r._)("span",{textContent:(0,n.zw)(e.$t("Context"))},null,8,ie)])),_:2},1032,["index","route"]),(0,r.Wm)(s,{index:t.slug,route:{name:"WorldForum",params:{world_pk:t.id,slug:t.slug}}},{default:(0,r.w5)((()=>[pe,(0,r._)("span",{textContent:(0,n.zw)(e.$t("Forum"))},null,8,de)])),_:2},1032,["index","route"]),(0,r.Wm)(s,{disabled:"",index:`${t.slug}-community`,route:{name:"World",params:{world_pk:t.id,slug:t.slug}}},{default:(0,r.w5)((()=>[ce,(0,r._)("span",{textContent:(0,n.zw)(e.$t("Community"))},null,8,me)])),_:2},1032,["index","route"])])),_:2},1032,["index"])):((0,r.wg)(),(0,r.j4)(s,{key:`world-nav-${l}`,index:t.slug,route:{name:"WorldForum",params:{world_pk:t.id,slug:t.slug}}},{default:(0,r.w5)((()=>[ge,(0,r._)("span",{textContent:(0,n.zw)(t.name)},null,8,we)])),_:2},1032,["index","route"]))],64)))),256))])),_:1},8,["default-active","collapse"])])}}};const ve=(0,W.Z)(_e,[["__scopeId","data-v-7535a16a"]]);var he=ve;const fe={id:"qp-sibebar-inner"},ye={id:"qp-sibebar-main"},Ce={id:"qp-sidebar-footer"},xe=["innerHTML"];var be={__name:"qpSidebar",setup(e){const t=(0,s.oR)(),l=(0,r.Fl)((()=>t.getters.app));return(e,t)=>{const a=(0,r.up)("el-scrollbar");return(0,r.wg)(),(0,r.iD)("div",{id:"qp-app-sidebar",class:(0,n.C_)((0,o.SU)(l).win.w<1200||(0,o.SU)(l).sidebar?.collapse?"qp-collapsed":"")},[(0,r.Wm)(a,{height:"100%"},{default:(0,r.w5)((()=>[(0,r._)("div",fe,[(0,r._)("div",ye,[(0,r.Wm)(X),(0,r.Wm)(he)]),(0,r._)("div",Ce,[(0,r._)("span",{innerHTML:e.$t("TextCopyrights")},null,8,xe)])])])),_:1})],2)}}};const qe=(0,W.Z)(be,[["__scopeId","data-v-102c9f96"]]);var ke=qe,$e=l(678);const We={key:0,id:"qp-app-smallbar"},ze={key:0,id:"qp-smallbar-inner"},Se=["textContent"];var je={__name:"qpSmallbar",setup(e){const t=(0,$e.yj)(),l=(0,s.oR)(),a=(0,r.Fl)((()=>l.getters.app)),u=(0,r.Fl)((()=>l.getters.rat)),i=(0,r.Fl)((()=>l.getters.heros)),p=(0,r.Fl)((()=>"slug"in t.params?i.value.filter((e=>e.world?.slug==t.params.slug)):i.value));return(e,t)=>{const l=(0,r.up)("el-avatar"),s=(0,r.up)("el-tooltip"),i=(0,r.up)("el-scrollbar");return(0,o.SU)(a).win.w>767?((0,r.wg)(),(0,r.iD)("div",We,[(0,r.Wm)(i,{height:"100%"},{default:(0,r.w5)((()=>[(0,o.SU)(u)?((0,r.wg)(),(0,r.iD)("div",ze,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,o.SU)(p),((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:`hero-${t}`,class:"qp-smallbar-hero"},[(0,r.Wm)(s,{content:e.name,placement:"left"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{src:e.avatar},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.initials)},null,8,Se)])),_:2},1032,["src"])])),_:2},1032,["content"])])))),128))])):(0,r.kq)("",!0)])),_:1})])):(0,r.kq)("",!0)}}};const Te=(0,W.Z)(je,[["__scopeId","data-v-beb6dbf2"]]);var De=Te;const Ae={id:"qp-app"};var He={__name:"App",setup(e){const t=(0,s.oR)(),l=(0,r.Fl)((()=>t.getters.rat));return(e,t)=>{const a=(0,r.up)("router-view"),s=(0,r.up)("el-scrollbar");return(0,r.wg)(),(0,r.iD)("div",Ae,[e.$route.name&&e.$route.name.startsWith("Auth")?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(L,{key:0})),e.$route.name&&e.$route.name.startsWith("Auth")?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(ke,{key:1})),(0,r._)("div",{id:"qp-app-main",class:(0,n.C_)(`${(0,o.SU)(l)?"":" qp-nosmallbar"}${e.$route.name&&e.$route.name.startsWith("Auth")?" qp-fullview":""}`)},[(0,r.Wm)(s,{height:"100%"},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)(a,{key:e.$route.fullPath}))])),_:1})],2),e.$route.name&&e.$route.name.startsWith("Auth")?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(De,{key:2}))])}}};const Ee=He;var Ue=Ee,Oe=l(3590),Fe=JSON.parse('{"A player with that playername already exists.":"Un joueur avec ce nom existe déjà.","A user with that email already exists.":"Un joueur avec cette adresse courriel existe déjà.","A user with that username already exists.":"Un joueur avec ce nom existe déjà.","AlreadyHaveAnAccount":"Déjà inscrit ?","AnErrorOccurred":"Une erreur est survenue","BackToHome":"Retour à l\'accueil","Browse":"Parcourir","Cancel":"Annuler","Ce champ est obligatoire.":"Ce champ est obligatoire.","Chapter":"Chapitre | Chapitre | Chapitres","Character":"Personnage | Personnage | Personnages","ChooseTravellers":"Choisir les voyageurs","Closed":"Fermé","Community":"Communauté","Confirm":"Confirmer","Context":"Contexte","Continue":"Continuer","CreateWorld":"Créer un monde","Description":"Description","Descriptionofthenewchapter":"Courte description facultative","Discover":"Découvrir","DontHaveAnAccount":"Pas encore inscrit ?","email":"Courriel","Email":"Courriel","Enter a valid email address.":"Saisissez une adresse courriel valide.","Error":"Erreur","Forum":"Forum","Help":"Aide","Home":"Accueil","Login":"Connexion","Logout":"Déconnexion","Message":"Message | Message | Messages","Never":"Jamais","NewChapter":"Nouveau chapitre","NoAvailableTravellers":"Aucun voyageur disponible","non_field_errors":"Erreur","NoWorldCreated":"Aucun monde créé","password":"Mot de passe","Password":"Mot de passe","Player":"Joueur | Joueur | Joueurs","Playername":"Nom de joueur","playername":"Nom de joueur","Profile":"Profil","Quests":"Quêtes","Register":"Inscription","Rules":"Règlements","Saisissez une adresse e-mail valide.":"Saisissez une adresse courriel valide.","Sector":"Secteur | Secteur | Secteurs","SeeAllQuests":"Voir toutes les quêtes","Send":"Envoyer","Settings":"Paramètres","SignedInAs":"Connecté en tant que","Text":"Texte","TextCopyrights":"&copy;&nbsp;2022 M-C Pronovost","That password is too short.":"Ce mot de passe est trop court.","ThisChapterDoesntExistAnymore":"Ce chapitre n\'existe pas ou plus","Thisfieldisrequired":"Ce champs est requis.","ThisForumDoesntExistAnymore":"Ce forum n\'existe pas ou plus","ThisSectorDoesntExistAnymore":"Ce secteur n\'existe pas ou plus","ThisTerritoryDoesntExistAnymore":"Ce territoire n\'existe pas ou plus","ThisWorldDoesntExistAnymore":"Ce monde n\'existe pas ou plus","ThisZoneDoesntExistAnymore":"Cette zone n\'existe pas ou plus","Title":"Titre","Titleofthenewchapter":"Titre du nouveau chapitre","Travel":"Voyager","TravelCompleted":"Voyage complété","username":"Nom d\'utilisateur","Username":"Nom d\'utilisateur","Writing":"Rédaction","YouDoesntHaveAccessToThisForum":"Vous n\'avez pas accès à ce forum","YouDoesntHaveAccessToThisWorld":"Vous n\'avez pas accès à ce monde","Youhavearrivedatyourdestination":"Vous êtes arrivé à destination","YourCharacters":"Vos personnages","YourEmailAddress":"Votre adresse de courriel","YourMessage":"Votre message","YourPersonalUsername":"Votre nom d\'utilisateur personnel","YourProfile":"Votre profil","YourPublicPlayername":"Votre nom de joueur public","YourWorlds":"Vos mondes","YouDoesntHaveAccessToThisZone":"Vous n\'avez pas accès à cette zone","YouDoesntHaveAccessToThisTerritory":"Vous n\'avez pas accès à ce territoire","YouDoesntHaveAccessToThisChapter":"Vous n\'avez pas accès à ce chapitre","YouDoesntHaveAccessToThisSector":"Vous n\'avez pas accès à ce secteur","ToReply":"Répondre","ChooseACharacter":"Choisir un personnage","YourReply":"Votre réponse","ThisPageDoesntExistAnymore":"Cette page n\'existe pas ou plus","errorcharacter":"Personnage","errortext":"Texte","AllRightsReserved":"Tous droits réservés","NewChapterTitle":"Titre du nouveau chapitre","Edit":"Modifier","Delete":"Supprimer","EditMessage":"Modifier le message","DeleteMessage":"Supprimer le message","Success":"Succès","MessageDeletedSuccessfully":"Message supprimé avec succès !","Areyousureyouwanttodeletethismessage":"Êtes-vous certain de vouloir supprimer définitivement ce message ? Cette action est irréversible.","DeleteChapter":"Supprimer le chapitre","LockChapter":"Verrouiller le chapitre","UnlockChapter":"Déverrouiller le chapitre"}');const Re={short:{year:"numeric",month:"long",day:"2-digit"}},Ve={fr:Re},Le=(0,Oe.o)({locale:"fr",fallbackLocale:"fr",messages:{fr:Fe},dateTimeFormats:Ve,legacy:!1,globalInjection:!0,silentTranslationWarn:!0});var Me=Le,Pe=l(5361);const Ye=e=>({win:e.app.win,sidebar:e.app.sidebar}),Ne={state:()=>({win:{w:1880,h:980},sidebar:{collapse:!1}}),mutations:{SET_WINSIZES(e){e.win={w:window.innerWidth,h:window.innerHeight}},TOGGLE_SIDEBAR(e){e.sidebar.collapse=!e.sidebar.collapse}}},Be=e=>{if(e.drat.s&&e.frat.e){let t=Pe.lW.from(e.drat.s,"base64").toString("utf8"),l=Pe.lW.from(e.frat.e,"base64").toString("utf8");return`Token ${t}${l}`}return null},Ze={state:()=>({s:null}),mutations:{SET_DRAT(e,t){e.s=t?Pe.lW.from(t).toString("base64"):null}}},Ie={state:()=>({e:null}),mutations:{SET_FRAT(e,t){e.e=t?Pe.lW.from(t).toString("base64"):null}}},Ke=e=>e.player.j?JSON.parse(Pe.lW.from(e.player.j,"base64").toString("utf8")):null,Je=e=>e.player.h?JSON.parse(Pe.lW.from(e.player.h,"base64").toString("utf8")):[],Ge=e=>e.player.w?JSON.parse(Pe.lW.from(e.player.w,"base64").toString("utf8")):[],Qe={state:()=>({j:null,h:null,c:null,w:null}),mutations:{SET_PLAYER(e,t){if(t){let l=Pe.lW.from(e.j,"base64").toString("utf8");l=l?JSON.parse(l):{},l[t[0]]=t[1],e.j=Pe.lW.from(JSON.stringify(l)).toString("base64")}},BATCH_PLAYER(e,t){if(t){let l=e.j;l=l?JSON.parse(Pe.lW.from(l,"base64").toString("utf8")):{};let a=Object.entries(t);for(let e=0;e<a.length;e++)l[a[e][0]]=a[e][1];e.j=Pe.lW.from(JSON.stringify(l)).toString("base64")}else e.j=null},BATCH_HEROS(e,t){e.h=t?Pe.lW.from(JSON.stringify(t)).toString("base64"):null},BATCH_WORLDS(e,t){e.w=t?Pe.lW.from(JSON.stringify(t)).toString("base64"):null}},actions:{async getPlayer({commit:e,dispatch:t,getters:l}){if(l.rat){let a=await fetch(`${As}/me/`,{method:"GET",headers:{Authorization:l.rat}});if(200===a.status){let l=await a.json();e("BATCH_PLAYER",l),t("getHeros")}else 401===a.status&&t("doLogout")}},async getHeros({commit:e,dispatch:t,getters:l}){if(l.rat){let a=await fetch(`${As}/me/heros/`,{method:"GET",headers:{Authorization:l.rat}});if(200===a.status){let t=await a.json();e("BATCH_HEROS",t)}else 401===a.status&&t("doLogout")}},async doRegister({dispatch:e},{username:t,playername:l,email:a,password:r}){let n=new FormData;t&&n.append("username",t),l&&n.append("playername",l),a&&n.append("email",a),r&&n.append("password",r);let o=await fetch(`${As}/register/`,{method:"POST",body:n}),s=await o.json();return 200===o.status?e("doLogin",{username:t,password:r}):{valid:!1,data:s}},async doLogin({commit:e},{username:t,password:l}){let a=new FormData;a.append("username",t),a.append("password",l);let r=await fetch(`${As}/login/`,{method:"POST",body:a}),n=await r.json();if(200===r.status){let t=n.token,l=Math.ceil(t.length/2);return e("SET_DRAT",t.slice(0,l)),e("SET_FRAT",t.slice(l)),{valid:!0}}return{valid:!1,data:n}},async doLogout({commit:e,getters:t}){let l=await fetch(`${As}/logout/`,{method:"POST",headers:{Authorization:t.rat}});return e("BATCH_PLAYER",null),e("BATCH_HEROS",null),e("BATCH_WORLDS",null),e("SET_DRAT",null),e("SET_FRAT",null),l}}};var Xe=l(5103),et=l(680);const tt=new Xe.ZP({key:"qpcynorrs",storage:window.localStorage,reducer:e=>({drat:e.drat,app:e.app})}),lt=new Xe.ZP({key:"qpcynorrs",storage:window.sessionStorage,reducer:e=>({player:e.player})}),at=new Xe.ZP({key:"qpcynorrs",restoreState:e=>{if(et.Z.get(e))return JSON.parse(Pe.lW.from(et.Z.get(e),"base64").toString("utf8"))},saveState:(e,t)=>{t&&et.Z.set(e,Pe.lW.from(JSON.stringify(t)).toString("base64"),{expires:30})},modules:["frat"]}),rt=e=>{e.commit("SET_WINSIZES"),window.addEventListener("resize",(()=>{e.commit("SET_WINSIZES")}))},nt=(0,s.MT)({getters:{app:Ye,rat:Be,player:Ke,heros:Je,worlds:Ge},modules:{app:Ne,drat:Ze,frat:Ie,player:Qe},plugins:[tt.plugin,lt.plugin,at.plugin,rt]});var ot=nt;const st={class:"qp-vue"};function ut(e,t){return(0,r.wg)(),(0,r.iD)("div",st," aaa ")}const it={},pt=(0,W.Z)(it,[["render",ut]]);var dt=pt;const ct={key:0,class:"qp-card-header"},mt={class:"qp-card-header-title"};var gt={__name:"qpCard",props:{clickable:{type:Boolean,default:!1},overflow:{type:Boolean,default:!1},bgcolor:{type:String,default:"base"},h:{type:String,default:""},pa:{type:String,default:"20px"},mb:{type:String,default:""}},setup(e){const t=e,l=(0,r.Fl)((()=>t.clickable?"qp-card-clickable":"")),a=(0,r.Fl)((()=>t.overflow?"qp-card-overflow":"")),s=(0,r.Fl)((()=>"base"!=t.bgcolor?`qp-card-bg-${t.bgcolor}`:"")),u=(0,r.Fl)((()=>t.h?`height:${t.h};`:"")),i=(0,r.Fl)((()=>t.pa?`padding:${t.pa};`:"")),p=(0,r.Fl)((()=>t.mb?`margin-bottom:${t.mb};`:""));return(e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,n.C_)(`qp-card ${(0,o.SU)(l)} ${(0,o.SU)(a)} ${(0,o.SU)(s)}`),style:(0,n.j5)(`${(0,o.SU)(u)}${(0,o.SU)(p)}`)},[e.$slots.header?((0,r.wg)(),(0,r.iD)("div",ct,[(0,r._)("div",mt,[(0,r.WI)(e.$slots,"header")])])):(0,r.kq)("",!0),(0,r._)("div",{class:"qp-card-main",style:(0,n.j5)(`${(0,o.SU)(i)}`)},[(0,r.WI)(e.$slots,"default")],4)],6))}};const wt=(0,W.Z)(gt,[["__scopeId","data-v-01c14f76"]]);var _t=wt;const vt=e=>((0,r.dD)("data-v-04204da0"),e=e(),(0,r.Cn)(),e),ht={class:"qp-vue"},ft={key:0},yt={class:"qp-container"},Ct=["textContent"],xt={class:"qp-mecharacters-overview"},bt=vt((()=>(0,r._)("h2",{class:"qp-mecharacters-overview-title"},[(0,r._)("span",{textContent:"Qalatlán"})],-1))),qt=vt((()=>(0,r._)("p",null,"Lorem ipsum dolor sit amet.",-1))),kt={class:"qp-mecharacters-infolist"},$t=["textContent"],Wt=["textContent"],zt=["textContent"],St=["textContent"],jt=["textContent"],Tt=["textContent"],Dt=["textContent"],At=["textContent"],Ht={key:1},Et={class:"qp-container"},Ut={"element-loading-background":"transparent",style:{height:"60vh"}},Ot={key:2},Ft={class:"qp-container"};var Rt={__name:"MeCharactersView",setup(e){const t=(0,s.oR)(),l=(0,r.Fl)((()=>t.getters.rat)),a=(0,o.iH)(!0),u=(0,o.iH)(null),i=(0,o.iH)([]);return(0,r.bv)((()=>{console.log("onMounted"),a.value=!1})),(e,t)=>{const s=(0,r.up)("el-col"),p=(0,r.up)("el-row"),d=((0,r.up)("el-tag"),(0,r.up)("el-icon")),c=(0,r.up)("el-empty"),m=(0,r.up)("el-result"),g=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)("div",ht,[a.value||u.value||!(0,o.SU)(l)?a.value?((0,r.wg)(),(0,r.iD)("div",Ht,[(0,r._)("div",Et,[(0,r.wy)((0,r._)("div",Ut,null,512),[[g,a.value]])])])):((0,r.wg)(),(0,r.iD)("div",Ot,[(0,r._)("div",Ft,[(0,r.Wm)(_t,{h:"auto"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{icon:"error",title:e.$t("Error"),"sub-title":u.value},null,8,["title","sub-title"])])),_:1})])])):((0,r.wg)(),(0,r.iD)("div",ft,[(0,r._)("div",yt,[(0,r._)("header",null,[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,{span:24,align:"left"},{default:(0,r.w5)((()=>[(0,r._)("h1",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("YourCharacters"))},null,8,Ct)])])),_:1})])),_:1})]),(0,r._)("section",null,[i.value.length?((0,r.wg)(),(0,r.j4)(p,{key:0},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.value,((t,l)=>((0,r.wg)(),(0,r.j4)(s,{key:`character-${l}`},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,{clickable:"",pa:"12px"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{align:"middle"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{span:24,md:12,align:"left"},{default:(0,r.w5)((()=>[(0,r._)("div",xt,[bt,(0,r.kq)("",!0),qt])])),_:1}),(0,r.Wm)(s,{span:24,md:12,align:"right"},{default:(0,r.w5)((()=>[(0,r._)("ul",kt,[(0,r._)("li",null,[(0,r._)("span",{class:"qp-label",textContent:(0,n.zw)(e.$t("Player",12))},null,8,$t),(0,r._)("span",{class:"qp-value",textContent:(0,n.zw)(e.$filters.num_to_element(12,1))},null,8,Wt)]),(0,r._)("li",null,[(0,r._)("span",{class:"qp-label",textContent:(0,n.zw)(e.$t("Character",16))},null,8,zt),(0,r._)("span",{class:"qp-value",textContent:(0,n.zw)(e.$filters.num_to_element(16,1))},null,8,St)]),(0,r._)("li",null,[(0,r._)("span",{class:"qp-label",textContent:(0,n.zw)(e.$t("Chapter",1))},null,8,jt),(0,r._)("span",{class:"qp-value",textContent:(0,n.zw)(e.$filters.num_to_element(1,1))},null,8,Tt)]),(0,r._)("li",null,[(0,r._)("span",{class:"qp-label",textContent:(0,n.zw)(e.$t("Message",2346))},null,8,Dt),(0,r._)("span",{class:"qp-value",textContent:(0,n.zw)(e.$filters.num_to_element(2346,1))},null,8,At)])])])),_:1})])),_:1})])),_:1})])),_:2},1024)))),128))])),_:1})):((0,r.wg)(),(0,r.j4)(p,{key:1},{default:(0,r.w5)((()=>[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{image:(0,r.w5)((()=>[(0,r.Wm)(d,{class:"mdi mdi-emoticon-sad-outline mdi-48px"})])),_:1})])),_:1})])),_:1}))])])]))])}}};const Vt=(0,W.Z)(Rt,[["__scopeId","data-v-04204da0"]]);var Lt=Vt;l(4085);const Mt={class:"qp-vue"},Pt={key:0},Yt={key:0,class:"qp-container"},Nt=["textContent"],Bt=["textContent"],Zt={class:"qp-meworlds-overview"},It={class:"qp-meworlds-overview-tags"},Kt=["textContent"],Jt=["textContent"],Gt=["textContent"],Qt=["textContent"],Xt={class:"qp-meworlds-overview-title"},el=["textContent"],tl=["textContent"],ll={class:"qp-meworlds-infolist"},al=["textContent"],rl=["textContent"],nl=["textContent"],ol=["textContent"],sl=["textContent"],ul=["textContent"],il=["textContent"],pl=["textContent"],dl={key:1,class:"qp-container"},cl=["textContent"],ml=["innerHTML"],gl=["textContent"],wl=["textContent"],_l={key:1},vl={class:"qp-container"},hl={"element-loading-background":"transparent",style:{height:"60vh"}},fl={key:2},yl={class:"qp-container"};var Cl={__name:"MeWorldsView",setup(e){const{t:t}=Me.global,l=(0,$e.tv)(),u=(0,s.oR)(),i=(0,r.Fl)((()=>u.getters.rat)),p=(0,r.Fl)((()=>u.getters.app)),d=(0,r.Fl)((()=>u.getters.player)),c=(0,o.iH)(!0),m=(0,o.iH)(!1),g=(0,o.iH)(null),w=(0,o.iH)(null),_=(0,o.iH)([]),v=(0,o.iH)(0),h=(0,o.iH)(1),f=(0,o.iH)(0);(0,r.bv)((()=>{i.value?y():l.push({name:"AuthLogin"})}));const y=async()=>{c.value=!0,g.value=null,_.value=[];let e=await fetch(`${As}/worlds/?page=${h.value}`,{method:"GET",headers:{Authorization:i.value}}),l=await e.json();200===e.status?(v.value=l.count,_.value=l.results,f.value=l.size):g.value=t("ThisWorldDoesntExistAnymore"),c.value=!1},C=e=>{h.value=e,y()},x=(0,o.iH)(!1),b=(0,o.iH)(),q=(0,o.qj)({name:"",description:""}),k=()=>{x.value=!0},$=()=>{x.value=!1};return(e,t)=>{const l=(0,r.up)("el-col"),s=(0,r.up)("el-button"),u=(0,r.up)("el-row"),y=(0,r.up)("el-tag"),W=(0,r.up)("el-pagination"),z=(0,r.up)("el-icon"),S=(0,r.up)("el-empty"),j=(0,r.up)("el-input"),T=(0,r.up)("el-form-item"),D=(0,r.up)("el-form"),A=(0,r.up)("el-alert"),H=(0,r.up)("el-result"),E=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)("div",Mt,[c.value||g.value||!(0,o.SU)(i)?c.value?((0,r.wg)(),(0,r.iD)("div",_l,[(0,r._)("div",vl,[(0,r.wy)((0,r._)("div",hl,null,512),[[E,c.value]])])])):((0,r.wg)(),(0,r.iD)("div",fl,[(0,r._)("div",yl,[(0,r.Wm)(_t,{h:"auto"},{default:(0,r.w5)((()=>[(0,r.Wm)(H,{icon:"error",title:e.$t("Error"),"sub-title":g.value},null,8,["title","sub-title"])])),_:1})])])):((0,r.wg)(),(0,r.iD)("div",Pt,[x.value?x.value?((0,r.wg)(),(0,r.iD)("div",dl,[(0,r._)("header",null,[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(l,{span:24},{default:(0,r.w5)((()=>[(0,r._)("h1",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("CreateWorld"))},null,8,cl)])])),_:1})])),_:1})]),(0,r._)("section",null,[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(D,{ref_key:"formCreateWorldRef",ref:b,model:q,"label-position":(0,o.SU)(p).win.w<1200?"top":"right","label-width":"120px","status-icon":""},{default:(0,r.w5)((()=>[(0,r.Wm)(T,{label:e.$t("Name"),prop:"name",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(j,{modelValue:q.name,"onUpdate:modelValue":t[1]||(t[1]=e=>q.name=e),type:"text",maxlength:"32","show-word-limit":"",placeholder:e.$t("YourPersonalUsername")},null,8,["modelValue","placeholder"])])),_:1},8,["label","rules"]),(0,r.Wm)(T,{label:e.$t("Description"),prop:"description",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(j,{modelValue:q.description,"onUpdate:modelValue":t[2]||(t[2]=e=>q.description=e),type:"text",maxlength:"250",onKeyup:t[3]||(t[3]=(0,a.D2)((e=>$()),["enter"]))},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1},8,["model","label-position"])])),_:1}),w.value?((0,r.wg)(),(0,r.j4)(l,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(A,{type:"error","show-icon":""},{default:(0,r.w5)((()=>[(0,r._)("div",{innerHTML:w.value},null,8,ml)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,{disabled:m.value,onClick:t[4]||(t[4]=e=>$())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Cancel"))},null,8,gl)])),_:1},8,["disabled"]),(0,r.Wm)(s,{type:"primary",loading:m.value},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Send"))},null,8,wl)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])])):(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Yt,[(0,r._)("header",null,[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(l,{span:24,sm:12,align:"left"},{default:(0,r.w5)((()=>[(0,r._)("h1",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("YourWorlds"))},null,8,Nt)])])),_:1}),(0,r.Wm)(l,{span:24,sm:12,align:(0,o.SU)(p).win.w>=768?"right":"left"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{disabled:!(0,o.SU)(d).limits.can_create_worlds,onClick:t[0]||(t[0]=e=>k())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("CreateWorld"))},null,8,Bt)])),_:1},8,["disabled"])])),_:1},8,["align"])])),_:1})]),(0,r._)("section",null,[_.value.length?((0,r.wg)(),(0,r.j4)(u,{key:0},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(_.value,((t,a)=>((0,r.wg)(),(0,r.j4)(l,{key:`world-${a}`},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,{clickable:"",pa:"12px"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{align:"middle"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{span:24,md:12,align:"left"},{default:(0,r.w5)((()=>[(0,r._)("div",Zt,[(0,r._)("div",It,[t.is_active?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(y,{key:0,type:"danger",effect:"plain",size:"small"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Closed"))},null,8,Kt)])),_:1})),(0,o.SU)(d).id==t.creator?((0,r.wg)(),(0,r.j4)(y,{key:1,effect:"plain",size:"small"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Creator"))},null,8,Jt)])),_:1})):(0,r.kq)("",!0),t.administrators.includes((0,o.SU)(d).id)?((0,r.wg)(),(0,r.j4)(y,{key:2,effect:"plain",size:"small"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Administration"))},null,8,Gt)])),_:1})):(0,r.kq)("",!0),t.moderators.includes((0,o.SU)(d).id)?((0,r.wg)(),(0,r.j4)(y,{key:3,effect:"plain",size:"small"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Moderation"))},null,8,Qt)])),_:1})):(0,r.kq)("",!0)]),(0,r._)("h2",Xt,[(0,r._)("span",{textContent:(0,n.zw)(t.name)},null,8,el)]),t.description?((0,r.wg)(),(0,r.iD)("p",{key:0,textContent:(0,n.zw)(t.description)},null,8,tl)):(0,r.kq)("",!0)])])),_:2},1024),(0,r.Wm)(l,{span:24,md:12,align:"right"},{default:(0,r.w5)((()=>[(0,r._)("ul",ll,[(0,r._)("li",null,[(0,r._)("span",{class:"qp-label",textContent:(0,n.zw)(e.$t("Player",t.count_players))},null,8,al),(0,r._)("span",{class:"qp-value",textContent:(0,n.zw)(e.$filters.num_to_element(t.count_players,1))},null,8,rl)]),(0,r._)("li",null,[(0,r._)("span",{class:"qp-label",textContent:(0,n.zw)(e.$t("Character",t.count_heros))},null,8,nl),(0,r._)("span",{class:"qp-value",textContent:(0,n.zw)(e.$filters.num_to_element(t.count_heros,1))},null,8,ol)]),(0,r._)("li",null,[(0,r._)("span",{class:"qp-label",textContent:(0,n.zw)(e.$t("Chapter",t.count_chapters))},null,8,sl),(0,r._)("span",{class:"qp-value",textContent:(0,n.zw)(e.$filters.num_to_element(t.count_chapters,1))},null,8,ul)]),(0,r._)("li",null,[(0,r._)("span",{class:"qp-label",textContent:(0,n.zw)(e.$t("Message",t.count_messages))},null,8,il),(0,r._)("span",{class:"qp-value",textContent:(0,n.zw)(e.$filters.num_to_element(t.count_messages,1))},null,8,pl)])])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(W,{background:"","hide-on-single-page":"",layout:"prev, pager, next",total:v.value,"page-size":f.value,"current-page":h.value,"onUpdate:currentPage":C},null,8,["total","page-size","current-page"])])),_:1})])),_:1})):((0,r.wg)(),(0,r.j4)(u,{key:1},{default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)(S,{description:e.$t("NoWorldCreated")},{image:(0,r.w5)((()=>[(0,r.Wm)(z,{class:"mdi mdi-emoticon-sad-outline mdi-48px"})])),_:1},8,["description"])])),_:1})])),_:1}))])]))]))])}}};const xl=(0,W.Z)(Cl,[["__scopeId","data-v-2f27f54c"]]);var bl=xl;const ql={class:"qp-vue"},kl={class:"qp-container"};function $l(e,t,l,a,n,o){const s=(0,r.up)("qp-card"),u=(0,r.up)("el-col"),i=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",ql,[(0,r._)("div",kl,[(0,r.Wm)(i,{gutter:20},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{span:24},{default:(0,r.w5)((()=>[(0,r.Wm)(s)])),_:1})])),_:1})])])}var Wl={name:"HeroDetailView",components:{qpCard:_t}};const zl=(0,W.Z)(Wl,[["render",$l]]);var Sl=zl;const jl={class:"qp-vue"},Tl={class:"qp-container"},Dl=(0,r._)("a",{href:"https://www.flaticon.com/free-icons/killer-whale",target:"_blank",title:"killer whale icons"},"Killer whale icons created by edt.im - Flaticon",-1);var Al={__name:"ErrorView",setup(e){return(e,t)=>{const l=(0,r.up)("el-result"),a=(0,r.up)("el-col"),n=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",jl,[(0,r._)("div",Tl,[(0,r.Wm)(n,{gutter:20},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{span:24},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[(0,r.Wm)(l,{icon:"error",title:e.$t("Error"),"sub-title":"..."},null,8,["title","sub-title"])])),_:1})])),_:1}),(0,r.Wm)(a,{span:24},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[Dl])),_:1})])),_:1})])),_:1})])])}}};const Hl=Al;var El=Hl;const Ul=e=>((0,r.dD)("data-v-6097077c"),e=e(),(0,r.Cn)(),e),Ol={class:"qp-vue"},Fl={key:0},Rl={id:"qp-auth"},Vl=Ul((()=>(0,r._)("div",{id:"qp-auth-banner"},null,-1))),Ll={id:"qp-auth-title"},Ml=["textContent"],Pl=["innerHTML"],Yl=["textContent"],Nl=["textContent"],Bl=["textContent"],Zl=Ul((()=>(0,r._)("div",{id:"qp-auth-banner"},null,-1))),Il={id:"qp-auth-title"},Kl=["textContent"],Jl=["innerHTML"],Gl=["textContent"],Ql=["textContent"],Xl=["textContent"],ea={"element-loading-background":"transparent",style:{width:"200px",height:"200px"}},ta=["textContent"],la={key:1},aa={class:"qp-container"},ra={"element-loading-background":"transparent",style:{height:"60vh"}},na={key:2},oa={id:"qp-auth"},sa=["textContent"];var ua={__name:"AuthView",setup(e){const{t:t}=Me.global,l=(0,$e.yj)(),i=(0,$e.tv)(),p=(0,s.oR)(),d=(0,r.Fl)((()=>p.getters.app)),c=(0,r.Fl)((()=>p.getters.rat)),m=(0,o.iH)(!0),g=(0,o.iH)(!1),w=(0,o.iH)(null),_=(0,o.iH)(null),v=(0,o.iH)(null);(0,r.bv)((()=>{c.value||"AuthRegister"!=l.name?c.value||"AuthLogin"!=l.name?"AuthLogout"==l.name?(v.value="logout",S()):w.value=t("AnErrorOccurred"):f():h(),m.value=!1}));const h=()=>{v.value="register",history.pushState(history.state,null,"/register")},f=()=>{v.value="login",history.pushState(history.state,null,"/login")},y=()=>{i.push({name:"Home"})},C=(0,o.iH)(),x=(0,o.qj)({username:"",playername:"",email:"",password:""}),b=async()=>{_.value=null,g.value=!0,await C.value.validate(((e,l)=>{if(e)q();else{for(let[e,a]of Object.entries(l)){let l=t(`${e}`);for(let e of a)_.value=`${l} : ${e.message}`}g.value=!1}}))},q=async()=>{_.value=null,g.value=!0;const e=await p.dispatch("doRegister",x);if(e.valid)i.push({name:"Home"});else{for(let[l,a]of Object.entries(e.data)){let e=t(`${l}`),r=t(`${a}`);_.value=`${e} : ${r}`}g.value=!1}},k=(0,o.iH)(),$=(0,o.qj)({username:"",password:""}),W=async()=>{_.value=null,g.value=!0,await k.value.validate(((e,l)=>{if(e)z();else{for(let[e,a]of Object.entries(l)){let l=t(`${e}`);for(let e of a)_.value=`${l} : ${e.message}`}g.value=!1}}))},z=async()=>{_.value=null,g.value=!0;const e=await p.dispatch("doLogin",$);if(e.valid)i.push({name:"Home"});else{for(let[l,a]of Object.entries(e.data)){let e=t(`${l}`),r=t(`${a}`);_.value=`${e} : ${r}`}g.value=!1}},S=async()=>{await p.dispatch("doLogout"),i.push({name:"Home"})};return(e,t)=>{const l=(0,r.up)("el-input"),s=(0,r.up)("el-form-item"),i=(0,r.up)("el-form"),p=(0,r.up)("el-col"),q=(0,r.up)("el-alert"),z=(0,r.up)("el-button"),S=(0,r.up)("el-link"),j=(0,r.up)("el-row"),T=(0,r.up)("el-scrollbar"),D=(0,r.up)("el-result"),A=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)("div",Ol,[m.value||w.value||!v.value?m.value?((0,r.wg)(),(0,r.iD)("div",la,[(0,r._)("div",aa,[(0,r.wy)((0,r._)("div",ra,null,512),[[A,m.value]])])])):((0,r.wg)(),(0,r.iD)("div",na,[(0,r._)("div",oa,[(0,r.Wm)(_t,{h:"auto"},{default:(0,r.w5)((()=>[(0,r.Wm)(D,{icon:"error",title:e.$t("Error"),"sub-title":w.value,style:{"padding-bottom":"24px"}},null,8,["title","sub-title"]),(0,r.Wm)(z,{onClick:t[14]||(t[14]=e=>y()),style:{"margin-bottom":"40px"}},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("BackToHome"))},null,8,sa)])),_:1})])),_:1})])])):((0,r.wg)(),(0,r.iD)("div",Fl,[(0,r._)("div",Rl,[(0,o.SU)(c)||"register"!=v.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(_t,{key:0,h:"auto",pa:"0"},{default:(0,r.w5)((()=>[(0,r.Wm)(T,{"max-height":"90vh"},{default:(0,r.w5)((()=>[Vl,(0,r._)("div",Ll,[(0,r._)("h2",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Register"))},null,8,Ml)])]),(0,r.Wm)(j,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{ref_key:"formRegisterRef",ref:C,model:x,"label-position":(0,o.SU)(d).win.w<1200?"top":"right","label-width":"120px","status-icon":""},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{label:e.$t("Username"),prop:"username",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modelValue:x.username,"onUpdate:modelValue":t[0]||(t[0]=e=>x.username=e),type:"text",maxlength:"32","show-word-limit":"",placeholder:e.$t("YourPersonalUsername"),"prefix-icon":(0,o.SU)(u.n5m)},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label","rules"]),(0,r.Wm)(s,{label:e.$t("Playername"),prop:"playername",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modelValue:x.playername,"onUpdate:modelValue":t[1]||(t[1]=e=>x.playername=e),type:"text",maxlength:"32","show-word-limit":"",placeholder:e.$t("YourPublicPlayername"),"prefix-icon":(0,o.SU)(u.n5m)},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label","rules"]),(0,r.Wm)(s,{label:e.$t("Email"),prop:"email",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modelValue:x.email,"onUpdate:modelValue":t[2]||(t[2]=e=>x.email=e),type:"email",maxlength:"250",placeholder:e.$t("YourEmailAddress"),"prefix-icon":(0,o.SU)(u.v0C)},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label","rules"]),(0,r.Wm)(s,{label:e.$t("Password"),prop:"password",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modelValue:x.password,"onUpdate:modelValue":t[3]||(t[3]=e=>x.password=e),type:"password",maxlength:"250","prefix-icon":(0,o.SU)(u.HEZ),onKeyup:t[4]||(t[4]=(0,a.D2)((e=>b()),["enter"]))},null,8,["modelValue","prefix-icon"])])),_:1},8,["label","rules"])])),_:1},8,["model","label-position"])])),_:1}),_.value?((0,r.wg)(),(0,r.j4)(p,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(q,{type:"error","show-icon":""},{default:(0,r.w5)((()=>[(0,r._)("div",{innerHTML:_.value},null,8,Pl)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(z,{disabled:g.value,onClick:t[5]||(t[5]=e=>y())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Cancel"))},null,8,Yl)])),_:1},8,["disabled"]),(0,r.Wm)(z,{type:"primary",loading:g.value,onClick:t[6]||(t[6]=e=>b())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Send"))},null,8,Nl)])),_:1},8,["loading"])])),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(S,{disabled:g.value,onClick:t[7]||(t[7]=e=>f())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("AlreadyHaveAnAccount"))},null,8,Bl)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1})),(0,o.SU)(c)||"login"!=v.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(_t,{key:1,h:"auto",pa:"0"},{default:(0,r.w5)((()=>[(0,r.Wm)(T,{"max-height":"90vh"},{default:(0,r.w5)((()=>[Zl,(0,r._)("div",Il,[(0,r._)("h2",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Login"))},null,8,Kl)])]),(0,r.Wm)(j,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{ref_key:"formLoginRef",ref:k,model:$,"label-position":(0,o.SU)(d).win.w<1200?"top":"right","label-width":"120px","status-icon":""},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{label:e.$t("Username"),prop:"username",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modelValue:$.username,"onUpdate:modelValue":t[8]||(t[8]=e=>$.username=e),type:"text",maxlength:"32","show-word-limit":"",placeholder:e.$t("YourPersonalUsername"),"prefix-icon":(0,o.SU)(u.n5m)},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label","rules"]),(0,r.Wm)(s,{label:e.$t("Password"),prop:"password",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modelValue:$.password,"onUpdate:modelValue":t[9]||(t[9]=e=>$.password=e),type:"password",maxlength:"250","prefix-icon":(0,o.SU)(u.HEZ),onKeyup:t[10]||(t[10]=(0,a.D2)((e=>W()),["enter"]))},null,8,["modelValue","prefix-icon"])])),_:1},8,["label","rules"])])),_:1},8,["model","label-position"])])),_:1}),_.value?((0,r.wg)(),(0,r.j4)(p,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(q,{type:"error","show-icon":""},{default:(0,r.w5)((()=>[(0,r._)("div",{innerHTML:_.value},null,8,Jl)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(z,{disabled:g.value,onClick:t[11]||(t[11]=e=>y())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Cancel"))},null,8,Gl)])),_:1},8,["disabled"]),(0,r.Wm)(z,{type:"primary",loading:g.value,onClick:t[12]||(t[12]=e=>W())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Send"))},null,8,Ql)])),_:1},8,["loading"])])),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(S,{disabled:g.value,onClick:t[13]||(t[13]=e=>h())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("DontHaveAnAccount"))},null,8,Xl)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1})),"logout"==v.value?((0,r.wg)(),(0,r.j4)(_t,{key:2,h:"auto"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r._)("div",ea,null,512),[[A,!0]]),(0,r._)("div",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Logout"))},null,8,ta)])])),_:1})):(0,r.kq)("",!0)])]))])}}};const ia=(0,W.Z)(ua,[["__scopeId","data-v-6097077c"]]);var pa=ia;const da=[{path:"/register",name:"AuthRegister",component:pa},{path:"/login",name:"AuthLogin",component:pa},{path:"/logout",name:"AuthLogout",component:pa}],ca={key:0},ma={class:"qp-container"},ga={key:1},wa={class:"qp-container"},_a={"element-loading-background":"transparent",style:{height:"60vh"}};var va={__name:"qpLoadError",props:{isLoading:{type:Boolean,default:!0},hasError:{type:String,default:null}},setup(e){const t=e;return(e,l)=>{const a=(0,r.up)("el-result"),n=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)("div",null,[t.hasError?((0,r.wg)(),(0,r.iD)("div",ca,[(0,r._)("div",ma,[(0,r.Wm)(_t,{h:"auto"},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{icon:"error",title:e.$t("Error"),"sub-title":t.hasError},null,8,["title","sub-title"])])),_:1})])])):t.isLoading?((0,r.wg)(),(0,r.iD)("div",ga,[(0,r._)("div",wa,[(0,r.wy)((0,r._)("div",_a,null,512),[[n,t.isLoading]])])])):(0,r.kq)("",!0)])}}};const ha=va;var fa=ha;const ya={class:"qp-vue"},Ca={key:0},xa={class:"qp-world-header"},ba=["textContent"],qa={class:"qp-world-footer"},ka={class:"qp-world-footer-inner"},$a={class:"qp-world-footer-copyright"},Wa=["textContent"];var za={__name:"WorldView",setup(e){const{t:t}=Me.global,l=(0,$e.yj)(),a=(0,$e.tv)(),u=(0,s.oR)(),i=(0,r.Fl)((()=>u.getters.rat)),p=(0,o.iH)(!0),d=(0,o.iH)(null);(0,r.bv)((()=>{m()}));const c=(0,o.iH)(null),m=async()=>{p.value=!0,d.value=null;try{let e=await fetch(`${As}/worlds/${l.params.slug}/`,{method:"GET",headers:{Authorization:i.value}}),t=await e.json();if(200!==e.status)throw e;c.value=t}catch(e){403===e.status?d.value=t("YouDoesntHaveAccessToThisWorld"):404===e.status?d.value=t("ThisWorldDoesntExistAnymore"):d.value=t("AnErrorOccurred")}p.value=!1},g=()=>{a.go({name:"WorldForum",params:{slug:c.value.slug}})};return(e,t)=>{const l=(0,r.up)("router-view"),a=(0,r.up)("el-col"),o=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",ya,[p.value||d.value||!c.value?((0,r.wg)(),(0,r.j4)(fa,{key:1,isloading:p.value,hasError:d.value},null,8,["isloading","hasError"])):((0,r.wg)(),(0,r.iD)("div",Ca,[(0,r._)("header",xa,[(0,r._)("h1",{class:"qp-world-header-name",onClick:t[0]||(t[0]=e=>g())},[(0,r._)("span",{textContent:(0,n.zw)(c.value.name)},null,8,ba)])]),((0,r.wg)(),(0,r.j4)(l,{key:e.$route.params.slug,world:c.value},null,8,["world"])),(0,r._)("footer",qa,[(0,r._)("div",ka,[(0,r.Wm)(o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(a,null,{default:(0,r.w5)((()=>[(0,r._)("div",$a,[(0,r._)("small",null,[(0,r._)("span",{textContent:(0,n.zw)(`© ${c.value.copyright} - ${e.$t("AllRightsReserved")}`)},null,8,Wa)])])])),_:1})])),_:1})])])]))])}}};const Sa=za;var ja=Sa;const Ta={class:"qp-forum-breadcrumbs"},Da=["onClick"],Aa=["textContent"];var Ha={__name:"qpBreadcrumbs",props:{crumbs:{type:Array,default:()=>[]}},setup(e){const t=e,l=(0,$e.tv)(),a=e=>{e&&l.push(e)};return(e,l)=>((0,r.wg)(),(0,r.iD)("nav",Ta,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.crumbs,((e,t)=>((0,r.wg)(),(0,r.iD)("li",{key:`crumb-${t}`,onClick:t=>a(e.go)},[(0,r._)("span",{textContent:(0,n.zw)(e.name)},null,8,Aa)],8,Da)))),128))])]))}};const Ea=Ha;var Ua=Ea;const Oa=e=>((0,r.dD)("data-v-662ebf4a"),e=e(),(0,r.Cn)(),e),Fa={class:"qp-forum-header"},Ra={class:"qp-forum-header-title"},Va=["textContent"],La=["textContent"],Ma=Oa((()=>(0,r._)("hr",{class:"qp-forum-header-divider"},null,-1))),Pa={class:"qp-forum-header-buttons"},Ya=["textContent"],Na=["textContent"];var Ba={__name:"qpHeader",props:{title:{type:String,default:""},description:{type:String,default:null},crumbs:{type:Object,default:()=>{}},showBtnChapter:{type:Boolean,default:!1},showBtnReply:{type:Boolean,default:!1}},setup(e){const t=e;return(l,a)=>{const o=(0,r.up)("el-col"),s=(0,r.up)("el-button"),u=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("header",Fa,[(0,r._)("h2",Ra,[(0,r._)("span",{textContent:(0,n.zw)(t.title)},null,8,Va)]),t.description?((0,r.wg)(),(0,r.iD)("p",{key:0,class:"qp-forum-header-description",textContent:(0,n.zw)(t.description)},null,8,La)):(0,r.kq)("",!0),Ma,t.crumbs?.length||e.showBtnChapter||e.showBtnReply?((0,r.wg)(),(0,r.j4)(u,{key:1,align:"middle"},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{span:24,sm:e.showBtnChapter||e.showBtnReply?12:24,style:{"padding-left":"0"}},{default:(0,r.w5)((()=>[t.crumbs?.length?((0,r.wg)(),(0,r.j4)(Ua,{key:0,crumbs:t.crumbs},null,8,["crumbs"])):(0,r.kq)("",!0)])),_:1},8,["sm"]),e.showBtnChapter||e.showBtnReply?((0,r.wg)(),(0,r.j4)(o,{key:0,span:24,sm:12,style:{"padding-right":"0"}},{default:(0,r.w5)((()=>[(0,r._)("div",Pa,[e.showBtnChapter?((0,r.wg)(),(0,r.j4)(s,{key:0,onClick:a[0]||(a[0]=e=>l.$emit("openNewChapter"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(l.$t("NewChapter"))},null,8,Ya)])),_:1})):(0,r.kq)("",!0),e.showBtnReply?((0,r.wg)(),(0,r.j4)(s,{key:1,type:"primary",onClick:a[1]||(a[1]=e=>l.$emit("openNewReply"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(l.$t("ToReply"))},null,8,Na)])),_:1})):(0,r.kq)("",!0)])])),_:1})):(0,r.kq)("",!0)])),_:1})):(0,r.kq)("",!0)])}}};const Za=(0,W.Z)(Ba,[["__scopeId","data-v-662ebf4a"]]);var Ia=Za;const Ka=(e,t=!0)=>{const l={year:"numeric",month:"long",day:"numeric",hour:t?"numeric":null,minute:t?"numeric":null,hour12:!1};return new Date(e).toLocaleString("fr",l)},Ja=(e,t)=>{const l=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}],a=/\.0+$|(\.[0-9]*[1-9])0+$/;var r=l.slice().reverse().find((function(t){return e>=t.value}));return r?(e/r.value).toFixed(t).replace(a,"$1")+r.symbol:"0"},Ga=e=>{const t="àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìıİłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;",l="aaaaaaaaaacccddeeeeeeeegghiiiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------",a=new RegExp(t.split("").join("|"),"g");return e.toString().toLowerCase().replace(/\s+/g,"-").replace(a,(e=>l.charAt(t.indexOf(e)))).replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},Qa=["id"],Xa={class:"qp-forum-territory-inner"},er={class:"qp-forum-header"},tr=["textContent"],lr=["textContent"],ar=["textContent"],rr=["textContent"],nr=["textContent"],or=["textContent"],sr=["textContent"],ur=["textContent"],ir={class:"qp-forum-header-lastmessage"},pr=["textContent"],dr={key:0,class:"qp-forum-header-lastmessage-infos"},cr=["textContent"],mr=["textContent"];var gr={__name:"qpTerritoryList",props:{territory:{type:Object,default:()=>{}}},setup(e){const t=e,l=(0,$e.yj)(),a=(0,$e.tv)(),s=e=>{e&&a.push(e)},u=()=>{a.push({name:"WorldForumTerritory",params:{slug:l.params.slug,zone_pk:t.territory.zone.id,zone_slug:Ga(t.territory.zone.name),territory_pk:t.territory.id,territory_slug:Ga(t.territory.name)}})};return(e,l)=>{const a=(0,r.up)("el-col"),i=(0,r.up)("el-row"),p=(0,r.up)("el-popover"),d=(0,r.up)("el-avatar"),c=(0,r.up)("el-icon");return t.territory?((0,r.wg)(),(0,r.iD)("article",{key:0,id:`t${t.territory.id}`,class:"qp-forum-territory",style:(0,n.j5)(`flex-basis:${t.territory.flexbasis};`)},[(0,r._)("div",Xa,[(0,r._)("header",er,[(0,r.Wm)(p,{"show-after":1e3,"popper-class":"qp-forum-header-popper"},{reference:(0,r.w5)((()=>[(0,r._)("h2",{class:"qp-forum-header-title",onClick:l[0]||(l[0]=e=>u()),style:(0,n.j5)(t.territory.colour?`color:${t.territory.colour};`:"")},[(0,r._)("span",{textContent:(0,n.zw)(t.territory.name)},null,8,tr)],4)])),default:(0,r.w5)((()=>[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[t.territory.description?((0,r.wg)(),(0,r.j4)(a,{key:0,span:24},{default:(0,r.w5)((()=>[(0,r._)("p",{class:"qp-forum-popheader-description",textContent:(0,n.zw)(t.territory.description)},null,8,lr)])),_:1})):(0,r.kq)("",!0),t.territory.count_sectors?((0,r.wg)(),(0,r.j4)(a,{key:1,span:8,align:"center"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)((0,o.SU)(Ja)(t.territory.count_sectors))},null,8,ar),(0,r._)("div",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Sector",t.territory.count_sectors))},null,8,rr)])])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(a,{span:t.territory.count_sectors?8:12,align:"center"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)((0,o.SU)(Ja)(t.territory.count_chapters))},null,8,nr),(0,r._)("div",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Chapter",t.territory.count_chapters))},null,8,or)])])),_:1},8,["span"]),(0,r.Wm)(a,{span:t.territory.count_sectors?8:12,align:"center"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)((0,o.SU)(Ja)(t.territory.count_messages))},null,8,sr),(0,r._)("div",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Message",t.territory.count_messages))},null,8,ur)])])),_:1},8,["span"])])),_:1})])),_:1}),(0,r._)("div",ir,[(0,r._)("div",{class:(0,n.C_)("qp-forum-header-lastmessage-avatar "+(t.territory.last_chapter?.last_message?"":"qp-empty"))},[t.territory.last_chapter?.last_message?((0,r.wg)(),(0,r.j4)(d,{key:0,src:t.territory.last_chapter.last_message.author?.avatar},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(t.territory.last_chapter.last_message.author?.initials)},null,8,pr)])),_:1},8,["src"])):(0,r.kq)("",!0),t.territory.last_chapter?.last_message?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"qp-forum-header-lastmessage-gotolast",onClick:l[1]||(l[1]=e=>s(t.territory.last_chapter.last_message.route))},[(0,r.Wm)(c,{class:"mdi mdi-arrow-bottom-right-thin-circle-outline"})])):(0,r.kq)("",!0)],2),t.territory.last_chapter?.last_message?((0,r.wg)(),(0,r.iD)("div",dr,[(0,r._)("div",{class:"qp-forum-header-lastmessage-infos-link",onClick:l[2]||(l[2]=e=>s(t.territory.last_chapter.route))},[(0,r._)("span",{class:"title",textContent:(0,n.zw)(t.territory.last_chapter.last_message.chapter.title)},null,8,cr),(0,r._)("span",{class:"date",textContent:(0,n.zw)((0,o.SU)(Ka)(t.territory.last_chapter.last_message.chapter.created_at))},null,8,mr)])])):(0,r.kq)("",!0)])])])],12,Qa)):(0,r.kq)("",!0)}}};const wr=gr;var _r=wr;const vr=["id"],hr={class:"qp-forum-zone-inner"},fr={class:"qp-forum-territories"};var yr={__name:"qpZoneList",props:{world:{type:Object,default:()=>{}},zone:{type:Object,default:()=>{}}},setup(e){const t=e,l=(0,$e.yj)(),a=(0,r.Fl)((()=>{if("WorldForum"==l.name)return[];let e=[{name:t.world.name,view:"world",data:{world:t.world}}];return e}));return(e,l)=>t.zone?((0,r.wg)(),(0,r.iD)("article",{key:0,id:`z${t.zone.id}`,class:"qp-forum-zone"},[(0,r._)("div",hr,[(0,r.Wm)(Ia,{title:t.zone.name,description:t.zone.description,crumbs:(0,o.SU)(a)},null,8,["title","description","crumbs"]),(0,r._)("section",fr,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.zone.territories,((e,t)=>((0,r.wg)(),(0,r.j4)(_r,{key:`territory-${t}`,territory:e},null,8,["territory"])))),128))])])],8,vr)):(0,r.kq)("",!0)}};const Cr=yr;var xr=Cr;const br={class:"qp-vue qp-forum qp-singleton-index"},qr={key:0},kr={class:"qp-container"},$r={key:0,class:"qp-forum-zones"};var Wr={__name:"IndexView",props:{world:{type:Object,default:()=>{}}},setup(e){const t=e,{t:l}=Me.global,a=(0,s.oR)(),n=(0,r.Fl)((()=>a.getters.rat)),u=(0,o.iH)(!0),i=(0,o.iH)(null);(0,r.bv)((()=>{d()}));const p=(0,o.iH)(null),d=async()=>{u.value=!0,i.value=null;try{let e=await fetch(`${As}/worlds/forums/${t.world.forum.id}/`,{method:"GET",headers:{Authorization:n.value}}),l=await e.json();if(200!==e.status)throw e;p.value=l}catch(e){403===e.status?i.value=l("YouDoesntHaveAccessToThisForum"):404===e.status?i.value=l("ThisForumDoesntExistAnymore"):i.value=l("AnErrorOccurred")}u.value=!1};return(e,l)=>((0,r.wg)(),(0,r.iD)("div",br,[u.value||i.value||!p.value?((0,r.wg)(),(0,r.j4)(fa,{key:1,isloading:u.value,hasError:i.value},null,8,["isloading","hasError"])):((0,r.wg)(),(0,r.iD)("div",qr,[(0,r._)("div",kr,["WorldForum"==e.$route.name?((0,r.wg)(),(0,r.iD)("section",$r,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(p.value.zones,((e,l)=>((0,r.wg)(),(0,r.j4)(xr,{key:`zones-${l}`,world:t.world,zone:e},null,8,["world","zone"])))),128))])):(0,r.kq)("",!0)])]))]))}};const zr=Wr;var Sr=zr;const jr={class:"qp-vue qp-forum qp-singleton-zone"},Tr={key:0},Dr={class:"qp-container"},Ar={class:"qp-forum-zones"},Hr=["id"],Er={class:"qp-forum-zone-inner"},Ur={class:"qp-forum-territories"};var Or={__name:"ZoneView",props:{world:{type:Object,default:()=>{}}},setup(e){const t=e,{t:l}=Me.global,a=(0,$e.yj)(),n=(0,s.oR)(),u=(0,r.Fl)((()=>n.getters.rat)),i=(0,o.iH)(!0),p=(0,o.iH)(null),d=(0,r.Fl)((()=>{let e=[{name:c.value.forum.name,go:`/w/${a.params.slug}/forum`}];return e}));(0,r.bv)((()=>{m()}));const c=(0,o.iH)(null),m=async()=>{i.value=!0,p.value=null;try{let e=await fetch(`${As}/worlds/zones/${a.params.zone_pk}/`,{method:"GET",headers:{Authorization:u.value}}),t=await e.json();if(200!==e.status)throw e;c.value=t}catch(e){403===e.status?p.value=l("YouDoesntHaveAccessToThisZone"):404===e.status?p.value=l("ThisZoneDoesntExistAnymore"):p.value=l("AnErrorOccurred")}i.value=!1};return(e,l)=>((0,r.wg)(),(0,r.iD)("div",jr,[i.value||p.value||!c.value?((0,r.wg)(),(0,r.j4)(fa,{key:1,isloading:i.value,hasError:p.value},null,8,["isloading","hasError"])):((0,r.wg)(),(0,r.iD)("div",Tr,[(0,r._)("div",Dr,[(0,r._)("section",Ar,[(0,r._)("article",{id:`z${c.value.id}`,class:"qp-forum-zone"},[(0,r._)("div",Er,[(0,r.Wm)(Ia,{title:c.value.name,description:c.value.description,crumbs:(0,o.SU)(d)},null,8,["title","description","crumbs"]),(0,r._)("section",Ur,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.value.territories,((e,l)=>((0,r.wg)(),(0,r.j4)(_r,{key:`territory-${l}`,world:t.world,territory:e},null,8,["world","territory"])))),128))])])],8,Hr)])])]))]))}};const Fr=Or;var Rr=Fr;const Vr=e=>((0,r.dD)("data-v-8b3271d8"),e=e(),(0,r.Cn)(),e),Lr=["textContent"],Mr={class:"qp-quests-list"},Pr={class:"qp-quests-item"},Yr={class:"qp-quests-item-icon"},Nr={class:"qp-quests-item-text"},Br=Vr((()=>(0,r._)("p",{class:"qp-quests-item-title",textContent:"Récolter des plantes"},null,-1))),Zr=["textContent"],Ir={class:"qp-quests-item-progress"},Kr={class:"qp-quests-item"},Jr={class:"qp-quests-item-icon"},Gr={class:"qp-quests-item-text"},Qr=Vr((()=>(0,r._)("p",{class:"qp-quests-item-title",textContent:"Problème de vermine"},null,-1))),Xr=["textContent"],en={class:"qp-quests-item-progress"},tn=["textContent"];var ln={__name:"qpCardQuestsList",setup(e){return(e,t)=>{const l=(0,r.up)("el-icon"),a=(0,r.up)("el-progress"),o=(0,r.up)("el-button");return(0,r.wg)(),(0,r.j4)(_t,{h:"auto"},{header:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Quests"))},null,8,Lr)])),default:(0,r.w5)((()=>[(0,r._)("ul",Mr,[(0,r._)("li",Pr,[(0,r._)("div",Yr,[(0,r.Wm)(l,{class:"mdi mdi-leaf"})]),(0,r._)("div",Nr,[Br,(0,r._)("p",{class:"qp-quests-item-description",textContent:(0,n.zw)("Parcourir les alentours pour trouver des plantes utiles.")},null,8,Zr)]),(0,r._)("div",Ir,[(0,r.Wm)(a,{percentage:50,"stroke-width":4,"show-text":!1})])]),(0,r._)("li",Kr,[(0,r._)("div",Jr,[(0,r.Wm)(l,{class:"mdi mdi-sword"})]),(0,r._)("div",Gr,[Qr,(0,r._)("p",{class:"qp-quests-item-description",textContent:(0,n.zw)("Éliminer les créatures qui ont envahi la région et détruisent les récoltes.")},null,8,Xr)]),(0,r._)("div",en,[(0,r.Wm)(a,{percentage:50,"stroke-width":4,"show-text":!1})])])]),(0,r.Wm)(o,{size:"small"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("SeeAllQuests"))},null,8,tn)])),_:1})])),_:1})}}};const an=(0,W.Z)(ln,[["__scopeId","data-v-8b3271d8"]]);var rn=an;const nn={class:"qp-forum-writing-newchapter"},on={class:"qp-forum-writing-newchapter-form"},sn=["innerHTML"],un=["textContent"],pn=["textContent"];var dn={__name:"qpWritingChapter",props:{world:{type:Object,default:()=>{}},territory:{type:Object,default:()=>{}},sector:{type:Object,default:()=>{}}},setup(e){const t=e,{t:l}=Me.global,a=(0,$e.tv)(),u=(0,s.oR)(),i=(0,r.Fl)((()=>u.getters.app)),p=(0,r.Fl)((()=>u.getters.rat)),d=(0,r.Fl)((()=>u.getters.heros));(0,r.bv)((()=>{m()}));const c=(0,o.iH)([]),m=()=>{c.value=[];for(const e of d.value)e.world.id==t.world.id&&c.value.push(e)},g=(0,o.iH)(null),w=(0,o.iH)(!1),_=(0,o.iH)(),v=(0,o.qj)({title:"",character:null,text:""}),h=(0,o.qj)({title:[{required:!0,message:l("Thisfieldisrequired"),trigger:"blur"}],character:[{required:!0,message:l("Thisfieldisrequired"),trigger:"change"}],text:[{required:!0,message:l("Thisfieldisrequired"),trigger:"blur"}]}),f=async()=>{g.value=null,w.value=!0,await _.value.validate(((e,t)=>{if(e)y();else{for(let[e,a]of Object.entries(t)){let t=l(`error${e}`);for(let e of a)g.value=`${t} : ${e.message}`}w.value=!1}}))},y=async()=>{g.value=null,w.value=!0;try{let e=new FormData;e.append("title",v.title),e.append("author",v.character),e.append("territory",t.territory.id),t.sector&&e.append("sector",t.sector.id);let a=await fetch(`${As}/worlds/territories/${t.territory.id}/chapters/create/`,{method:"POST",headers:{Authorization:p.value},body:e}),r=await a.json();if(201===a.status)C(r.id);else for(let[t,n]of Object.entries(r)){let e=l(`error${t}`);for(let t of n)g.value=`${e} : ${t}`}}catch(e){console.log(e),g.value=l("AnErrorOccurred")}w.value=!1},C=async e=>{g.value=null,w.value=!0;try{let t=new FormData;t.append("chapter",e),t.append("author",v.character),t.append("text",v.text);let r=await fetch(`${As}/worlds/chapters/${e}/messages/create/`,{method:"POST",headers:{Authorization:p.value},body:t}),n=await r.json();if(201===r.status)a.push(n.route);else for(let[e,a]of Object.entries(n)){let t=l(`error${e}`);for(let e of a)g.value=`${t} : ${e}`}}catch{g.value=l("AnErrorOccurred")}w.value=!1};return(e,t)=>{const l=(0,r.up)("el-input"),a=(0,r.up)("el-form-item"),s=(0,r.up)("el-option"),u=(0,r.up)("el-select"),p=(0,r.up)("el-form"),d=(0,r.up)("el-col"),m=(0,r.up)("el-alert"),y=(0,r.up)("el-button"),C=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("section",nn,[(0,r.Wm)(Ia,{title:e.$t("Writing"),description:e.$t("NewChapter")},null,8,["title","description"]),(0,r._)("section",on,[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[(0,r.Wm)(C,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{style:(0,n.j5)((0,o.SU)(i).win.w<1200?"":"padding-right:180px")},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{ref_key:"formNewChapterRef",ref:_,model:v,"label-position":(0,o.SU)(i).win.w<1200?"top":"right",rules:h,"label-width":"180px","status-icon":""},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{label:e.$t("Title"),prop:"title"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modelValue:v.title,"onUpdate:modelValue":t[0]||(t[0]=e=>v.title=e),type:"text",placeholder:e.$t("NewChapterTitle")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,r.Wm)(a,{label:e.$t("Character"),prop:"character"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:v.character,"onUpdate:modelValue":t[1]||(t[1]=e=>v.character=e),placeholder:e.$t("ChooseACharacter")},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.value,((e,t)=>((0,r.wg)(),(0,r.j4)(s,{key:`character-${t}`,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,r.Wm)(a,{label:e.$t("Text"),prop:"text"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modelValue:v.text,"onUpdate:modelValue":t[2]||(t[2]=e=>v.text=e),type:"textarea",rows:12,placeholder:e.$t("YourMessage")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model","label-position","rules"])])),_:1},8,["style"]),g.value?((0,r.wg)(),(0,r.j4)(d,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"error","show-icon":""},{default:(0,r.w5)((()=>[(0,r._)("div",{innerHTML:g.value},null,8,sn)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y,{disabled:w.value,onClick:t[3]||(t[3]=t=>e.$emit("close"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Cancel"))},null,8,un)])),_:1},8,["disabled"]),(0,r.Wm)(y,{loading:w.value,type:"primary",onClick:t[4]||(t[4]=e=>f())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Send"))},null,8,pn)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])])}}};const cn=(0,W.Z)(dn,[["__scopeId","data-v-ff7037f0"]]);var mn=cn;const gn=["id"],wn={class:"qp-forum-sector-inner"},_n={class:"qp-forum-header"},vn=["textContent"],hn=["textContent"],fn=["textContent"],yn=["textContent"],Cn=["textContent"],xn=["textContent"];var bn={__name:"qpSectorList",props:{world:{type:Object,default:()=>{}},territory:{type:Object,default:()=>{}},sector:{type:Object,default:()=>{}}},setup(e){const t=e,l=(0,$e.yj)(),a=(0,$e.tv)(),s=()=>{a.push({name:"WorldForumSector",params:{slug:l.params.slug,zone_pk:l.params.zone_pk,zone_slug:l.params.zone_slug,territory_pk:l.params.territory_pk,territory_slug:l.params.territory_slug,sector_pk:t.sector.id,sector_slug:Ga(t.sector.name)}})};return(e,l)=>{const a=(0,r.up)("el-col"),u=(0,r.up)("el-row"),i=(0,r.up)("el-popover");(0,r.up)("el-avatar"),(0,r.up)("el-icon");return t.sector?((0,r.wg)(),(0,r.iD)("article",{key:0,id:`t${t.sector.id}`,class:"qp-forum-sector",style:(0,n.j5)(`flex-basis:${t.sector.flexbasis};`)},[(0,r._)("div",wn,[(0,r._)("header",_n,[(0,r.Wm)(i,{"show-after":1e3,"popper-class":"qp-forum-header-popper"},{reference:(0,r.w5)((()=>[(0,r._)("h2",{class:"qp-forum-header-title",onClick:l[0]||(l[0]=e=>s()),style:(0,n.j5)(t.sector.colour?`color:${t.sector.colour};`:"")},[(0,r._)("span",{textContent:(0,n.zw)(t.sector.name)},null,8,vn)],4)])),default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[t.sector.description?((0,r.wg)(),(0,r.j4)(a,{key:0,span:24},{default:(0,r.w5)((()=>[(0,r._)("p",{class:"qp-forum-popheader-description",textContent:(0,n.zw)(t.sector.description)},null,8,hn)])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(a,{span:12,align:"center"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)((0,o.SU)(Ja)(t.sector.count_chapters))},null,8,fn),(0,r._)("div",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Chapter",t.sector.count_chapters))},null,8,yn)])])),_:1}),(0,r.Wm)(a,{span:12,align:"center"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)((0,o.SU)(Ja)(t.sector.count_messages))},null,8,Cn),(0,r._)("div",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Message",t.sector.count_messages))},null,8,xn)])])),_:1})])),_:1})])),_:1}),(0,r.kq)("",!0)])])],12,gn)):(0,r.kq)("",!0)}}};const qn=bn;var kn=qn;const $n=["id"],Wn={class:"qp-forum-chapter-inner"},zn={class:"qp-forum-header"},Sn={class:"qp-forum-header-profile"},jn={class:"qp-forum-header-profile-banner"},Tn=(0,r._)("div",{class:"image-slot"},null,-1),Dn={class:"qp-forum-header-profile-avatar"},An=["textContent"],Hn=["textContent"],En={class:"qp-forum-header-date"},Un=["textContent"],On={class:"qp-forum-header-infos"},Fn={class:"qp-forum-header-infos-lastmessagedate"},Rn=["textContent"],Vn=["textContent"],Ln={class:"qp-forum-header-infos-countmessages"},Mn=["textContent"];var Pn={__name:"qpChapterList",props:{world:{type:Object,default:()=>{}},territory:{type:Object,default:()=>{}},chapter:{type:Object,default:()=>{}}},setup(e){const t=e,l=(0,$e.tv)(),a=()=>{l.push({name:"WorldForumTerritoryChapter",params:{slug:t.world.slug,zone_pk:t.territory.zone.id,zone_slug:Ga(t.territory.zone.name),territory_pk:t.territory.id,territory_slug:Ga(t.territory.name),chapter_pk:t.chapter.id,chapter_slug:Ga(t.chapter.title)}})};return(e,l)=>{const s=(0,r.up)("el-image"),u=(0,r.up)("el-avatar"),i=(0,r.up)("el-icon");return t.chapter?((0,r.wg)(),(0,r.iD)("article",{key:0,id:`c${t.chapter.id}`,class:"qp-forum-chapter"},[(0,r._)("div",Wn,[(0,r._)("header",zn,[(0,r._)("div",Sn,[(0,r._)("div",jn,[t.chapter.author?.avatar?((0,r.wg)(),(0,r.j4)(s,{key:0,src:t.chapter.author.avatar,fit:"cover"},{error:(0,r.w5)((()=>[Tn])),_:1},8,["src"])):(0,r.kq)("",!0)]),(0,r._)("div",Dn,[(0,r.Wm)(u,{src:t.chapter.last_message?.author?.avatar},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(t.chapter.last_message?.author?.initials)},null,8,An)])),_:1},8,["src"])])]),(0,r._)("h2",{class:"qp-forum-header-title",onClick:l[0]||(l[0]=e=>a())},[(0,r._)("span",{textContent:(0,n.zw)(t.chapter.title)},null,8,Hn)]),(0,r._)("p",En,[t.chapter.date?((0,r.wg)(),(0,r.iD)("span",{key:0,textContent:(0,n.zw)(t.chapter.date)},null,8,Un)):(0,r.kq)("",!0)]),(0,r._)("ul",On,[(0,r._)("li",Fn,[(0,r.Wm)(i,{class:"mdi mdi-clock-outline"}),t.chapter.last_message?((0,r.wg)(),(0,r.iD)("span",{key:0,textContent:(0,n.zw)((0,o.SU)(Ka)(t.chapter.last_message.created_at))},null,8,Rn)):((0,r.wg)(),(0,r.iD)("span",{key:1,textContent:(0,n.zw)(e.$t("Never"))},null,8,Vn))]),(0,r._)("li",Ln,[(0,r.Wm)(i,{class:"mdi mdi-message-text-outline"}),(0,r._)("span",{textContent:(0,n.zw)(t.chapter.count_messages)},null,8,Mn)])])])])],8,$n)):(0,r.kq)("",!0)}}};const Yn=Pn;var Nn=Yn;const Bn={class:"qp-vue qp-forum qp-singleton-territory"},Zn={key:0},In={class:"qp-container"},Kn={class:"qp-forum-territories"},Jn=["id"],Gn={class:"qp-forum-territory-inner"},Qn={class:"qp-forum-sectors"},Xn={key:0},eo=(0,r.Uk)(" (en construction) "),to=["textContent"],lo={class:"qp-forum-chapters"};var ao={__name:"TerritoryView",props:{world:{type:Object,default:()=>{}}},setup(e){const t=e,{t:l}=Me.global,a=(0,$e.yj)(),u=(0,$e.tv)(),i=(0,s.oR)(),p=(0,r.Fl)((()=>i.getters.rat)),d=(0,o.iH)(!0),c=(0,o.iH)(null),m=(0,r.Fl)((()=>{let e=[{name:g.value.forum.name,go:`/w/${a.params.slug}/forum`}];return g.value&&e.push({name:g.value.zone.name,go:`/w/${a.params.slug}/forum/z${a.params.zone_pk}-${a.params.zone_slug}`}),e}));(0,r.bv)((()=>{w()}));const g=(0,o.iH)(null),w=async()=>{d.value=!0,c.value=null;try{let e=await fetch(`${As}/worlds/territories/${a.params.territory_pk}/`,{method:"GET",headers:{Authorization:p.value}}),t=await e.json();if(200!==e.status)throw e;g.value=t}catch(e){403===e.status?c.value=l("YouDoesntHaveAccessToThisTerritory"):404===e.status?c.value=l("ThisTerritoryDoesntExistAnymore"):c.value=l("AnErrorOccurred")}d.value=!1},_=(0,r.Fl)((()=>{let e=1;return"page"in a.query&&Number(a.query.page)>0&&(e=Number(a.query.page)),e})),v=e=>{u.push({name:"WorldForumTerritory",params:{slug:a.params.slug,zone_pk:a.params.zone_pk,zone_slug:a.params.zone_slug,territory_pk:g.value.id,territory_slug:Ga(g.value.name)},query:{page:e}})},h=(0,o.iH)(!1),f=()=>{h.value=!0},y=()=>{h.value=!1};return(l,a)=>{const s=(0,r.up)("el-col"),u=(0,r.up)("el-pagination"),i=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",Bn,[d.value||c.value||!g.value?((0,r.wg)(),(0,r.j4)(fa,{key:1,isloading:d.value,hasError:c.value},null,8,["isloading","hasError"])):((0,r.wg)(),(0,r.iD)("div",Zn,[(0,r._)("div",In,[(0,r._)("section",Kn,[(0,r._)("article",{id:`t${g.value.id}`,class:"qp-forum-territory"},[(0,r._)("div",Gn,[(0,r.Wm)(Ia,{title:g.value.name,description:g.value.description,crumbs:(0,o.SU)(m)},null,8,["title","description","crumbs"]),h.value?((0,r.wg)(),(0,r.j4)(mn,{key:1,world:e.world,territory:g.value,onClose:a[1]||(a[1]=e=>y())},null,8,["world","territory"])):((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("section",Qn,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.value.sectors,((e,l)=>((0,r.wg)(),(0,r.j4)(kn,{key:`sector-${l}`,world:t.world,territory:g.value,sector:e},null,8,["world","territory","sector"])))),128)),g.value.sectors?.length?((0,r.wg)(),(0,r.iD)("hr",Xn)):(0,r.kq)("",!0)]),(0,r._)("section",null,[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,{span:24,md:12,lg:17},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[eo])),_:1})])),_:1}),(0,r.Wm)(s,{span:24,md:12,lg:7},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,{clickable:"",bgcolor:"primary",onClick:a[0]||(a[0]=e=>f())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(l.$t("NewChapter"))},null,8,to)])),_:1})])),_:1}),(0,r.Wm)(s,{span:24,lg:17,style:{padding:"0"}},{default:(0,r.w5)((()=>[(0,r._)("section",lo,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.value.chapters,((e,l)=>((0,r.wg)(),(0,r.j4)(Nn,{key:`chapter-${l}`,world:t.world,territory:g.value,chapter:e},null,8,["world","territory","chapter"])))),128)),g.value.chapters.length?((0,r.wg)(),(0,r.j4)(u,{key:0,background:"","hide-on-single-page":"",layout:"prev, pager, next",total:g.value.count_chapters,"page-size":g.value.perpage_chapters,"current-page":(0,o.SU)(_),"onUpdate:currentPage":v},null,8,["total","page-size","current-page"])):(0,r.kq)("",!0)])])),_:1}),(0,r.Wm)(s,{span:24,lg:7},{default:(0,r.w5)((()=>[(0,r.Wm)(rn)])),_:1})])),_:1})])],64))])],8,Jn)])])]))])}}};const ro=ao;var no=ro;const oo={class:"qp-vue qp-forum qp-singleton-sector"},so={key:0},uo={class:"qp-container"},io={class:"qp-forum-territories"},po=["id"],co={class:"qp-forum-sector-inner"},mo={key:0},go=(0,r.Uk)(" (en construction) "),wo=["textContent"],_o={class:"qp-forum-chapters"};var vo={__name:"SectorView",props:{world:{type:Object,default:()=>{}}},setup(e){const t=e,{t:l}=Me.global,a=(0,$e.yj)(),u=(0,$e.tv)(),i=(0,s.oR)(),p=(0,r.Fl)((()=>i.getters.rat)),d=(0,o.iH)(!0),c=(0,o.iH)(null),m=(0,r.Fl)((()=>{let e=[{name:g.value.forum.name,go:`/w/${a.params.slug}/forum`}];return g.value?.zone&&e.push({name:g.value.zone.name,go:`/w/${a.params.slug}/forum/z${a.params.zone_pk}-${a.params.zone_slug}`}),g.value?.territory&&e.push({name:g.value.territory.name,go:`/w/${a.params.slug}/forum/z${a.params.zone_pk}-${a.params.zone_slug}/t${a.params.territory_pk}-${a.params.territory_slug}`}),e}));(0,r.bv)((()=>{w()}));const g=(0,o.iH)(null),w=async()=>{d.value=!0,c.value=null;try{let e=await fetch(`${As}/worlds/sectors/${a.params.sector_pk}/`,{method:"GET",headers:{Authorization:p.value}}),t=await e.json();if(200!==e.status)throw e;g.value=t}catch(e){403===e.status?c.value=l("YouDoesntHaveAccessToThisSector"):404===e.status?c.value=l("ThisSectorDoesntExistAnymore"):c.value=l("AnErrorOccurred")}d.value=!1},_=(0,r.Fl)((()=>{let e=1;return"page"in a.query&&Number(a.query.page)>0&&(e=Number(a.query.page)),e})),v=e=>{u.push({name:"WorldForumSector",params:{slug:a.params.slug,zone_pk:a.params.zone_pk,zone_slug:a.params.zone_slug,territory_pk:a.params.territory_pk,territory_slug:a.params.territory_slug,sector_pk:g.value.id,sector_slug:Ga(g.value.name)},query:{page:e}})},h=(0,o.iH)(!1),f=()=>{h.value=!0},y=()=>{h.value=!1};return(e,l)=>{const a=(0,r.up)("el-col"),s=(0,r.up)("el-pagination"),u=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",oo,[d.value||c.value||!g.value?((0,r.wg)(),(0,r.j4)(fa,{key:1,isloading:d.value,hasError:c.value},null,8,["isloading","hasError"])):((0,r.wg)(),(0,r.iD)("div",so,[(0,r._)("div",uo,[(0,r._)("section",io,[(0,r._)("article",{id:`s${g.value.id}`,class:"qp-forum-sector"},[(0,r._)("div",co,[(0,r.Wm)(Ia,{title:g.value.name,description:g.value.description,crumbs:(0,o.SU)(m)},null,8,["title","description","crumbs"]),h.value?((0,r.wg)(),(0,r.j4)(mn,{key:1,type:"chapter",territory:t.territory,sector:g.value,onClose:l[1]||(l[1]=e=>y())},null,8,["territory","sector"])):((0,r.wg)(),(0,r.iD)("section",mo,[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(a,{span:24,md:12,lg:17},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[go])),_:1})])),_:1}),(0,r.Wm)(a,{span:24,md:12,lg:7},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,{clickable:"",bgcolor:"primary",onClick:l[0]||(l[0]=e=>f())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("NewChapter"))},null,8,wo)])),_:1})])),_:1}),(0,r.Wm)(a,{span:24,lg:17,style:{padding:"0"}},{default:(0,r.w5)((()=>[(0,r._)("section",_o,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.value.chapters,((e,l)=>((0,r.wg)(),(0,r.j4)(Nn,{key:`chapter-${l}`,world:t.world,territory:g.value.territory,sector:g.value,chapter:e},null,8,["world","territory","sector","chapter"])))),128)),g.value.chapters.length?((0,r.wg)(),(0,r.j4)(s,{key:0,background:"","hide-on-single-page":"",layout:"prev, pager, next",total:g.value.count_chapters,"page-size":g.value.perpage_chapters,"current-page":(0,o.SU)(_),"onUpdate:currentPage":v},null,8,["total","page-size","current-page"])):(0,r.kq)("",!0)])])),_:1}),(0,r.Wm)(a,{span:24,lg:7},{default:(0,r.w5)((()=>[(0,r.Wm)(rn)])),_:1})])),_:1})]))])],8,po)])])]))])}}};const ho=vo;var fo=ho;const yo={class:"qp-forum-footer"},Co={class:"qp-forum-footer-buttons"},xo=["textContent"],bo=["textContent"];var qo={__name:"qpFooter",props:{crumbs:{type:Object,default:()=>{}},showBtnChapter:{type:Boolean,default:!1},showBtnReply:{type:Boolean,default:!1}},setup(e){const t=e;return(l,a)=>{const o=(0,r.up)("el-col"),s=(0,r.up)("el-button"),u=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("footer",yo,[(0,r.Wm)(u,{align:"middle"},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{span:24,sm:12},{default:(0,r.w5)((()=>[t.crumbs?.length?((0,r.wg)(),(0,r.j4)(Ua,{key:0,crumbs:t.crumbs},null,8,["crumbs"])):(0,r.kq)("",!0)])),_:1}),(0,r.Wm)(o,{span:24,sm:12},{default:(0,r.w5)((()=>[(0,r._)("div",Co,[e.showBtnChapter?((0,r.wg)(),(0,r.j4)(s,{key:0,onClick:a[0]||(a[0]=e=>l.$emit("openNewChapter"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(l.$t("NewChapter"))},null,8,xo)])),_:1})):(0,r.kq)("",!0),e.showBtnReply?((0,r.wg)(),(0,r.j4)(s,{key:1,type:"primary",onClick:a[1]||(a[1]=e=>l.$emit("openNewReply"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(l.$t("ToReply"))},null,8,bo)])),_:1})):(0,r.kq)("",!0)])])),_:1})])),_:1})])}}};const ko=(0,W.Z)(qo,[["__scopeId","data-v-6adf28f5"]]);var $o=ko,Wo=l(5499),zo=l(327);const So=e=>{let t=e;return t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replaceAll("\n","<br />").replaceAll("[g]",'<span style="font-weight:bold;">').replaceAll("[/g]","</span>").replaceAll("[i]",'<span style="font-style:italic;">').replaceAll("[/i]","</span>").replaceAll("[s]",'<span style="text-decoration:underline;">').replaceAll("[/s]","</span>").replaceAll("[b]",'<span style="text-decoration:line-through;">').replaceAll("[/b]","</span>").replaceAll("[gauche]",'<div style="text-align:left;">').replaceAll("[/gauche]","</div>").replaceAll("[centre]",'<div style="text-align:center;">').replaceAll("[/centre]","</div>").replaceAll("[droite]",'<div style="text-align:right;">').replaceAll("[/droite]","</div>").replace(/\[c=#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})\]/g,'<span style="color:#$1;">').replace(/\[c=([a-zA-Z0-9_]+)\]/g,'<span style="color:var(--c-$1);">').replaceAll("[/c]","</span>").replace(/\[p=(Indie Flower|Oswald|Quicksand|Roboto Condensed)\]/g,"<span style=\"font-family:'$1';\">").replaceAll("[/p]","</span>").replace(/\[url=([^<>[\]]+)\]/g,'<a href="$1">').replaceAll("[/url]","</a>").replace(/\[urlo=([^<>[\]]+)\]/g,'<a href="$1" target="_blank">').replaceAll("[/urlo]","</a>").replace(/\[img=([^<>[\]]+)\]/g,'<img src="$1" alt="" />').replace(/\[ico=([a-z- ]+)\]/g,'<i class="mdi $1"></i>'),t},jo={class:"qp-forum-writing-editmessage"},To={class:"qp-forum-writing-editmessage-form"},Do=["innerHTML"],Ao=["textContent"],Ho=["textContent"];var Eo={__name:"qpWritingEdit",props:{message:{type:Object,default:()=>{}}},setup(e){const t=e,{t:l}=Me.global,a=(0,$e.tv)(),u=(0,s.oR)(),i=(0,r.Fl)((()=>u.getters.app)),p=(0,r.Fl)((()=>u.getters.rat));(0,r.bv)((()=>{d()}));const d=()=>{w.text=t.message.text},c=(0,o.iH)(null),m=(0,o.iH)(!1),g=(0,o.iH)(),w=(0,o.qj)({text:""}),_=(0,o.qj)({text:[{required:!0,message:l("Thisfieldisrequired"),trigger:"blur"}]}),v=async()=>{c.value=null,m.value=!0,await g.value.validate(((e,t)=>{if(e)h();else{for(let[e,a]of Object.entries(t)){let t=l(`error${e}`);for(let e of a)c.value=`${t} : ${e.message}`}m.value=!1}}))},h=async()=>{c.value=null,m.value=!0;try{let e=new FormData;e.append("text",w.text);let r=await fetch(`${As}/worlds/messages/${t.message.id}/edit/`,{method:"PATCH",headers:{Authorization:p.value},body:e}),n=await r.json();if(200===r.status)a.go(n.route);else{for(let[e,t]of Object.entries(n)){let a=l(`error${e}`);for(let e of t)c.value=`${a} : ${e}`}m.value=!1}}catch{c.value=l("AnErrorOccurred"),m.value=!1}};return(e,t)=>{const l=(0,r.up)("el-input"),a=(0,r.up)("el-form-item"),s=(0,r.up)("el-form"),u=(0,r.up)("el-col"),p=(0,r.up)("el-alert"),d=(0,r.up)("el-button"),h=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("section",jo,[(0,r._)("section",To,[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u,{style:(0,n.j5)((0,o.SU)(i).win.w<1200?"":"padding-right:180px")},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{ref_key:"formEditMessageRef",ref:g,model:w,"label-position":(0,o.SU)(i).win.w<1200?"top":"right",rules:_,"label-width":"180px","status-icon":""},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{label:e.$t("Text"),prop:"text"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modelValue:w.text,"onUpdate:modelValue":t[0]||(t[0]=e=>w.text=e),type:"textarea",rows:12,placeholder:e.$t("YourMessage")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model","label-position","rules"])])),_:1},8,["style"]),c.value?((0,r.wg)(),(0,r.j4)(u,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{type:"error","show-icon":""},{default:(0,r.w5)((()=>[(0,r._)("div",{innerHTML:c.value},null,8,Do)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{disabled:m.value,onClick:t[1]||(t[1]=t=>e.$emit("close"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Cancel"))},null,8,Ao)])),_:1},8,["disabled"]),(0,r.Wm)(d,{loading:m.value,type:"primary",onClick:t[2]||(t[2]=e=>v())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Send"))},null,8,Ho)])),_:1},8,["loading"])])),_:1})])),_:1})])])}}};const Uo=(0,W.Z)(Eo,[["__scopeId","data-v-0c0a4a34"]]);var Oo=Uo;const Fo=e=>((0,r.dD)("data-v-497fab14"),e=e(),(0,r.Cn)(),e),Ro=["id"],Vo={class:"qp-forum-message-inner"},Lo={class:"qp-forum-header"},Mo={class:"qp-forum-header-profile"},Po={class:"qp-forum-header-profile-banner"},Yo=Fo((()=>(0,r._)("div",{class:"image-slot"},null,-1))),No={class:"qp-forum-header-profile-avatar"},Bo=["textContent"],Zo={class:"qp-forum-header-profile-infos"},Io={class:"qp-forum-header-profile-name"},Ko=["textContent"],Jo={class:"qp-forum-header-profile-date"},Go=["textContent"],Qo={key:1,class:"qp-forum-message-text"},Xo={class:"qp-forum-message-text-inner"},es=["innerHTML"],ts={class:"qp-forum-message-footer"},ls={key:0};var as={__name:"qpMessage",props:{world:{type:Object,default:()=>{}},chapter:{type:Object,default:()=>{}},message:{type:Object,default:()=>{}}},setup(e){const t=e,{t:l}=Me.global,a=(0,$e.yj)(),u=(0,$e.tv)(),i=(0,s.oR)(),p=(0,r.Fl)((()=>i.getters.rat)),d=(0,r.Fl)((()=>i.getters.player)),c=(0,o.iH)(!1),m=()=>{c.value=!0,Wo.T.confirm(l("Areyousureyouwanttodeletethismessage"),l("DeleteMessage"),{confirmButtonText:l("Delete"),cancelButtonText:l("Cancel"),type:"warning"}).then((()=>{g()})).catch((()=>{c.value=!1}))},g=async()=>{c.value=!0;try{let e=new FormData;e.append("id",t.message.id);let r=await fetch(`${As}/worlds/messages/${t.message.id}/delete/`,{method:"DELETE",headers:{Authorization:p.value},body:e});204===r.status?(u.go(a.fullPath),(0,zo.bM)({title:l("Success"),message:l("MessageDeletedSuccessfully"),type:"success"})):((0,zo.bM)({title:l("Error"),message:l("AnErrorOccurred"),type:"error"}),c.value=!1)}catch(e){(0,zo.bM)({title:l("Error"),message:`${l("AnErrorOccurred")} : ${e}`,type:"error"}),c.value=!1}},w=(0,o.iH)(!1),_=()=>{w.value=!0},v=()=>{w.value=!1};return(e,l)=>{const a=(0,r.up)("el-image"),s=(0,r.up)("el-avatar"),u=(0,r.up)("el-icon"),i=(0,r.up)("el-button"),g=(0,r.up)("el-tooltip"),h=(0,r.Q2)("loading");return t.message?((0,r.wg)(),(0,r.iD)("article",{key:0,id:`m${t.message.id}`,class:"qp-forum-message"},[(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",Vo,[(0,r._)("header",Lo,[(0,r._)("div",Mo,[(0,r._)("div",Po,[t.message.author.avatar?((0,r.wg)(),(0,r.j4)(a,{key:0,src:t.message.author.avatar,fit:"cover"},{error:(0,r.w5)((()=>[Yo])),_:1},8,["src"])):(0,r.kq)("",!0)]),(0,r._)("div",No,[(0,r.Wm)(s,{src:t.message.author.avatar},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(t.message.author.initials)},null,8,Bo)])),_:1},8,["src"])]),(0,r._)("div",Zo,[(0,r._)("div",Io,[(0,r._)("span",{textContent:(0,n.zw)(t.message.author.name)},null,8,Ko)]),(0,r._)("div",Jo,[(0,r._)("span",{textContent:(0,n.zw)((0,o.SU)(Ka)(t.message.created_at))},null,8,Go)])])])]),w.value?((0,r.wg)(),(0,r.j4)(Oo,{key:0,message:t.message,onClose:l[0]||(l[0]=e=>v())},null,8,["message"])):((0,r.wg)(),(0,r.iD)("div",Qo,[(0,r._)("div",Xo,[(0,r._)("div",{innerHTML:(0,o.SU)(So)(t.message.text)},null,8,es)])])),(0,r._)("footer",ts,[(0,o.SU)(p)&&(0,o.SU)(d)?.id==t.message.author?.player?.id&&!w.value?((0,r.wg)(),(0,r.iD)("div",ls,[(0,r.Wm)(g,{content:e.$t("EditMessage"),placement:"bottom-end"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{size:"small",onClick:l[1]||(l[1]=e=>_())},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"mdi mdi-pencil"})])),_:1})])),_:1},8,["content"]),(0,r.Wm)(g,{content:e.$t("DeleteMessage"),placement:"bottom-end"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{size:"small",onClick:l[2]||(l[2]=e=>m())},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"mdi mdi-close"})])),_:1})])),_:1},8,["content"])])):(0,r.kq)("",!0)])])),[[h,c.value]])],8,Ro)):(0,r.kq)("",!0)}}};const rs=(0,W.Z)(as,[["__scopeId","data-v-497fab14"]]);var ns=rs;const os={class:"qp-forum-writing-newchapter"},ss={class:"qp-forum-writing-newchapter-form"},us=["innerHTML"],is=["textContent"],ps=["textContent"];var ds={__name:"qpWritingReply",props:{world:{type:Object,default:()=>{}},chapter:{type:Object,default:()=>{}}},setup(e){const t=e,{t:l}=Me.global,a=(0,$e.tv)(),u=(0,s.oR)(),i=(0,r.Fl)((()=>u.getters.app)),p=(0,r.Fl)((()=>u.getters.rat)),d=(0,r.Fl)((()=>u.getters.heros));(0,r.bv)((()=>{m()}));const c=(0,o.iH)([]),m=()=>{c.value=[];for(const e of d.value)e.world.id==t.world.id&&c.value.push(e)},g=(0,o.iH)(null),w=(0,o.iH)(!1),_=(0,o.iH)(),v=(0,o.qj)({character:null,text:""}),h=(0,o.qj)({character:[{required:!0,message:l("Thisfieldisrequired"),trigger:"change"}],text:[{required:!0,message:l("Thisfieldisrequired"),trigger:"blur"}]}),f=async()=>{g.value=null,w.value=!0,await _.value.validate(((e,t)=>{if(e)y();else{for(let[e,a]of Object.entries(t)){let t=l(`error${e}`);for(let e of a)g.value=`${t} : ${e.message}`}w.value=!1}}))},y=async()=>{g.value=null,w.value=!0;try{let e=new FormData;e.append("chapter",t.chapter.id),e.append("author",v.character),e.append("text",v.text);let r=await fetch(`${As}/worlds/chapters/${t.chapter.id}/messages/create/`,{method:"POST",headers:{Authorization:p.value},body:e}),n=await r.json();if(201===r.status)a.push(n.route);else for(let[t,a]of Object.entries(n)){let e=l(`error${t}`);for(let t of a)g.value=`${e} : ${t}`}}catch{g.value=l("AnErrorOccurred")}w.value=!1};return(e,t)=>{const l=(0,r.up)("el-option"),a=(0,r.up)("el-select"),s=(0,r.up)("el-form-item"),u=(0,r.up)("el-input"),p=(0,r.up)("el-form"),d=(0,r.up)("el-col"),m=(0,r.up)("el-alert"),y=(0,r.up)("el-button"),C=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("section",os,[(0,r.Wm)(Ia,{title:e.$t("Writing"),description:e.$t("ToReply")},null,8,["title","description"]),(0,r._)("section",ss,[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[(0,r.Wm)(C,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{style:(0,n.j5)((0,o.SU)(i).win.w<1200?"":"padding-right:180px")},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{ref_key:"formNewReplyRef",ref:_,model:v,"label-position":(0,o.SU)(i).win.w<1200?"top":"right",rules:h,"label-width":"180px","status-icon":""},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{label:e.$t("Character"),prop:"character"},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{modelValue:v.character,"onUpdate:modelValue":t[0]||(t[0]=e=>v.character=e),placeholder:e.$t("ChooseACharacter")},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.value,((e,t)=>((0,r.wg)(),(0,r.j4)(l,{key:`character-${t}`,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,r.Wm)(s,{label:e.$t("Text"),prop:"text"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:v.text,"onUpdate:modelValue":t[1]||(t[1]=e=>v.text=e),type:"textarea",rows:12,placeholder:e.$t("YourReply")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model","label-position","rules"])])),_:1},8,["style"]),g.value?((0,r.wg)(),(0,r.j4)(d,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"error","show-icon":""},{default:(0,r.w5)((()=>[(0,r._)("div",{innerHTML:g.value},null,8,us)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y,{disabled:w.value,onClick:t[2]||(t[2]=t=>e.$emit("close"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Cancel"))},null,8,is)])),_:1},8,["disabled"]),(0,r.Wm)(y,{loading:w.value,type:"primary",onClick:t[3]||(t[3]=e=>f())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Send"))},null,8,ps)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])])}}};const cs=(0,W.Z)(ds,[["__scopeId","data-v-77c5f4d2"]]);var ms=cs;const gs={class:"qp-vue qp-forum qp-singleton-zone"},ws={key:0},_s={class:"qp-container"},vs={key:0,class:"qp-forum-chapters"},hs=["id"],fs={class:"qp-forum-chapter-inner"},ys={key:0,class:"qp-forum-messages"},Cs={key:1,id:"reply",class:"qp-forum-writing"};var xs={__name:"ChapterView",props:{world:{type:Object,default:()=>{}}},setup(e){const t=e,{t:l}=Me.global,a=(0,$e.yj)(),n=(0,$e.tv)(),u=(0,s.oR)(),i=(0,r.Fl)((()=>u.getters.rat)),p=(0,o.iH)(!0),d=(0,o.iH)(null),c=(0,r.Fl)((()=>{let e=[{name:m.value.forum.name,go:`/w/${a.params.slug}/forum`}];return m.value&&e.push({name:m.value.zone.name,go:`/w/${a.params.slug}/forum/z${a.params.zone_pk}-${a.params.zone_slug}`}),m.value&&e.push({name:m.value.territory.name,go:`/w/${a.params.slug}/forum/z${a.params.zone_pk}-${a.params.zone_slug}/t${a.params.territory_pk}-${a.params.territory_slug}`}),m.value?.sector&&e.push({name:m.value.sector.name,go:`/w/${a.params.slug}/forum/z${a.params.zone_pk}-${a.params.zone_slug}/t${a.params.territory_pk}-${a.params.territory_slug}/s${a.params.sector_pk}-${a.params.sector_slug}`}),e}));(0,r.bv)((()=>{w()}));const m=(0,o.iH)(null),g=(0,o.iH)(null),w=async()=>{p.value=!0,d.value=null;try{let e=await fetch(`${As}/worlds/chapters/${a.params.chapter_pk}/`,{method:"GET",headers:{Authorization:i.value}}),t=await e.json();if(200!==e.status)throw e;m.value=t,_()}catch(e){403===e.status?d.value=l("YouDoesntHaveAccessToThisChapter"):404===e.status?d.value=l("ThisChapterDoesntExistAnymore"):d.value=l("AnErrorOccurred")}p.value=!1},_=async()=>{p.value=!0,d.value=null;try{let e=await fetch(`${As}/worlds/chapters/${a.params.chapter_pk}/messages/?page=${h.value}`,{method:"GET",headers:{Authorization:i.value}}),t=await e.json();if(200!==e.status)throw e;g.value=t,v()}catch(e){403===e.status?d.value=l("YouDoesntHaveAccessToThisChapter"):404===e.status?d.value=l("ThisPageDoesntExistAnymore"):d.value=l("AnErrorOccurred")}p.value=!1},v=()=>{setTimeout((()=>{if(a.hash&&(a.hash.startsWith("#c")||a.hash.startsWith("#m"))){const e=document.getElementById(a.hash.replace("#",""));e&&e.scrollIntoView({behavior:"smooth"})}}),200)},h=(0,r.Fl)((()=>{let e=1;return"page"in a.query&&Number(a.query.page)>0&&(e=Number(a.query.page)),e})),f=e=>{let t="WorldForumTerritoryChapter",l={name:t,params:{slug:a.params.slug,zone_pk:a.params.zone_pk,zone_slug:a.params.zone_slug,territory_pk:a.params.territory_pk,territory_slug:a.params.territory_slug,chapter_pk:a.params.chapter_pk,chapter_slug:a.params.chapter_slug},query:{page:e}};m.value?.sector&&(l.name="WorldForumSectorChapter",l.params["sector_pk"]=a.params.sector_pk,l.params["sector_slug"]=a.params.sector_slug),n.push(l)},y=(0,o.iH)(!1),C=()=>{y.value=!0,setTimeout((()=>{const e=document.getElementById("reply");e?.scrollIntoView()}),100)},x=()=>{y.value=!1};return(e,l)=>{const a=(0,r.up)("el-pagination"),n=(0,r.up)("el-icon"),s=(0,r.up)("el-button"),u=(0,r.up)("el-tooltip"),i=(0,r.up)("el-col"),w=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",gs,[p.value||d.value||!m.value?((0,r.wg)(),(0,r.j4)(fa,{key:1,isloading:p.value,hasError:d.value},null,8,["isloading","hasError"])):((0,r.wg)(),(0,r.iD)("div",ws,[(0,r._)("div",_s,[m.value?((0,r.wg)(),(0,r.iD)("section",vs,[(0,r._)("article",{id:`c${m.value.id}`,class:"qp-forum-chapter"},[(0,r._)("div",fs,[(0,r.Wm)(Ia,{"show-btn-reply":"",title:m.value.title,description:m.value.description,crumbs:(0,o.SU)(c),onOpenNewReply:l[0]||(l[0]=e=>C())},null,8,["title","description","crumbs"]),g.value?((0,r.wg)(),(0,r.iD)("section",ys,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.value.results,((e,l)=>((0,r.wg)(),(0,r.j4)(ns,{key:`message-${l}`,world:t.world,chapter:m.value,message:e},null,8,["world","chapter","message"])))),128))])):(0,r.kq)("",!0),(0,r.Wm)($o,{"show-btn-reply":"",crumbs:(0,o.SU)(c),onOpenNewReply:l[1]||(l[1]=e=>C())},null,8,["crumbs"]),g.value?.results.length?((0,r.wg)(),(0,r.j4)(a,{key:1,background:"","hide-on-single-page":"",layout:"prev, pager, next",total:g.value.count,"page-size":g.value.size,"current-page":(0,o.SU)(h),"onUpdate:currentPage":f},null,8,["total","page-size","current-page"])):(0,r.kq)("",!0)])],8,hs),(0,r._)("footer",null,[(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{span:24,md:12},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{content:e.$t("DeleteChapter"),placement:"bottom-start"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{size:"small",disabled:""},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{class:"mdi mdi-delete-forever"})])),_:1})])),_:1},8,["content"]),m.value.is_locked?((0,r.wg)(),(0,r.j4)(u,{key:0,content:e.$t("UnlockChapter"),placement:"bottom-start"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{size:"small",disabled:""},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{class:"mdi mdi-lock-open"})])),_:1})])),_:1},8,["content"])):((0,r.wg)(),(0,r.j4)(u,{key:1,content:e.$t("LockChapter"),placement:"bottom-start"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{size:"small",disabled:""},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{class:"mdi mdi-lock"})])),_:1})])),_:1},8,["content"]))])),_:1}),(0,r.Wm)(i,{span:24,md:12})])),_:1})])])):(0,r.kq)("",!0),y.value?((0,r.wg)(),(0,r.iD)("section",Cs,[(0,r.Wm)(ms,{world:t.world,chapter:m.value,onClose:l[2]||(l[2]=e=>x())},null,8,["world","chapter"])])):(0,r.kq)("",!0)])]))])}}};const bs=xs;var qs=bs;const ks=[{path:"/w/:slug",name:"World",component:ja,children:[{path:"forum",name:"WorldForum",component:Sr},{path:"forum/z:zone_pk(\\d+)-:zone_slug",name:"WorldForumZone",component:Rr},{path:"forum/z:zone_pk(\\d+)-:zone_slug/t:territory_pk(\\d+)-:territory_slug",name:"WorldForumTerritory",component:no},{path:"forum/z:zone_pk(\\d+)-:zone_slug/t:territory_pk(\\d+)-:territory_slug/c:chapter_pk(\\d+)-:chapter_slug",name:"WorldForumTerritoryChapter",component:qs},{path:"forum/z:zone_pk(\\d+)-:zone_slug/t:territory_pk(\\d+)-:territory_slug/s:sector_pk(\\d+)-:sector_slug",name:"WorldForumSector",component:fo},{path:"forum/z:zone_pk(\\d+)-:zone_slug/t:territory_pk(\\d+)-:territory_slug/s:sector_pk(\\d+)-:sector_slug/c:chapter_pk(\\d+)-:chapter_slug",name:"WorldForumSectorChapter",component:qs}]}],$s=[{path:"/",name:"Home",component:dt},{path:"/me/characters",name:"MeCharacters",component:Lt},{path:"/me/worlds",name:"MeWorlds",component:bl},{path:"/heros/:pk",name:"HeroDetail",component:Sl},{path:"/:catchAll(.*)",name:"Error",component:El}];$s.push(...da),$s.push(...ks);const Ws=(0,$e.p7)({history:(0,$e.PO)("/"),routes:$s});Ws.beforeEach((async(e,t,l)=>{"world_pk"in e.params||document.getElementById("qp-custom-style")&&document.getElementById("qp-custom-style").remove(),ot.dispatch("getPlayer"),await ot.restored,l()}));var zs=Ws,Ss=l(4417),js=l(4242);l(4415);const Ts=(0,a.ri)(Ue),Ds={name:"Cynorrhodonnismes",shortname:"Cynorrs"},As="https://mcpronovost.pythonanywhere.com/api";Ts.use(Me),Ts.use(ot),Ts.use(zs),Ts.use(Ss.Z,{locale:js.Z}),Ts.mount("#app")},4465:function(e,t,l){e.exports=l.p+"img/logo-square-trans.png"}},t={};function l(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,l),n.exports}l.m=e,function(){var e=[];l.O=function(t,a,r,n){if(!a){var o=1/0;for(p=0;p<e.length;p++){a=e[p][0],r=e[p][1],n=e[p][2];for(var s=!0,u=0;u<a.length;u++)(!1&n||o>=n)&&Object.keys(l.O).every((function(e){return l.O[e](a[u])}))?a.splice(u--,1):(s=!1,n<o&&(o=n));if(s){e.splice(p--,1);var i=r();void 0!==i&&(t=i)}}return t}n=n||0;for(var p=e.length;p>0&&e[p-1][2]>n;p--)e[p]=e[p-1];e[p]=[a,r,n]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.p="/"}(),function(){var e={143:0};l.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,n,o=a[0],s=a[1],u=a[2],i=0;if(o.some((function(t){return 0!==e[t]}))){for(r in s)l.o(s,r)&&(l.m[r]=s[r]);if(u)var p=u(l)}for(t&&t(a);i<o.length;i++)n=o[i],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(p)},a=self["webpackChunk_mcpronovost_cynorrs"]=self["webpackChunk_mcpronovost_cynorrs"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=l.O(void 0,[998],(function(){return l(6699)}));a=l.O(a)})();