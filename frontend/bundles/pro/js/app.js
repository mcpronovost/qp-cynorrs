(function(){"use strict";var e={7781:function(e,t,a){a.d(t,{b:function(){return To},E:function(){return zo}});var l=a(9242),r=a(3396),n=a(7139),s=a(4870),o=a(65),u=a(2748);const i=e=>((0,r.dD)("data-v-0882032e"),e=e(),(0,r.Cn)(),e),p={id:"qp-header-menu-player"},d=["textContent"],c=["textContent"],m=["textContent"],g=["textContent"],w=i((()=>(0,r._)("br",null,null,-1))),_=["textContent"],v=i((()=>(0,r._)("hr",null,null,-1))),h=["textContent"],f=["textContent"],y=["textContent"],b=i((()=>(0,r._)("hr",null,null,-1))),x=["textContent"],C=["textContent"],q=i((()=>(0,r._)("hr",null,null,-1))),k=["textContent"];var $={__name:"qpHeaderNavPlayer",setup(e){const t=(0,o.oR)(),a=(0,r.Fl)((()=>t.getters.rat)),l=(0,r.Fl)((()=>t.getters.player));return(e,t)=>{const o=(0,r.up)("el-icon"),u=(0,r.up)("el-menu-item"),i=(0,r.up)("el-menu"),$=(0,r.up)("el-badge"),W=(0,r.up)("el-sub-menu");return(0,r.wg)(),(0,r.iD)("div",p,[(0,s.SU)(a)?((0,r.wg)(),(0,r.j4)(i,{key:1,router:"",mode:"horizontal","menu-trigger":"click","default-active":e.$route&&e.$route.name?e.$route.name:null},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{disabled:"",index:"notifications"},{default:(0,r.w5)((()=>[(0,r.Wm)($,{hidden:!0,"is-dot":""},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{class:"mdi mdi-bell-outline"})])),_:1})])),_:1}),(0,r.Wm)(u,{disabled:"",index:"messages"},{default:(0,r.w5)((()=>[(0,r.Wm)($,{hidden:!0,value:123,max:99},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{class:"mdi mdi-email-outline"})])),_:1})])),_:1}),(0,r.Wm)(W,{index:"1"},{title:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)((0,s.SU)(l)?.playername)},null,8,m)])),default:(0,r.w5)((()=>[(0,r.Wm)(u,{disabled:"",index:"profile",class:"qp-multiline"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("SignedInAs"))},null,8,g),w,(0,r._)("strong",{textContent:(0,n.zw)((0,s.SU)(l)?.playername)},null,8,_)])),_:1}),v,(0,r.Wm)(u,{disabled:"",index:"profile"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("YourProfile"))},null,8,h)])),_:1}),(0,r.Wm)(u,{index:"MeCharacters",route:{name:"MeCharacters"},disabled:e.$route.name&&"MeCharacters"==e.$route.name},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("YourCharacters"))},null,8,f)])),_:1},8,["disabled"]),(0,r.Wm)(u,{index:"MeWorlds",route:{name:"MeWorlds"},disabled:e.$route.name&&"MeWorlds"==e.$route.name},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("YourWorlds"))},null,8,y)])),_:1},8,["disabled"]),b,(0,r.Wm)(u,{disabled:"",index:"help"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Help"))},null,8,x)])),_:1}),(0,r.Wm)(u,{disabled:"",index:"settings"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Settings"))},null,8,C)])),_:1}),q,(0,r.Wm)(u,{index:"AuthLogout",route:{name:"AuthLogout"}},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Logout"))},null,8,k)])),_:1})])),_:1})])),_:1},8,["default-active"])):((0,r.wg)(),(0,r.j4)(i,{key:0,router:"",mode:"horizontal","menu-trigger":"click"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{index:"AuthLogin",route:{name:"AuthLogin"}},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{class:"mdi mdi-power"}),(0,r._)("span",{textContent:(0,n.zw)(e.$t("Login"))},null,8,d)])),_:1}),(0,r.Wm)(u,{index:"AuthRegister",route:{name:"AuthRegister"}},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{class:"mdi mdi-login-variant"}),(0,r._)("span",{textContent:(0,n.zw)(e.$t("Register"))},null,8,c)])),_:1})])),_:1}))])}}},W=a(89);const z=(0,W.Z)($,[["__scopeId","data-v-0882032e"]]);var T=z;const S=e=>((0,r.dD)("data-v-435885fa"),e=e(),(0,r.Cn)(),e),j={id:"qp-app-header"},D={id:"qp-header-logo-img"},H=S((()=>(0,r._)("div",{class:"image-slot"},null,-1))),A={id:"qp-header-logo-title"},E=["textContent"],U={id:"qp-header-menu-app"},F=["textContent"],O=["textContent"];var L={__name:"qpHeader",setup(e){const t=(0,o.oR)(),l=(0,r.Fl)((()=>t.getters.app)),i=(0,s.iH)(a(4465)),p=()=>{t.commit("TOGGLE_SIDEBAR")};return(e,t)=>{const a=(0,r.up)("el-image"),o=(0,r.up)("el-icon"),d=(0,r.up)("el-menu-item"),c=(0,r.up)("el-menu"),m=(0,r.up)("el-col"),g=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",j,[(0,r.Wm)(g,{gutter:20,align:"middle"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{span:10,class:"text-left"},{default:(0,r.w5)((()=>[(0,r._)("div",{id:"qp-header-logo",onClick:t[0]||(t[0]=t=>e.$router.go({name:"Home"}))},[(0,r._)("div",D,[(0,r.Wm)(a,{src:i.value,fit:"cover"},{error:(0,r.w5)((()=>[H])),_:1},8,["src"])]),(0,r._)("div",A,[(0,r._)("span",{textContent:(0,n.zw)((0,s.SU)(zo).shortname)},null,8,E)])]),(0,s.SU)(l).win.w>=1200?((0,r.wg)(),(0,r.iD)("div",{key:0,id:"qp-header-toggle-sidebar",onClick:t[1]||(t[1]=e=>p())},[(0,r.Wm)(o,null,{default:(0,r.w5)((()=>[(0,s.SU)(l).sidebar.collapse?((0,r.wg)(),(0,r.j4)((0,s.SU)(u.M0b),{key:0})):((0,r.wg)(),(0,r.j4)((0,s.SU)(u.qFw),{key:1}))])),_:1})])):(0,r.kq)("",!0),(0,r._)("div",U,[(0,r.Wm)(c,{router:"",mode:"horizontal","menu-trigger":"click"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{disabled:"",index:"discover"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Discover"))},null,8,F)])),_:1}),(0,r.Wm)(d,{disabled:"",index:"browse"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Browse"))},null,8,O)])),_:1})])),_:1})])])),_:1}),(0,r.Wm)(m,{span:14,class:"text-right"},{default:(0,r.w5)((()=>[(0,r.Wm)(T)])),_:1})])),_:1})])}}};const M=(0,W.Z)(L,[["__scopeId","data-v-435885fa"]]);var R=M;const V=e=>((0,r.dD)("data-v-6f4d1374"),e=e(),(0,r.Cn)(),e),P={id:"qp-sidebar-profile"},Y={id:"qp-sidebar-banner"},N=V((()=>(0,r._)("div",{class:"image-slot"},null,-1))),B={id:"qp-sidebar-avatar"},I={id:"qp-sidebar-name"},Z=["textContent"],K={key:0,id:"qp-sidebar-title"},J=["textContent"];var G={__name:"qpSidebarProfile",setup(e){const t=(0,o.oR)(),a=(0,r.Fl)((()=>t.getters.rat)),l=(0,r.Fl)((()=>t.getters.player)),i=(0,s.iH)("Qui ne fait que passer");return(e,t)=>{const o=(0,r.up)("el-image"),p=(0,r.up)("el-icon"),d=(0,r.up)("el-avatar");return(0,r.wg)(),(0,r.iD)("div",P,[(0,r._)("div",Y,[(0,r.Wm)(o,{src:(0,s.SU)(l)?.banner,fit:"cover"},{error:(0,r.w5)((()=>[N])),_:1},8,["src"])]),(0,r._)("div",B,[(0,r.Wm)(d,{src:(0,s.SU)(l)?.avatar},{default:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,s.SU)(u.n5m))])),_:1})])),_:1},8,["src"])]),(0,r._)("div",I,[(0,r._)("h2",null,[(0,r._)("span",{textContent:(0,n.zw)((0,s.SU)(l)?.playername)},null,8,Z)])]),(0,s.SU)(a)?((0,r.wg)(),(0,r.iD)("div",K,[(0,r._)("p",null,[(0,r._)("span",{textContent:(0,n.zw)(i.value)},null,8,J)])])):(0,r.kq)("",!0)])}}};const Q=(0,W.Z)(G,[["__scopeId","data-v-6f4d1374"]]);var X=Q;const ee=e=>((0,r.dD)("data-v-bef58284"),e=e(),(0,r.Cn)(),e),te={id:"qp-sidebar-nav"},ae=ee((()=>(0,r._)("i",{class:"mdi mdi-home"},null,-1))),le=["textContent"],re=ee((()=>(0,r._)("i",{class:"mdi mdi-hops"},null,-1))),ne=["textContent"],se=ee((()=>(0,r._)("i",{class:"mdi mdi-scale-balance"},null,-1))),oe=["textContent"],ue=ee((()=>(0,r._)("i",{class:"mdi mdi-script-text"},null,-1))),ie=["textContent"],pe=ee((()=>(0,r._)("i",{class:"mdi mdi-forum-outline"},null,-1))),de=["textContent"],ce=ee((()=>(0,r._)("i",{class:"mdi mdi-account-group"},null,-1))),me=["textContent"],ge=ee((()=>(0,r._)("i",{class:"mdi mdi-hops"},null,-1))),we=["textContent"];var _e={__name:"qpSidebarNav",setup(e){const t=(0,o.oR)(),a=(0,r.Fl)((()=>t.getters.app)),l=(0,r.Fl)((()=>t.getters.player));return(e,t)=>{const o=(0,r.up)("el-menu-item"),u=(0,r.up)("el-sub-menu"),i=(0,r.up)("el-menu");return(0,r.wg)(),(0,r.iD)("div",te,[(0,r.Wm)(i,{router:"","default-active":e.$route&&e.$route.params&&"slug"in e.$route.params?e.$route.params.slug:e.$route.name,collapse:(0,s.SU)(a).win.w<1200||(0,s.SU)(a).sidebar?.collapse},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{index:"Home",route:{name:"Home"}},{default:(0,r.w5)((()=>[ae,(0,r._)("span",{textContent:(0,n.zw)(e.$t("Home"))},null,8,le)])),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,s.SU)(l)?.worldnavs,((t,a)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[e.$route.params.slug&&e.$route.params.slug==t.slug?((0,r.wg)(),(0,r.j4)(u,{key:`world-nav-group-${a}`,index:t.slug},{title:(0,r.w5)((()=>[re,(0,r._)("span",{textContent:(0,n.zw)(t.name)},null,8,ne)])),default:(0,r.w5)((()=>[(0,r.Wm)(o,{disabled:"",index:`${t.slug}-rules`,route:{name:"World",params:{world_pk:t.id,slug:t.slug}}},{default:(0,r.w5)((()=>[se,(0,r._)("span",{textContent:(0,n.zw)(e.$t("Rules"))},null,8,oe)])),_:2},1032,["index","route"]),(0,r.Wm)(o,{disabled:"",index:`${t.slug}-context`,route:{name:"World",params:{world_pk:t.id,slug:t.slug}}},{default:(0,r.w5)((()=>[ue,(0,r._)("span",{textContent:(0,n.zw)(e.$t("Context"))},null,8,ie)])),_:2},1032,["index","route"]),(0,r.Wm)(o,{index:t.slug,route:{name:"WorldForum",params:{world_pk:t.id,slug:t.slug}}},{default:(0,r.w5)((()=>[pe,(0,r._)("span",{textContent:(0,n.zw)(e.$t("Forum"))},null,8,de)])),_:2},1032,["index","route"]),(0,r.Wm)(o,{disabled:"",index:`${t.slug}-community`,route:{name:"World",params:{world_pk:t.id,slug:t.slug}}},{default:(0,r.w5)((()=>[ce,(0,r._)("span",{textContent:(0,n.zw)(e.$t("Community"))},null,8,me)])),_:2},1032,["index","route"])])),_:2},1032,["index"])):((0,r.wg)(),(0,r.j4)(o,{key:`world-nav-${a}`,index:t.slug,route:{name:"WorldForum",params:{world_pk:t.id,slug:t.slug}}},{default:(0,r.w5)((()=>[ge,(0,r._)("span",{textContent:(0,n.zw)(t.name)},null,8,we)])),_:2},1032,["index","route"]))],64)))),256))])),_:1},8,["default-active","collapse"])])}}};const ve=(0,W.Z)(_e,[["__scopeId","data-v-bef58284"]]);var he=ve;const fe={id:"qp-sibebar-inner"},ye={id:"qp-sibebar-main"},be={id:"qp-sidebar-footer"},xe=["innerHTML"];var Ce={__name:"qpSidebar",setup(e){const t=(0,o.oR)(),a=(0,r.Fl)((()=>t.getters.app));return(e,t)=>{const l=(0,r.up)("el-scrollbar");return(0,r.wg)(),(0,r.iD)("div",{id:"qp-app-sidebar",class:(0,n.C_)((0,s.SU)(a).win.w<1200||(0,s.SU)(a).sidebar?.collapse?"qp-collapsed":"")},[(0,r.Wm)(l,{height:"100%"},{default:(0,r.w5)((()=>[(0,r._)("div",fe,[(0,r._)("div",ye,[(0,r.Wm)(X),(0,r.Wm)(he)]),(0,r._)("div",be,[(0,r._)("span",{innerHTML:e.$t("TextCopyrights")},null,8,xe)])])])),_:1})],2)}}};const qe=(0,W.Z)(Ce,[["__scopeId","data-v-73e61904"]]);var ke=qe,$e=a(678);const We={key:0,id:"qp-app-smallbar"},ze={key:0,id:"qp-smallbar-inner"},Te=["textContent"];var Se={__name:"qpSmallbar",setup(e){const t=(0,$e.yj)(),a=(0,o.oR)(),l=(0,r.Fl)((()=>a.getters.app)),u=(0,r.Fl)((()=>a.getters.rat)),i=(0,r.Fl)((()=>a.getters.heros)),p=(0,r.Fl)((()=>"slug"in t.params?i.value.filter((e=>e.world?.slug==t.params.slug)):i.value));return(e,t)=>{const a=(0,r.up)("el-avatar"),o=(0,r.up)("el-tooltip"),i=(0,r.up)("el-scrollbar");return(0,s.SU)(l).win.w>767?((0,r.wg)(),(0,r.iD)("div",We,[(0,r.Wm)(i,{height:"100%"},{default:(0,r.w5)((()=>[(0,s.SU)(u)?((0,r.wg)(),(0,r.iD)("div",ze,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,s.SU)(p),((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:`hero-${t}`,class:"qp-smallbar-hero"},[(0,r.Wm)(o,{content:e.name,placement:"left"},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{src:e.avatar},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.initials)},null,8,Te)])),_:2},1032,["src"])])),_:2},1032,["content"])])))),128))])):(0,r.kq)("",!0)])),_:1})])):(0,r.kq)("",!0)}}};const je=(0,W.Z)(Se,[["__scopeId","data-v-beb6dbf2"]]);var De=je;const He={id:"qp-app"};var Ae={__name:"App",setup(e){const t=(0,o.oR)(),a=(0,r.Fl)((()=>t.getters.rat));return(e,t)=>{const l=(0,r.up)("router-view"),o=(0,r.up)("el-scrollbar");return(0,r.wg)(),(0,r.iD)("div",He,[e.$route.name&&e.$route.name.startsWith("Auth")?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(R,{key:0})),e.$route.name&&e.$route.name.startsWith("Auth")?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(ke,{key:1})),(0,r._)("div",{id:"qp-app-main",class:(0,n.C_)(`${(0,s.SU)(a)?"":" qp-nosmallbar"}${e.$route.name&&e.$route.name.startsWith("Auth")?" qp-fullview":""}`)},[(0,r.Wm)(o,{height:"100%"},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)(l,{key:e.$route.fullPath}))])),_:1})],2),e.$route.name&&e.$route.name.startsWith("Auth")?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(De,{key:2}))])}}};const Ee=Ae;var Ue=Ee,Fe=a(3590),Oe=JSON.parse('{"A player with that playername already exists.":"Un joueur avec ce nom existe déjà.","A user with that email already exists.":"Un joueur avec cette adresse courriel existe déjà.","A user with that username already exists.":"Un joueur avec ce nom existe déjà.","AlreadyHaveAnAccount":"Déjà inscrit ?","AnErrorOccurred":"Une erreur est survenue","BackToHome":"Retour à l\'accueil","Browse":"Parcourir","Cancel":"Annuler","Ce champ est obligatoire.":"Ce champ est obligatoire.","Chapter":"Chapitre | Chapitre | Chapitres","Character":"Personnage | Personnage | Personnages","ChooseTravellers":"Choisir les voyageurs","Closed":"Fermé","Community":"Communauté","Confirm":"Confirmer","Context":"Contexte","Continue":"Continuer","CreateWorld":"Créer un monde","Description":"Description","Descriptionofthenewchapter":"Courte description facultative","Discover":"Découvrir","DontHaveAnAccount":"Pas encore inscrit ?","email":"Courriel","Email":"Courriel","Enter a valid email address.":"Saisissez une adresse courriel valide.","Error":"Erreur","Forum":"Forum","Help":"Aide","Home":"Accueil","Login":"Connexion","Logout":"Déconnexion","Message":"Message | Message | Messages","Never":"Jamais","NewChapter":"Nouveau chapitre","NoAvailableTravellers":"Aucun voyageur disponible","non_field_errors":"Erreur","NoWorldCreated":"Aucun monde créé","password":"Mot de passe","Password":"Mot de passe","Player":"Joueur | Joueur | Joueurs","Playername":"Nom de joueur","playername":"Nom de joueur","Profile":"Profil","Quests":"Quêtes","Register":"Inscription","Rules":"Règlements","Saisissez une adresse e-mail valide.":"Saisissez une adresse courriel valide.","Sector":"Secteur | Secteur | Secteurs","SeeAllQuests":"Voir toutes les quêtes","Send":"Envoyer","Settings":"Paramètres","SignedInAs":"Connecté en tant que","Text":"Texte","TextCopyrights":"&copy;&nbsp;2022 M-C Pronovost","That password is too short.":"Ce mot de passe est trop court.","ThisChapterDoesntExistAnymore":"Ce chapitre n\'existe pas ou plus","Thisfieldisrequired":"Ce champs est requis.","ThisForumDoesntExistAnymore":"Ce forum n\'existe pas ou plus","ThisSectorDoesntExistAnymore":"Ce secteur n\'existe pas ou plus","ThisTerritoryDoesntExistAnymore":"Ce territoire n\'existe pas ou plus","ThisWorldDoesntExistAnymore":"Ce monde n\'existe pas ou plus","ThisZoneDoesntExistAnymore":"Cette zone n\'existe pas ou plus","Title":"Titre","Titleofthenewchapter":"Titre du nouveau chapitre","Travel":"Voyager","TravelCompleted":"Voyage complété","username":"Nom d\'utilisateur","Username":"Nom d\'utilisateur","Writing":"Rédaction","YouDoesntHaveAccessToThisForum":"Vous n\'avez pas accès à ce forum","YouDoesntHaveAccessToThisWorld":"Vous n\'avez pas accès à ce monde","Youhavearrivedatyourdestination":"Vous êtes arrivé à destination","YourCharacters":"Vos personnages","YourEmailAddress":"Votre adresse de courriel","YourMessage":"Votre message","YourPersonalUsername":"Votre nom d\'utilisateur personnel","YourProfile":"Votre profil","YourPublicPlayername":"Votre nom de joueur public","YourWorlds":"Vos mondes","YouDoesntHaveAccessToThisZone":"Vous n\'avez pas accès à cette zone","YouDoesntHaveAccessToThisTerritory":"Vous n\'avez pas accès à ce territoire","YouDoesntHaveAccessToThisChapter":"Vous n\'avez pas accès à ce chapitre","YouDoesntHaveAccessToThisSector":"Vous n\'avez pas accès à ce secteur","ToReply":"Répondre","ChooseACharacter":"Choisir un personnage","YourReply":"Votre réponse","ThisPageDoesntExistAnymore":"Cette page n\'existe pas ou plus","errorcharacter":"Personnage","errortext":"Texte","AllRightsReserved":"Tous droits réservés","NewChapterTitle":"Titre du nouveau chapitre","Edit":"Modifier","Delete":"Supprimer","EditMessage":"Modifier le message","DeleteMessage":"Supprimer le message","Success":"Succès","MessageDeletedSuccessfully":"Message supprimé avec succès !","Areyousureyouwanttodeletethismessage":"Êtes-vous certain de vouloir supprimer définitivement ce message ? Cette action est irréversible.","DeleteChapter":"Supprimer le chapitre","LockChapter":"Verrouiller le chapitre","UnlockChapter":"Déverrouiller le chapitre","NoCharacterCreated":"Aucun personnage créé"}');const Le={short:{year:"numeric",month:"long",day:"2-digit"}},Me={fr:Le},Re=(0,Fe.o)({locale:"fr",fallbackLocale:"fr",messages:{fr:Oe},dateTimeFormats:Me,legacy:!1,globalInjection:!0,silentTranslationWarn:!0});var Ve=Re,Pe=a(5361);const Ye=e=>({win:e.app.win,sidebar:e.app.sidebar}),Ne={state:()=>({win:{w:1880,h:980},sidebar:{collapse:!1}}),mutations:{SET_WINSIZES(e){e.win={w:window.innerWidth,h:window.innerHeight}},TOGGLE_SIDEBAR(e){e.sidebar.collapse=!e.sidebar.collapse}}},Be=e=>{if(e.drat.s&&e.frat.e){let t=Pe.lW.from(e.drat.s,"base64").toString("utf8"),a=Pe.lW.from(e.frat.e,"base64").toString("utf8");return`Token ${t}${a}`}return null},Ie={state:()=>({s:null}),mutations:{SET_DRAT(e,t){e.s=t?Pe.lW.from(t).toString("base64"):null}}},Ze={state:()=>({e:null}),mutations:{SET_FRAT(e,t){e.e=t?Pe.lW.from(t).toString("base64"):null}}},Ke=e=>e.player.j?JSON.parse(Pe.lW.from(e.player.j,"base64").toString("utf8")):null,Je=e=>e.player.h?JSON.parse(Pe.lW.from(e.player.h,"base64").toString("utf8")):[],Ge=e=>e.player.w?JSON.parse(Pe.lW.from(e.player.w,"base64").toString("utf8")):[],Qe={state:()=>({j:null,h:null,c:null,w:null}),mutations:{SET_PLAYER(e,t){if(t){let a=Pe.lW.from(e.j,"base64").toString("utf8");a=a?JSON.parse(a):{},a[t[0]]=t[1],e.j=Pe.lW.from(JSON.stringify(a)).toString("base64")}},BATCH_PLAYER(e,t){if(t){let a=e.j;a=a?JSON.parse(Pe.lW.from(a,"base64").toString("utf8")):{};let l=Object.entries(t);for(let e=0;e<l.length;e++)a[l[e][0]]=l[e][1];e.j=Pe.lW.from(JSON.stringify(a)).toString("base64")}else e.j=null},BATCH_HEROS(e,t){e.h=t?Pe.lW.from(JSON.stringify(t)).toString("base64"):null},BATCH_WORLDS(e,t){e.w=t?Pe.lW.from(JSON.stringify(t)).toString("base64"):null}},actions:{async getPlayer({commit:e,dispatch:t,getters:a}){if(a.rat){let l=await fetch(`${To}/me/`,{method:"GET",headers:{Authorization:a.rat}});if(200===l.status){let a=await l.json();e("BATCH_PLAYER",a),t("getHeros")}else 401===l.status&&t("doLogout")}},async getHeros({commit:e,dispatch:t,getters:a}){if(a.rat){let l=await fetch(`${To}/me/heros/`,{method:"GET",headers:{Authorization:a.rat}});if(200===l.status){let t=await l.json();e("BATCH_HEROS",t)}else 401===l.status&&t("doLogout")}},async doRegister({dispatch:e},{username:t,playername:a,email:l,password:r}){let n=new FormData;t&&n.append("username",t),a&&n.append("playername",a),l&&n.append("email",l),r&&n.append("password",r);let s=await fetch(`${To}/register/`,{method:"POST",body:n}),o=await s.json();return 200===s.status?e("doLogin",{username:t,password:r}):{valid:!1,data:o}},async doLogin({commit:e},{username:t,password:a}){let l=new FormData;l.append("username",t),l.append("password",a);let r=await fetch(`${To}/login/`,{method:"POST",body:l}),n=await r.json();if(200===r.status){let t=n.token,a=Math.ceil(t.length/2);return e("SET_DRAT",t.slice(0,a)),e("SET_FRAT",t.slice(a)),{valid:!0}}return{valid:!1,data:n}},async doLogout({commit:e,getters:t}){let a=await fetch(`${To}/logout/`,{method:"POST",headers:{Authorization:t.rat}});return e("BATCH_PLAYER",null),e("BATCH_HEROS",null),e("BATCH_WORLDS",null),e("SET_DRAT",null),e("SET_FRAT",null),a}}};var Xe=a(5103),et=a(680);const tt=new Xe.ZP({key:"qpcynorrs",storage:window.localStorage,reducer:e=>({drat:e.drat,app:e.app})}),at=new Xe.ZP({key:"qpcynorrs",storage:window.sessionStorage,reducer:e=>({player:e.player})}),lt=new Xe.ZP({key:"qpcynorrs",restoreState:e=>{if(et.Z.get(e))return JSON.parse(Pe.lW.from(et.Z.get(e),"base64").toString("utf8"))},saveState:(e,t)=>{t&&et.Z.set(e,Pe.lW.from(JSON.stringify(t)).toString("base64"),{expires:30})},modules:["frat"]}),rt=e=>{e.commit("SET_WINSIZES"),window.addEventListener("resize",(()=>{e.commit("SET_WINSIZES")}))},nt=(0,o.MT)({getters:{app:Ye,rat:Be,player:Ke,heros:Je,worlds:Ge},modules:{app:Ne,drat:Ie,frat:Ze,player:Qe},plugins:[tt.plugin,at.plugin,lt.plugin,rt]});var st=nt;const ot={class:"qp-vue"};function ut(e,t){return(0,r.wg)(),(0,r.iD)("div",ot," aaa ")}const it={},pt=(0,W.Z)(it,[["render",ut]]);var dt=pt;const ct={key:0,class:"qp-card-header"},mt={class:"qp-card-header-title"};var gt={__name:"qpCard",props:{clickable:{type:Boolean,default:!1},overflow:{type:Boolean,default:!1},bgcolor:{type:String,default:"base"},h:{type:String,default:""},pa:{type:String,default:"20px"},mb:{type:String,default:""}},setup(e){const t=e,a=(0,r.Fl)((()=>t.clickable?"qp-card-clickable":"")),l=(0,r.Fl)((()=>t.overflow?"qp-card-overflow":"")),o=(0,r.Fl)((()=>"base"!=t.bgcolor?`qp-card-bg-${t.bgcolor}`:"")),u=(0,r.Fl)((()=>t.h?`height:${t.h};`:"")),i=(0,r.Fl)((()=>t.pa?`padding:${t.pa};`:"")),p=(0,r.Fl)((()=>t.mb?`margin-bottom:${t.mb};`:""));return(e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,n.C_)(`qp-card ${(0,s.SU)(a)} ${(0,s.SU)(l)} ${(0,s.SU)(o)}`),style:(0,n.j5)(`${(0,s.SU)(u)}${(0,s.SU)(p)}`)},[e.$slots.header?((0,r.wg)(),(0,r.iD)("div",ct,[(0,r._)("div",mt,[(0,r.WI)(e.$slots,"header")])])):(0,r.kq)("",!0),(0,r._)("div",{class:"qp-card-main",style:(0,n.j5)(`${(0,s.SU)(i)}`)},[(0,r.WI)(e.$slots,"default")],4)],6))}};const wt=(0,W.Z)(gt,[["__scopeId","data-v-5cd20510"]]);var _t=wt;const vt=e=>((0,r.dD)("data-v-f5392660"),e=e(),(0,r.Cn)(),e),ht={class:"qp-vue"},ft={key:0},yt={class:"qp-container"},bt=["textContent"],xt={class:"qp-mecharacters-overview"},Ct=vt((()=>(0,r._)("h2",{class:"qp-mecharacters-overview-title"},[(0,r._)("span",{textContent:"Qalatlán"})],-1))),qt=vt((()=>(0,r._)("p",null,"Lorem ipsum dolor sit amet.",-1))),kt={key:1},$t={class:"qp-container"},Wt={"element-loading-background":"transparent",style:{height:"60vh"}},zt={key:2},Tt={class:"qp-container"};var St={__name:"MeCharactersView",setup(e){const t=(0,o.oR)(),a=(0,r.Fl)((()=>t.getters.rat)),l=(0,s.iH)(!0),u=(0,s.iH)(null),i=(0,s.iH)([]);return(0,r.bv)((()=>{console.log("onMounted"),l.value=!1})),(e,t)=>{const o=(0,r.up)("el-col"),p=(0,r.up)("el-row"),d=((0,r.up)("el-tag"),(0,r.up)("el-icon")),c=(0,r.up)("el-empty"),m=(0,r.up)("el-result"),g=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)("div",ht,[l.value||u.value||!(0,s.SU)(a)?l.value?((0,r.wg)(),(0,r.iD)("div",kt,[(0,r._)("div",$t,[(0,r.wy)((0,r._)("div",Wt,null,512),[[g,l.value]])])])):((0,r.wg)(),(0,r.iD)("div",zt,[(0,r._)("div",Tt,[(0,r.Wm)(_t,{h:"auto"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{icon:"error",title:e.$t("Error"),"sub-title":u.value},null,8,["title","sub-title"])])),_:1})])])):((0,r.wg)(),(0,r.iD)("div",ft,[(0,r._)("div",yt,[(0,r._)("header",null,[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(o,{span:24,align:"left"},{default:(0,r.w5)((()=>[(0,r._)("h1",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("YourCharacters"))},null,8,bt)])])),_:1})])),_:1})]),(0,r._)("section",null,[i.value.length?((0,r.wg)(),(0,r.j4)(p,{key:0},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.value,((e,t)=>((0,r.wg)(),(0,r.j4)(o,{key:`character-${t}`},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,{clickable:"",pa:"12px"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{align:"middle"},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{span:24,md:12,align:"left"},{default:(0,r.w5)((()=>[(0,r._)("div",xt,[Ct,(0,r.kq)("",!0),qt])])),_:1})])),_:1})])),_:1})])),_:2},1024)))),128))])),_:1})):((0,r.wg)(),(0,r.j4)(p,{key:1},{default:(0,r.w5)((()=>[(0,r.Wm)(o,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{description:e.$t("NoCharacterCreated")},{image:(0,r.w5)((()=>[(0,r.Wm)(d,{class:"mdi mdi-emoticon-sad-outline mdi-48px"})])),_:1},8,["description"])])),_:1})])),_:1}))])])]))])}}};const jt=(0,W.Z)(St,[["__scopeId","data-v-f5392660"]]);var Dt=jt;a(6699);const Ht={class:"qp-vue"},At={key:0},Et={key:0,class:"qp-container"},Ut=["textContent"],Ft=["textContent"],Ot={class:"qp-meworlds-overview"},Lt={class:"qp-meworlds-overview-tags"},Mt=["textContent"],Rt=["textContent"],Vt=["textContent"],Pt=["textContent"],Yt={class:"qp-meworlds-overview-title"},Nt=["textContent"],Bt=["textContent"],It={class:"qp-meworlds-infolist"},Zt=["textContent"],Kt=["textContent"],Jt=["textContent"],Gt=["textContent"],Qt=["textContent"],Xt=["textContent"],ea=["textContent"],ta=["textContent"],aa={key:1,class:"qp-container"},la=["textContent"],ra=["innerHTML"],na=["textContent"],sa=["textContent"],oa={key:1},ua={class:"qp-container"},ia={"element-loading-background":"transparent",style:{height:"60vh"}},pa={key:2},da={class:"qp-container"};var ca={__name:"MeWorldsView",setup(e){const{t:t}=Ve.global,a=(0,$e.tv)(),u=(0,o.oR)(),i=(0,r.Fl)((()=>u.getters.rat)),p=(0,r.Fl)((()=>u.getters.app)),d=(0,r.Fl)((()=>u.getters.player)),c=(0,s.iH)(!0),m=(0,s.iH)(!1),g=(0,s.iH)(null),w=(0,s.iH)(null),_=(0,s.iH)([]),v=(0,s.iH)(0),h=(0,s.iH)(1),f=(0,s.iH)(0);(0,r.bv)((()=>{i.value?c.value=!1:a.push({name:"AuthLogin"})}));const y=async()=>{c.value=!0,g.value=null,_.value=[];let e=await fetch(`${To}/worlds/?page=${h.value}`,{method:"GET",headers:{Authorization:i.value}}),a=await e.json();200===e.status?(v.value=a.count,_.value=a.results,f.value=a.size):g.value=t("ThisWorldDoesntExistAnymore"),c.value=!1},b=e=>{h.value=e,y()},x=(0,s.iH)(!1),C=(0,s.iH)(),q=(0,s.qj)({name:"",description:""}),k=()=>{x.value=!0},$=()=>{x.value=!1};return(e,t)=>{const a=(0,r.up)("el-col"),o=(0,r.up)("el-button"),u=(0,r.up)("el-row"),y=(0,r.up)("el-tag"),W=(0,r.up)("el-pagination"),z=(0,r.up)("el-icon"),T=(0,r.up)("el-empty"),S=(0,r.up)("el-input"),j=(0,r.up)("el-form-item"),D=(0,r.up)("el-form"),H=(0,r.up)("el-alert"),A=(0,r.up)("el-result"),E=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)("div",Ht,[c.value||g.value||!(0,s.SU)(i)?c.value?((0,r.wg)(),(0,r.iD)("div",oa,[(0,r._)("div",ua,[(0,r.wy)((0,r._)("div",ia,null,512),[[E,c.value]])])])):((0,r.wg)(),(0,r.iD)("div",pa,[(0,r._)("div",da,[(0,r.Wm)(_t,{h:"auto"},{default:(0,r.w5)((()=>[(0,r.Wm)(A,{icon:"error",title:e.$t("Error"),"sub-title":g.value},null,8,["title","sub-title"])])),_:1})])])):((0,r.wg)(),(0,r.iD)("div",At,[x.value?x.value?((0,r.wg)(),(0,r.iD)("div",aa,[(0,r._)("header",null,[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(a,{span:24},{default:(0,r.w5)((()=>[(0,r._)("h1",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("CreateWorld"))},null,8,la)])])),_:1})])),_:1})]),(0,r._)("section",null,[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(a,null,{default:(0,r.w5)((()=>[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(a,null,{default:(0,r.w5)((()=>[(0,r.Wm)(D,{ref_key:"formCreateWorldRef",ref:C,model:q,"label-position":(0,s.SU)(p).win.w<1200?"top":"right","label-width":"120px","status-icon":""},{default:(0,r.w5)((()=>[(0,r.Wm)(j,{label:e.$t("Name"),prop:"name",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(S,{modelValue:q.name,"onUpdate:modelValue":t[1]||(t[1]=e=>q.name=e),type:"text",maxlength:"32","show-word-limit":"",placeholder:e.$t("YourPersonalUsername")},null,8,["modelValue","placeholder"])])),_:1},8,["label","rules"]),(0,r.Wm)(j,{label:e.$t("Description"),prop:"description",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(S,{modelValue:q.description,"onUpdate:modelValue":t[2]||(t[2]=e=>q.description=e),type:"text",maxlength:"250",onKeyup:t[3]||(t[3]=(0,l.D2)((e=>$()),["enter"]))},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1},8,["model","label-position"])])),_:1}),w.value?((0,r.wg)(),(0,r.j4)(a,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(H,{type:"error","show-icon":""},{default:(0,r.w5)((()=>[(0,r._)("div",{innerHTML:w.value},null,8,ra)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(a,null,{default:(0,r.w5)((()=>[(0,r.Wm)(o,{disabled:m.value,onClick:t[4]||(t[4]=e=>$())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Cancel"))},null,8,na)])),_:1},8,["disabled"]),(0,r.Wm)(o,{type:"primary",loading:m.value},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Send"))},null,8,sa)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])])):(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Et,[(0,r._)("header",null,[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(a,{span:24,sm:12,align:"left"},{default:(0,r.w5)((()=>[(0,r._)("h1",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("YourWorlds"))},null,8,Ut)])])),_:1}),(0,r.Wm)(a,{span:24,sm:12,align:(0,s.SU)(p).win.w>=768?"right":"left"},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{disabled:!(0,s.SU)(d)?.limits?.can_create_worlds,onClick:t[0]||(t[0]=e=>k())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("CreateWorld"))},null,8,Ft)])),_:1},8,["disabled"])])),_:1},8,["align"])])),_:1})]),(0,r._)("section",null,[_.value.length?((0,r.wg)(),(0,r.j4)(u,{key:0},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(_.value,((t,l)=>((0,r.wg)(),(0,r.j4)(a,{key:`world-${l}`},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,{clickable:"",pa:"12px"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{align:"middle"},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{span:24,md:12,align:"left"},{default:(0,r.w5)((()=>[(0,r._)("div",Ot,[(0,r._)("div",Lt,[t.is_active?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(y,{key:0,type:"danger",effect:"plain",size:"small"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Closed"))},null,8,Mt)])),_:1})),(0,s.SU)(d).id==t.creator?((0,r.wg)(),(0,r.j4)(y,{key:1,effect:"plain",size:"small"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Creator"))},null,8,Rt)])),_:1})):(0,r.kq)("",!0),t.administrators.includes((0,s.SU)(d).id)?((0,r.wg)(),(0,r.j4)(y,{key:2,effect:"plain",size:"small"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Administration"))},null,8,Vt)])),_:1})):(0,r.kq)("",!0),t.moderators.includes((0,s.SU)(d).id)?((0,r.wg)(),(0,r.j4)(y,{key:3,effect:"plain",size:"small"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Moderation"))},null,8,Pt)])),_:1})):(0,r.kq)("",!0)]),(0,r._)("h2",Yt,[(0,r._)("span",{textContent:(0,n.zw)(t.name)},null,8,Nt)]),t.description?((0,r.wg)(),(0,r.iD)("p",{key:0,textContent:(0,n.zw)(t.description)},null,8,Bt)):(0,r.kq)("",!0)])])),_:2},1024),(0,r.Wm)(a,{span:24,md:12,align:"right"},{default:(0,r.w5)((()=>[(0,r._)("ul",It,[(0,r._)("li",null,[(0,r._)("span",{class:"qp-label",textContent:(0,n.zw)(e.$t("Player",t.count_players))},null,8,Zt),(0,r._)("span",{class:"qp-value",textContent:(0,n.zw)(e.$filters.num_to_element(t.count_players,1))},null,8,Kt)]),(0,r._)("li",null,[(0,r._)("span",{class:"qp-label",textContent:(0,n.zw)(e.$t("Character",t.count_heros))},null,8,Jt),(0,r._)("span",{class:"qp-value",textContent:(0,n.zw)(e.$filters.num_to_element(t.count_heros,1))},null,8,Gt)]),(0,r._)("li",null,[(0,r._)("span",{class:"qp-label",textContent:(0,n.zw)(e.$t("Chapter",t.count_chapters))},null,8,Qt),(0,r._)("span",{class:"qp-value",textContent:(0,n.zw)(e.$filters.num_to_element(t.count_chapters,1))},null,8,Xt)]),(0,r._)("li",null,[(0,r._)("span",{class:"qp-label",textContent:(0,n.zw)(e.$t("Message",t.count_messages))},null,8,ea),(0,r._)("span",{class:"qp-value",textContent:(0,n.zw)(e.$filters.num_to_element(t.count_messages,1))},null,8,ta)])])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),(0,r.Wm)(a,null,{default:(0,r.w5)((()=>[(0,r.Wm)(W,{background:"","hide-on-single-page":"",layout:"prev, pager, next",total:v.value,"page-size":f.value,"current-page":h.value,"onUpdate:currentPage":b},null,8,["total","page-size","current-page"])])),_:1})])),_:1})):((0,r.wg)(),(0,r.j4)(u,{key:1},{default:(0,r.w5)((()=>[(0,r.Wm)(a,null,{default:(0,r.w5)((()=>[(0,r.Wm)(T,{description:e.$t("NoWorldCreated")},{image:(0,r.w5)((()=>[(0,r.Wm)(z,{class:"mdi mdi-emoticon-sad-outline mdi-48px"})])),_:1},8,["description"])])),_:1})])),_:1}))])]))]))])}}};const ma=(0,W.Z)(ca,[["__scopeId","data-v-cd16d876"]]);var ga=ma;const wa={class:"qp-vue"},_a={class:"qp-container"};function va(e,t,a,l,n,s){const o=(0,r.up)("qp-card"),u=(0,r.up)("el-col"),i=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",wa,[(0,r._)("div",_a,[(0,r.Wm)(i,{gutter:20},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{span:24},{default:(0,r.w5)((()=>[(0,r.Wm)(o)])),_:1})])),_:1})])])}var ha={name:"HeroDetailView",components:{qpCard:_t}};const fa=(0,W.Z)(ha,[["render",va]]);var ya=fa;const ba={class:"qp-vue"},xa={class:"qp-container"},Ca=(0,r._)("a",{href:"https://www.flaticon.com/free-icons/killer-whale",target:"_blank",title:"killer whale icons"},"Killer whale icons created by edt.im - Flaticon",-1);var qa={__name:"ErrorView",setup(e){return(e,t)=>{const a=(0,r.up)("el-result"),l=(0,r.up)("el-col"),n=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",ba,[(0,r._)("div",xa,[(0,r.Wm)(n,{gutter:20},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{span:24},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[(0,r.Wm)(a,{icon:"error",title:e.$t("Error"),"sub-title":"..."},null,8,["title","sub-title"])])),_:1})])),_:1}),(0,r.Wm)(l,{span:24},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[Ca])),_:1})])),_:1})])),_:1})])])}}};const ka=qa;var $a=ka;const Wa=e=>((0,r.dD)("data-v-6097077c"),e=e(),(0,r.Cn)(),e),za={class:"qp-vue"},Ta={key:0},Sa={id:"qp-auth"},ja=Wa((()=>(0,r._)("div",{id:"qp-auth-banner"},null,-1))),Da={id:"qp-auth-title"},Ha=["textContent"],Aa=["innerHTML"],Ea=["textContent"],Ua=["textContent"],Fa=["textContent"],Oa=Wa((()=>(0,r._)("div",{id:"qp-auth-banner"},null,-1))),La={id:"qp-auth-title"},Ma=["textContent"],Ra=["innerHTML"],Va=["textContent"],Pa=["textContent"],Ya=["textContent"],Na={"element-loading-background":"transparent",style:{width:"200px",height:"200px"}},Ba=["textContent"],Ia={key:1},Za={class:"qp-container"},Ka={"element-loading-background":"transparent",style:{height:"60vh"}},Ja={key:2},Ga={id:"qp-auth"},Qa=["textContent"];var Xa={__name:"AuthView",setup(e){const{t:t}=Ve.global,a=(0,$e.yj)(),i=(0,$e.tv)(),p=(0,o.oR)(),d=(0,r.Fl)((()=>p.getters.app)),c=(0,r.Fl)((()=>p.getters.rat)),m=(0,s.iH)(!0),g=(0,s.iH)(!1),w=(0,s.iH)(null),_=(0,s.iH)(null),v=(0,s.iH)(null);(0,r.bv)((()=>{c.value||"AuthRegister"!=a.name?c.value||"AuthLogin"!=a.name?"AuthLogout"==a.name?(v.value="logout",T()):w.value=t("AnErrorOccurred"):f():h(),m.value=!1}));const h=()=>{v.value="register",history.pushState(history.state,null,"/register")},f=()=>{v.value="login",history.pushState(history.state,null,"/login")},y=()=>{i.push({name:"Home"})},b=(0,s.iH)(),x=(0,s.qj)({username:"",playername:"",email:"",password:""}),C=async()=>{_.value=null,g.value=!0,await b.value.validate(((e,a)=>{if(e)q();else{for(let[e,l]of Object.entries(a)){let a=t(`${e}`);for(let e of l)_.value=`${a} : ${e.message}`}g.value=!1}}))},q=async()=>{_.value=null,g.value=!0;const e=await p.dispatch("doRegister",x);if(e.valid)i.push({name:"Home"});else{for(let[a,l]of Object.entries(e.data)){let e=t(`${a}`),r=t(`${l}`);_.value=`${e} : ${r}`}g.value=!1}},k=(0,s.iH)(),$=(0,s.qj)({username:"",password:""}),W=async()=>{_.value=null,g.value=!0,await k.value.validate(((e,a)=>{if(e)z();else{for(let[e,l]of Object.entries(a)){let a=t(`${e}`);for(let e of l)_.value=`${a} : ${e.message}`}g.value=!1}}))},z=async()=>{_.value=null,g.value=!0;const e=await p.dispatch("doLogin",$);if(e.valid)i.push({name:"Home"});else{for(let[a,l]of Object.entries(e.data)){let e=t(`${a}`),r=t(`${l}`);_.value=`${e} : ${r}`}g.value=!1}},T=async()=>{await p.dispatch("doLogout"),i.push({name:"Home"})};return(e,t)=>{const a=(0,r.up)("el-input"),o=(0,r.up)("el-form-item"),i=(0,r.up)("el-form"),p=(0,r.up)("el-col"),q=(0,r.up)("el-alert"),z=(0,r.up)("el-button"),T=(0,r.up)("el-link"),S=(0,r.up)("el-row"),j=(0,r.up)("el-scrollbar"),D=(0,r.up)("el-result"),H=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)("div",za,[m.value||w.value||!v.value?m.value?((0,r.wg)(),(0,r.iD)("div",Ia,[(0,r._)("div",Za,[(0,r.wy)((0,r._)("div",Ka,null,512),[[H,m.value]])])])):((0,r.wg)(),(0,r.iD)("div",Ja,[(0,r._)("div",Ga,[(0,r.Wm)(_t,{h:"auto"},{default:(0,r.w5)((()=>[(0,r.Wm)(D,{icon:"error",title:e.$t("Error"),"sub-title":w.value,style:{"padding-bottom":"24px"}},null,8,["title","sub-title"]),(0,r.Wm)(z,{onClick:t[14]||(t[14]=e=>y()),style:{"margin-bottom":"40px"}},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("BackToHome"))},null,8,Qa)])),_:1})])),_:1})])])):((0,r.wg)(),(0,r.iD)("div",Ta,[(0,r._)("div",Sa,[(0,s.SU)(c)||"register"!=v.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(_t,{key:0,h:"auto",pa:"0"},{default:(0,r.w5)((()=>[(0,r.Wm)(j,{"max-height":"90vh"},{default:(0,r.w5)((()=>[ja,(0,r._)("div",Da,[(0,r._)("h2",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Register"))},null,8,Ha)])]),(0,r.Wm)(S,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{ref_key:"formRegisterRef",ref:b,model:x,"label-position":(0,s.SU)(d).win.w<1200?"top":"right","label-width":"120px","status-icon":""},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{label:e.$t("Username"),prop:"username",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{modelValue:x.username,"onUpdate:modelValue":t[0]||(t[0]=e=>x.username=e),type:"text",maxlength:"32","show-word-limit":"",placeholder:e.$t("YourPersonalUsername"),"prefix-icon":(0,s.SU)(u.n5m)},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label","rules"]),(0,r.Wm)(o,{label:e.$t("Playername"),prop:"playername",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{modelValue:x.playername,"onUpdate:modelValue":t[1]||(t[1]=e=>x.playername=e),type:"text",maxlength:"32","show-word-limit":"",placeholder:e.$t("YourPublicPlayername"),"prefix-icon":(0,s.SU)(u.n5m)},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label","rules"]),(0,r.Wm)(o,{label:e.$t("Email"),prop:"email",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{modelValue:x.email,"onUpdate:modelValue":t[2]||(t[2]=e=>x.email=e),type:"email",maxlength:"250",placeholder:e.$t("YourEmailAddress"),"prefix-icon":(0,s.SU)(u.v0C)},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label","rules"]),(0,r.Wm)(o,{label:e.$t("Password"),prop:"password",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{modelValue:x.password,"onUpdate:modelValue":t[3]||(t[3]=e=>x.password=e),type:"password",maxlength:"250","prefix-icon":(0,s.SU)(u.HEZ),onKeyup:t[4]||(t[4]=(0,l.D2)((e=>C()),["enter"]))},null,8,["modelValue","prefix-icon"])])),_:1},8,["label","rules"])])),_:1},8,["model","label-position"])])),_:1}),_.value?((0,r.wg)(),(0,r.j4)(p,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(q,{type:"error","show-icon":""},{default:(0,r.w5)((()=>[(0,r._)("div",{innerHTML:_.value},null,8,Aa)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(z,{disabled:g.value,onClick:t[5]||(t[5]=e=>y())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Cancel"))},null,8,Ea)])),_:1},8,["disabled"]),(0,r.Wm)(z,{type:"primary",loading:g.value,onClick:t[6]||(t[6]=e=>C())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Send"))},null,8,Ua)])),_:1},8,["loading"])])),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(T,{disabled:g.value,onClick:t[7]||(t[7]=e=>f())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("AlreadyHaveAnAccount"))},null,8,Fa)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1})),(0,s.SU)(c)||"login"!=v.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(_t,{key:1,h:"auto",pa:"0"},{default:(0,r.w5)((()=>[(0,r.Wm)(j,{"max-height":"90vh"},{default:(0,r.w5)((()=>[Oa,(0,r._)("div",La,[(0,r._)("h2",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Login"))},null,8,Ma)])]),(0,r.Wm)(S,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{ref_key:"formLoginRef",ref:k,model:$,"label-position":(0,s.SU)(d).win.w<1200?"top":"right","label-width":"120px","status-icon":""},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{label:e.$t("Username"),prop:"username",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{modelValue:$.username,"onUpdate:modelValue":t[8]||(t[8]=e=>$.username=e),type:"text",maxlength:"32","show-word-limit":"",placeholder:e.$t("YourPersonalUsername"),"prefix-icon":(0,s.SU)(u.n5m)},null,8,["modelValue","placeholder","prefix-icon"])])),_:1},8,["label","rules"]),(0,r.Wm)(o,{label:e.$t("Password"),prop:"password",rules:[{required:!0,message:e.$t("Thisfieldisrequired"),trigger:"blur"}]},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{modelValue:$.password,"onUpdate:modelValue":t[9]||(t[9]=e=>$.password=e),type:"password",maxlength:"250","prefix-icon":(0,s.SU)(u.HEZ),onKeyup:t[10]||(t[10]=(0,l.D2)((e=>W()),["enter"]))},null,8,["modelValue","prefix-icon"])])),_:1},8,["label","rules"])])),_:1},8,["model","label-position"])])),_:1}),_.value?((0,r.wg)(),(0,r.j4)(p,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(q,{type:"error","show-icon":""},{default:(0,r.w5)((()=>[(0,r._)("div",{innerHTML:_.value},null,8,Ra)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(z,{disabled:g.value,onClick:t[11]||(t[11]=e=>y())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Cancel"))},null,8,Va)])),_:1},8,["disabled"]),(0,r.Wm)(z,{type:"primary",loading:g.value,onClick:t[12]||(t[12]=e=>W())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Send"))},null,8,Pa)])),_:1},8,["loading"])])),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(T,{disabled:g.value,onClick:t[13]||(t[13]=e=>h())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("DontHaveAnAccount"))},null,8,Ya)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1})),"logout"==v.value?((0,r.wg)(),(0,r.j4)(_t,{key:2,h:"auto"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r._)("div",Na,null,512),[[H,!0]]),(0,r._)("div",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Logout"))},null,8,Ba)])])),_:1})):(0,r.kq)("",!0)])]))])}}};const el=(0,W.Z)(Xa,[["__scopeId","data-v-6097077c"]]);var tl=el;const al=[{path:"/register",name:"AuthRegister",component:tl},{path:"/login",name:"AuthLogin",component:tl},{path:"/logout",name:"AuthLogout",component:tl}],ll={key:0},rl={class:"qp-container"},nl={key:1},sl={class:"qp-container"},ol={"element-loading-background":"transparent",style:{height:"60vh"}};var ul={__name:"qpLoadError",props:{isLoading:{type:Boolean,default:!0},hasError:{type:String,default:null}},setup(e){const t=e;return(e,a)=>{const l=(0,r.up)("el-result"),n=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)("div",null,[t.hasError?((0,r.wg)(),(0,r.iD)("div",ll,[(0,r._)("div",rl,[(0,r.Wm)(_t,{h:"auto"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{icon:"error",title:e.$t("Error"),"sub-title":t.hasError},null,8,["title","sub-title"])])),_:1})])])):t.isLoading?((0,r.wg)(),(0,r.iD)("div",nl,[(0,r._)("div",sl,[(0,r.wy)((0,r._)("div",ol,null,512),[[n,t.isLoading]])])])):(0,r.kq)("",!0)])}}};const il=ul;var pl=il;const dl={class:"qp-vue"},cl={key:0},ml={class:"qp-world-header"},gl=["textContent"],wl={class:"qp-world-footer"},_l={class:"qp-world-footer-inner"},vl={class:"qp-world-footer-copyright"},hl=["textContent"];var fl={__name:"WorldView",setup(e){const{t:t}=Ve.global,a=(0,$e.yj)(),l=(0,$e.tv)(),u=(0,o.oR)(),i=(0,r.Fl)((()=>u.getters.rat)),p=(0,s.iH)(!0),d=(0,s.iH)(null);(0,r.bv)((()=>{m()})),(0,r.Jd)((()=>{_()}));const c=(0,s.iH)(null),m=async()=>{p.value=!0,d.value=null;try{let e=await fetch(`${To}/worlds/${a.params.slug}/`,{method:"GET",headers:{Authorization:i.value}}),t=await e.json();if(200!==e.status)throw e;c.value=t,g(t.name),w(t.style)}catch(e){403===e.status?d.value=t("YouDoesntHaveAccessToThisWorld"):404===e.status?d.value=t("ThisWorldDoesntExistAnymore"):d.value=t("AnErrorOccurred")}p.value=!1},g=e=>{document.title=`${e} - ${zo.name}`},w=e=>{let t;document.getElementById("qp-custom-style")?t=document.getElementById("qp-custom-style"):(t=document.createElement("style"),t.setAttribute("id","qp-custom-style")),e?(t.innerHTML=":root{",t.innerHTML+=`--qp-primary:${e.primary};`,t.innerHTML+=`--qp-app-bg:${e.app_body_bg};`,t.innerHTML+=`--qp-app-txt:${e.app_body_txt};`,t.innerHTML+=`--qp-app-header-bg:${e.app_header_bg};`,t.innerHTML+=`--qp-app-header-txt:${e.app_header_txt};`,t.innerHTML+=`--qp-app-header-txt-hov:${e.app_header_txt_hov};`,t.innerHTML+=`--qp-app-sidebar-bg:${e.app_sidebar_bg};`,t.innerHTML+=`--qp-app-sidebar-txt:${e.app_sidebar_txt};`,t.innerHTML+=`--qp-app-sidebar-accent:${e.app_sidebar_accent};`,t.innerHTML+=`--qp-app-smallbar-bg:${e.app_smallbar_bg};`,t.innerHTML+=`--qp-app-smallbar-txt:${e.app_smallbar_txt};`,t.innerHTML+=`--qp-app-smallbar-accent:${e.app_smallbar_accent};`,t.innerHTML+=`--qp-default-bg:${e.default_bg};`,t.innerHTML+=`--qp-default-txt:${e.default_txt};`,t.innerHTML+=`--qp-default-accented-bg:${e.default_accented_bg};`,t.innerHTML+=`--qp-default-accented-txt:${e.default_accented_txt};`,t.innerHTML+=`--qp-default-disabled-bg:${e.default_disabled_bg};`,t.innerHTML+=`--qp-default-disabled-txt:${e.default_disabled_txt};`,t.innerHTML+=`--qp-form-bg:${e.form_bg};`,t.innerHTML+=`--qp-form-txt:${e.form_txt};`,t.innerHTML+=`--qp-form-placeholder:${e.form_placeholder};`,t.innerHTML+="}",t.innerHTML+=`${e.stylesheet}`):t.innerHTML="",document.head.appendChild(t)},_=()=>{},v=()=>{"WorldForum"==a.name?l.go(a.fullPath):l.push({name:"WorldForum",params:{slug:c.value.slug}})};return(e,t)=>{const a=(0,r.up)("router-view"),l=(0,r.up)("el-col"),s=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",dl,[p.value||d.value||!c.value?((0,r.wg)(),(0,r.j4)(pl,{key:1,isloading:p.value,hasError:d.value},null,8,["isloading","hasError"])):((0,r.wg)(),(0,r.iD)("div",cl,[(0,r._)("header",ml,[(0,r._)("h1",{class:"qp-world-header-name",onClick:t[0]||(t[0]=e=>v())},[(0,r._)("span",{textContent:(0,n.zw)(c.value.name)},null,8,gl)])]),((0,r.wg)(),(0,r.j4)(a,{key:e.$route.params.slug,world:c.value},null,8,["world"])),(0,r._)("footer",wl,[(0,r._)("div",_l,[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r._)("div",vl,[(0,r._)("small",null,[(0,r._)("span",{textContent:(0,n.zw)(`© ${c.value.copyright} - ${e.$t("AllRightsReserved")}`)},null,8,hl)])])])),_:1})])),_:1})])])]))])}}};const yl=fl;var bl=yl;const xl={class:"qp-forum-breadcrumbs"},Cl=["onClick"],ql=["textContent"];var kl={__name:"qpBreadcrumbs",props:{crumbs:{type:Array,default:()=>[]}},setup(e){const t=e,a=(0,$e.tv)(),l=e=>{e&&a.push(e)};return(e,a)=>((0,r.wg)(),(0,r.iD)("nav",xl,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.crumbs,((e,t)=>((0,r.wg)(),(0,r.iD)("li",{key:`crumb-${t}`,onClick:t=>l(e.go)},[(0,r._)("span",{textContent:(0,n.zw)(e.name)},null,8,ql)],8,Cl)))),128))])]))}};const $l=kl;var Wl=$l;const zl=e=>((0,r.dD)("data-v-3231c732"),e=e(),(0,r.Cn)(),e),Tl={class:"qp-forum-header"},Sl={class:"qp-forum-header-title"},jl=["textContent"],Dl=["textContent"],Hl=zl((()=>(0,r._)("hr",{class:"qp-forum-header-divider"},null,-1))),Al={class:"qp-forum-header-buttons"},El=["textContent"],Ul=["textContent"];var Fl={__name:"qpHeader",props:{title:{type:String,default:""},description:{type:String,default:null},crumbs:{type:Object,default:()=>{}},showBtnChapter:{type:Boolean,default:!1},showBtnReply:{type:Boolean,default:!1}},setup(e){const t=e;return(a,l)=>{const s=(0,r.up)("el-col"),o=(0,r.up)("el-button"),u=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("header",Tl,[(0,r._)("h2",Sl,[(0,r._)("span",{textContent:(0,n.zw)(t.title)},null,8,jl)]),t.description?((0,r.wg)(),(0,r.iD)("p",{key:0,class:"qp-forum-header-description",textContent:(0,n.zw)(t.description)},null,8,Dl)):(0,r.kq)("",!0),Hl,t.crumbs?.length||e.showBtnChapter||e.showBtnReply?((0,r.wg)(),(0,r.j4)(u,{key:1,align:"middle"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{span:24,sm:e.showBtnChapter||e.showBtnReply?12:24,style:{"padding-left":"0"}},{default:(0,r.w5)((()=>[t.crumbs?.length?((0,r.wg)(),(0,r.j4)(Wl,{key:0,crumbs:t.crumbs},null,8,["crumbs"])):(0,r.kq)("",!0)])),_:1},8,["sm"]),e.showBtnChapter||e.showBtnReply?((0,r.wg)(),(0,r.j4)(s,{key:0,span:24,sm:12,style:{"padding-right":"0"}},{default:(0,r.w5)((()=>[(0,r._)("div",Al,[e.showBtnChapter?((0,r.wg)(),(0,r.j4)(o,{key:0,onClick:l[0]||(l[0]=e=>a.$emit("openNewChapter"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(a.$t("NewChapter"))},null,8,El)])),_:1})):(0,r.kq)("",!0),e.showBtnReply?((0,r.wg)(),(0,r.j4)(o,{key:1,type:"primary",onClick:l[1]||(l[1]=e=>a.$emit("openNewReply"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(a.$t("ToReply"))},null,8,Ul)])),_:1})):(0,r.kq)("",!0)])])),_:1})):(0,r.kq)("",!0)])),_:1})):(0,r.kq)("",!0)])}}};const Ol=(0,W.Z)(Fl,[["__scopeId","data-v-3231c732"]]);var Ll=Ol;const Ml=(e,t=!0)=>{const a={year:"numeric",month:"long",day:"numeric",hour:t?"numeric":null,minute:t?"numeric":null,hour12:!1};return new Date(e).toLocaleString("fr",a)},Rl=(e,t)=>{const a=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}],l=/\.0+$|(\.[0-9]*[1-9])0+$/;var r=a.slice().reverse().find((function(t){return e>=t.value}));return r?(e/r.value).toFixed(t).replace(l,"$1")+r.symbol:"0"},Vl=e=>{const t="àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìıİłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;",a="aaaaaaaaaacccddeeeeeeeegghiiiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------",l=new RegExp(t.split("").join("|"),"g");return e.toString().toLowerCase().replace(/\s+/g,"-").replace(l,(e=>a.charAt(t.indexOf(e)))).replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},Pl=["id"],Yl={class:"qp-forum-territory-inner"},Nl={class:"qp-forum-header"},Bl=["textContent"],Il=["textContent"],Zl=["textContent"],Kl=["textContent"],Jl=["textContent"],Gl=["textContent"],Ql=["textContent"],Xl=["textContent"],er={class:"qp-forum-header-lastmessage"},tr=["textContent"],ar={key:0,class:"qp-forum-header-lastmessage-infos"},lr=["textContent"],rr=["textContent"];var nr={__name:"qpTerritoryList",props:{territory:{type:Object,default:()=>{}}},setup(e){const t=e,a=(0,$e.yj)(),l=(0,$e.tv)(),o=e=>{e&&l.push(e)},u=()=>{l.push({name:"WorldForumTerritory",params:{slug:a.params.slug,zone_pk:t.territory.zone.id,zone_slug:Vl(t.territory.zone.name),territory_pk:t.territory.id,territory_slug:Vl(t.territory.name)}})};return(e,a)=>{const l=(0,r.up)("el-col"),i=(0,r.up)("el-row"),p=(0,r.up)("el-popover"),d=(0,r.up)("el-avatar"),c=(0,r.up)("el-icon");return t.territory?((0,r.wg)(),(0,r.iD)("article",{key:0,id:`t${t.territory.id}`,class:"qp-forum-territory",style:(0,n.j5)(`flex-basis:${t.territory.flexbasis};`)},[(0,r._)("div",Yl,[(0,r._)("header",Nl,[(0,r.Wm)(p,{"show-after":1e3,"popper-class":"qp-forum-header-popper"},{reference:(0,r.w5)((()=>[(0,r._)("h2",{class:"qp-forum-header-title",onClick:a[0]||(a[0]=e=>u()),style:(0,n.j5)(t.territory.colour?`color:${t.territory.colour};`:"")},[(0,r._)("span",{textContent:(0,n.zw)(t.territory.name)},null,8,Bl)],4)])),default:(0,r.w5)((()=>[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[t.territory.description?((0,r.wg)(),(0,r.j4)(l,{key:0,span:24},{default:(0,r.w5)((()=>[(0,r._)("p",{class:"qp-forum-popheader-description",textContent:(0,n.zw)(t.territory.description)},null,8,Il)])),_:1})):(0,r.kq)("",!0),t.territory.count_sectors?((0,r.wg)(),(0,r.j4)(l,{key:1,span:8,align:"center"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)((0,s.SU)(Rl)(t.territory.count_sectors))},null,8,Zl),(0,r._)("div",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Sector",t.territory.count_sectors))},null,8,Kl)])])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(l,{span:t.territory.count_sectors?8:12,align:"center"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)((0,s.SU)(Rl)(t.territory.count_chapters))},null,8,Jl),(0,r._)("div",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Chapter",t.territory.count_chapters))},null,8,Gl)])])),_:1},8,["span"]),(0,r.Wm)(l,{span:t.territory.count_sectors?8:12,align:"center"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)((0,s.SU)(Rl)(t.territory.count_messages))},null,8,Ql),(0,r._)("div",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Message",t.territory.count_messages))},null,8,Xl)])])),_:1},8,["span"])])),_:1})])),_:1}),(0,r._)("div",er,[(0,r._)("div",{class:(0,n.C_)("qp-forum-header-lastmessage-avatar "+(t.territory.last_chapter?.last_message?"":"qp-empty"))},[t.territory.last_chapter?.last_message?((0,r.wg)(),(0,r.j4)(d,{key:0,src:t.territory.last_chapter.last_message.author?.avatar},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(t.territory.last_chapter.last_message.author?.initials)},null,8,tr)])),_:1},8,["src"])):(0,r.kq)("",!0),t.territory.last_chapter?.last_message?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"qp-forum-header-lastmessage-gotolast",onClick:a[1]||(a[1]=e=>o(t.territory.last_chapter.last_message.route))},[(0,r.Wm)(c,{class:"mdi mdi-arrow-bottom-right-thin-circle-outline"})])):(0,r.kq)("",!0)],2),t.territory.last_chapter?.last_message?((0,r.wg)(),(0,r.iD)("div",ar,[(0,r._)("div",{class:"qp-forum-header-lastmessage-infos-link",onClick:a[2]||(a[2]=e=>o(t.territory.last_chapter.route))},[(0,r._)("span",{class:"title",textContent:(0,n.zw)(t.territory.last_chapter.last_message.chapter.title)},null,8,lr),(0,r._)("span",{class:"date",textContent:(0,n.zw)((0,s.SU)(Ml)(t.territory.last_chapter.last_message.chapter.created_at))},null,8,rr)])])):(0,r.kq)("",!0)])])])],12,Pl)):(0,r.kq)("",!0)}}};const sr=nr;var or=sr;const ur=["id"],ir={class:"qp-forum-zone-inner"},pr={class:"qp-forum-territories"};var dr={__name:"qpZoneList",props:{world:{type:Object,default:()=>{}},zone:{type:Object,default:()=>{}}},setup(e){const t=e,a=(0,$e.yj)(),l=(0,r.Fl)((()=>{if("WorldForum"==a.name)return[];let e=[{name:t.world.name,view:"world",data:{world:t.world}}];return e}));return(e,a)=>t.zone?((0,r.wg)(),(0,r.iD)("article",{key:0,id:`z${t.zone.id}`,class:"qp-forum-zone"},[(0,r._)("div",ir,[(0,r.Wm)(Ll,{title:t.zone.name,description:t.zone.description,crumbs:(0,s.SU)(l)},null,8,["title","description","crumbs"]),(0,r._)("section",pr,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.zone.territories,((e,t)=>((0,r.wg)(),(0,r.j4)(or,{key:`territory-${t}`,territory:e},null,8,["territory"])))),128))])])],8,ur)):(0,r.kq)("",!0)}};const cr=dr;var mr=cr;const gr={class:"qp-vue qp-forum qp-singleton-index"},wr={key:0},_r={class:"qp-container"},vr={key:0,class:"qp-forum-zones"};var hr={__name:"IndexView",props:{world:{type:Object,default:()=>{}}},setup(e){const t=e,{t:a}=Ve.global,l=(0,o.oR)(),n=(0,r.Fl)((()=>l.getters.rat)),u=(0,s.iH)(!0),i=(0,s.iH)(null);(0,r.bv)((()=>{d()}));const p=(0,s.iH)(null),d=async()=>{u.value=!0,i.value=null;try{let e=await fetch(`${To}/worlds/forums/${t.world.forum.id}/`,{method:"GET",headers:{Authorization:n.value}}),a=await e.json();if(200!==e.status)throw e;p.value=a}catch(e){403===e.status?i.value=a("YouDoesntHaveAccessToThisForum"):404===e.status?i.value=a("ThisForumDoesntExistAnymore"):i.value=a("AnErrorOccurred")}u.value=!1};return(e,a)=>((0,r.wg)(),(0,r.iD)("div",gr,[u.value||i.value||!p.value?((0,r.wg)(),(0,r.j4)(pl,{key:1,isloading:u.value,hasError:i.value},null,8,["isloading","hasError"])):((0,r.wg)(),(0,r.iD)("div",wr,[(0,r._)("div",_r,["WorldForum"==e.$route.name?((0,r.wg)(),(0,r.iD)("section",vr,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(p.value.zones,((e,a)=>((0,r.wg)(),(0,r.j4)(mr,{key:`zones-${a}`,world:t.world,zone:e},null,8,["world","zone"])))),128))])):(0,r.kq)("",!0)])]))]))}};const fr=hr;var yr=fr;const br={class:"qp-vue qp-forum qp-singleton-zone"},xr={key:0},Cr={class:"qp-container"},qr={class:"qp-forum-zones"},kr=["id"],$r={class:"qp-forum-zone-inner"},Wr={class:"qp-forum-territories"};var zr={__name:"ZoneView",props:{world:{type:Object,default:()=>{}}},setup(e){const t=e,{t:a}=Ve.global,l=(0,$e.yj)(),n=(0,o.oR)(),u=(0,r.Fl)((()=>n.getters.rat)),i=(0,s.iH)(!0),p=(0,s.iH)(null),d=(0,r.Fl)((()=>{let e=[{name:c.value.forum.name,go:`/w/${l.params.slug}/forum`}];return e}));(0,r.bv)((()=>{m()}));const c=(0,s.iH)(null),m=async()=>{i.value=!0,p.value=null;try{let e=await fetch(`${To}/worlds/zones/${l.params.zone_pk}/`,{method:"GET",headers:{Authorization:u.value}}),t=await e.json();if(200!==e.status)throw e;c.value=t}catch(e){403===e.status?p.value=a("YouDoesntHaveAccessToThisZone"):404===e.status?p.value=a("ThisZoneDoesntExistAnymore"):p.value=a("AnErrorOccurred")}i.value=!1};return(e,a)=>((0,r.wg)(),(0,r.iD)("div",br,[i.value||p.value||!c.value?((0,r.wg)(),(0,r.j4)(pl,{key:1,isloading:i.value,hasError:p.value},null,8,["isloading","hasError"])):((0,r.wg)(),(0,r.iD)("div",xr,[(0,r._)("div",Cr,[(0,r._)("section",qr,[(0,r._)("article",{id:`z${c.value.id}`,class:"qp-forum-zone"},[(0,r._)("div",$r,[(0,r.Wm)(Ll,{title:c.value.name,description:c.value.description,crumbs:(0,s.SU)(d)},null,8,["title","description","crumbs"]),(0,r._)("section",Wr,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.value.territories,((e,a)=>((0,r.wg)(),(0,r.j4)(or,{key:`territory-${a}`,world:t.world,territory:e},null,8,["world","territory"])))),128))])])],8,kr)])])]))]))}};const Tr=zr;var Sr=Tr;const jr=e=>((0,r.dD)("data-v-b4de7354"),e=e(),(0,r.Cn)(),e),Dr=["textContent"],Hr={class:"qp-quests-list"},Ar={class:"qp-quests-item"},Er={class:"qp-quests-item-icon"},Ur={class:"qp-quests-item-text"},Fr=jr((()=>(0,r._)("p",{class:"qp-quests-item-title",textContent:"Récolter des plantes"},null,-1))),Or=["textContent"],Lr={class:"qp-quests-item-progress"},Mr={class:"qp-quests-item"},Rr={class:"qp-quests-item-icon"},Vr={class:"qp-quests-item-text"},Pr=jr((()=>(0,r._)("p",{class:"qp-quests-item-title",textContent:"Problème de vermine"},null,-1))),Yr=["textContent"],Nr={class:"qp-quests-item-progress"},Br=["textContent"];var Ir={__name:"qpCardQuestsList",setup(e){return(e,t)=>{const a=(0,r.up)("el-icon"),l=(0,r.up)("el-progress"),s=(0,r.up)("el-button");return(0,r.wg)(),(0,r.j4)(_t,{h:"auto"},{header:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Quests"))},null,8,Dr)])),default:(0,r.w5)((()=>[(0,r._)("ul",Hr,[(0,r._)("li",Ar,[(0,r._)("div",Er,[(0,r.Wm)(a,{class:"mdi mdi-leaf"})]),(0,r._)("div",Ur,[Fr,(0,r._)("p",{class:"qp-quests-item-description",textContent:(0,n.zw)("Parcourir les alentours pour trouver des plantes utiles.")},null,8,Or)]),(0,r._)("div",Lr,[(0,r.Wm)(l,{percentage:50,"stroke-width":4,"show-text":!1})])]),(0,r._)("li",Mr,[(0,r._)("div",Rr,[(0,r.Wm)(a,{class:"mdi mdi-sword"})]),(0,r._)("div",Vr,[Pr,(0,r._)("p",{class:"qp-quests-item-description",textContent:(0,n.zw)("Éliminer les créatures qui ont envahi la région et détruisent les récoltes.")},null,8,Yr)]),(0,r._)("div",Nr,[(0,r.Wm)(l,{percentage:50,"stroke-width":4,"show-text":!1})])])]),(0,r.Wm)(s,{size:"small"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("SeeAllQuests"))},null,8,Br)])),_:1})])),_:1})}}};const Zr=(0,W.Z)(Ir,[["__scopeId","data-v-b4de7354"]]);var Kr=Zr;const Jr={class:"qp-forum-writing-newchapter"},Gr={class:"qp-forum-writing-newchapter-form"},Qr=["innerHTML"],Xr=["textContent"],en=["textContent"];var tn={__name:"qpWritingChapter",props:{world:{type:Object,default:()=>{}},territory:{type:Object,default:()=>{}},sector:{type:Object,default:()=>{}}},setup(e){const t=e,{t:a}=Ve.global,l=(0,$e.tv)(),u=(0,o.oR)(),i=(0,r.Fl)((()=>u.getters.app)),p=(0,r.Fl)((()=>u.getters.rat)),d=(0,r.Fl)((()=>u.getters.heros));(0,r.bv)((()=>{m()}));const c=(0,s.iH)([]),m=()=>{c.value=[];for(const e of d.value)e.world.id==t.world.id&&c.value.push(e)},g=(0,s.iH)(null),w=(0,s.iH)(!1),_=(0,s.iH)(),v=(0,s.qj)({title:"",character:null,text:""}),h=(0,s.qj)({title:[{required:!0,message:a("Thisfieldisrequired"),trigger:"blur"}],character:[{required:!0,message:a("Thisfieldisrequired"),trigger:"change"}],text:[{required:!0,message:a("Thisfieldisrequired"),trigger:"blur"}]}),f=async()=>{g.value=null,w.value=!0,await _.value.validate(((e,t)=>{if(e)y();else{for(let[e,l]of Object.entries(t)){let t=a(`error${e}`);for(let e of l)g.value=`${t} : ${e.message}`}w.value=!1}}))},y=async()=>{g.value=null,w.value=!0;try{let e=new FormData;e.append("title",v.title),e.append("author",v.character),e.append("territory",t.territory.id),t.sector&&e.append("sector",t.sector.id);let l=await fetch(`${To}/worlds/territories/${t.territory.id}/chapters/create/`,{method:"POST",headers:{Authorization:p.value},body:e}),r=await l.json();if(201===l.status)b(r.id);else for(let[t,n]of Object.entries(r)){let e=a(`error${t}`);for(let t of n)g.value=`${e} : ${t}`}}catch(e){console.log(e),g.value=a("AnErrorOccurred")}w.value=!1},b=async e=>{g.value=null,w.value=!0;try{let t=new FormData;t.append("chapter",e),t.append("author",v.character),t.append("text",v.text);let r=await fetch(`${To}/worlds/chapters/${e}/messages/create/`,{method:"POST",headers:{Authorization:p.value},body:t}),n=await r.json();if(201===r.status)l.push(n.route);else for(let[e,l]of Object.entries(n)){let t=a(`error${e}`);for(let e of l)g.value=`${t} : ${e}`}}catch{g.value=a("AnErrorOccurred")}w.value=!1};return(e,t)=>{const a=(0,r.up)("el-input"),l=(0,r.up)("el-form-item"),o=(0,r.up)("el-option"),u=(0,r.up)("el-select"),p=(0,r.up)("el-form"),d=(0,r.up)("el-col"),m=(0,r.up)("el-alert"),y=(0,r.up)("el-button"),b=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("section",Jr,[(0,r.Wm)(Ll,{title:e.$t("Writing"),description:e.$t("NewChapter")},null,8,["title","description"]),(0,r._)("section",Gr,[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{style:(0,n.j5)((0,s.SU)(i).win.w<1200?"":"padding-right:180px")},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{ref_key:"formNewChapterRef",ref:_,model:v,"label-position":(0,s.SU)(i).win.w<1200?"top":"right",rules:h,"label-width":"180px","status-icon":""},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{label:e.$t("Title"),prop:"title"},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{modelValue:v.title,"onUpdate:modelValue":t[0]||(t[0]=e=>v.title=e),type:"text",placeholder:e.$t("NewChapterTitle")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,r.Wm)(l,{label:e.$t("Character"),prop:"character"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:v.character,"onUpdate:modelValue":t[1]||(t[1]=e=>v.character=e),placeholder:e.$t("ChooseACharacter")},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.value,((e,t)=>((0,r.wg)(),(0,r.j4)(o,{key:`character-${t}`,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,r.Wm)(l,{label:e.$t("Text"),prop:"text"},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{modelValue:v.text,"onUpdate:modelValue":t[2]||(t[2]=e=>v.text=e),type:"textarea",rows:12,placeholder:e.$t("YourMessage")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model","label-position","rules"])])),_:1},8,["style"]),g.value?((0,r.wg)(),(0,r.j4)(d,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"error","show-icon":""},{default:(0,r.w5)((()=>[(0,r._)("div",{innerHTML:g.value},null,8,Qr)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y,{disabled:w.value,onClick:t[3]||(t[3]=t=>e.$emit("close"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Cancel"))},null,8,Xr)])),_:1},8,["disabled"]),(0,r.Wm)(y,{loading:w.value,type:"primary",onClick:t[4]||(t[4]=e=>f())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Send"))},null,8,en)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])])}}};const an=(0,W.Z)(tn,[["__scopeId","data-v-ff7037f0"]]);var ln=an;const rn=["id"],nn={class:"qp-forum-sector-inner"},sn={class:"qp-forum-header"},on=["textContent"],un=["textContent"],pn=["textContent"],dn=["textContent"],cn=["textContent"],mn=["textContent"],gn={key:0,class:"qp-forum-header-lastmessage"},wn=["textContent"],_n={key:0,class:"qp-forum-header-lastmessage-infos"},vn=["textContent"],hn=["textContent"];var fn={__name:"qpSectorList",props:{world:{type:Object,default:()=>{}},territory:{type:Object,default:()=>{}},sector:{type:Object,default:()=>{}}},setup(e){const t=e,a=(0,$e.yj)(),l=(0,$e.tv)(),o=e=>{e&&l.push(e)},u=()=>{l.push({name:"WorldForumSector",params:{slug:a.params.slug,zone_pk:a.params.zone_pk,zone_slug:a.params.zone_slug,territory_pk:a.params.territory_pk,territory_slug:a.params.territory_slug,sector_pk:t.sector.id,sector_slug:Vl(t.sector.name)}})};return(e,a)=>{const l=(0,r.up)("el-col"),i=(0,r.up)("el-row"),p=(0,r.up)("el-popover"),d=(0,r.up)("el-avatar"),c=(0,r.up)("el-icon");return t.sector?((0,r.wg)(),(0,r.iD)("article",{key:0,id:`t${t.sector.id}`,class:"qp-forum-sector",style:(0,n.j5)(`flex-basis:${t.sector.flexbasis};`)},[(0,r._)("div",nn,[(0,r._)("header",sn,[(0,r.Wm)(p,{"show-after":1e3,"popper-class":"qp-forum-header-popper"},{reference:(0,r.w5)((()=>[(0,r._)("h2",{class:"qp-forum-header-title",onClick:a[0]||(a[0]=e=>u()),style:(0,n.j5)(t.sector.colour?`color:${t.sector.colour};`:"")},[(0,r._)("span",{textContent:(0,n.zw)(t.sector.name)},null,8,on)],4)])),default:(0,r.w5)((()=>[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[t.sector.description?((0,r.wg)(),(0,r.j4)(l,{key:0,span:24},{default:(0,r.w5)((()=>[(0,r._)("p",{class:"qp-forum-popheader-description",textContent:(0,n.zw)(t.sector.description)},null,8,un)])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(l,{span:12,align:"center"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)((0,s.SU)(Rl)(t.sector.count_chapters))},null,8,pn),(0,r._)("div",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Chapter",t.sector.count_chapters))},null,8,dn)])])),_:1}),(0,r.Wm)(l,{span:12,align:"center"},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)((0,s.SU)(Rl)(t.sector.count_messages))},null,8,cn),(0,r._)("div",null,[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Message",t.sector.count_messages))},null,8,mn)])])),_:1})])),_:1})])),_:1}),t.sector.last_chapter?((0,r.wg)(),(0,r.iD)("div",gn,[(0,r._)("div",{class:(0,n.C_)("qp-forum-header-lastmessage-avatar "+(t.sector.last_chapter?.last_message?"":"qp-empty"))},[t.sector.last_chapter?.last_message?((0,r.wg)(),(0,r.j4)(d,{key:0,src:t.sector.last_chapter.last_message.author?.avatar},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(t.sector.last_chapter.last_message.author?.initials)},null,8,wn)])),_:1},8,["src"])):(0,r.kq)("",!0),t.sector.last_chapter?.last_message?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"qp-forum-header-lastmessage-gotolast",onClick:a[1]||(a[1]=e=>o(t.sector.last_chapter.last_message.route))},[(0,r.Wm)(c,{class:"mdi mdi-arrow-bottom-right-thin-circle-outline"})])):(0,r.kq)("",!0)],2),t.sector.last_chapter?.last_message?((0,r.wg)(),(0,r.iD)("div",_n,[(0,r._)("div",{class:"qp-forum-header-lastmessage-infos-link",onClick:a[2]||(a[2]=e=>o(t.sector.last_chapter.route))},[(0,r._)("span",{class:"title",textContent:(0,n.zw)(t.sector.last_chapter.last_message.chapter.title)},null,8,vn),(0,r._)("span",{class:"date",textContent:(0,n.zw)((0,s.SU)(Ml)(t.sector.last_chapter.last_message.chapter.created_at))},null,8,hn)])])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])])],12,rn)):(0,r.kq)("",!0)}}};const yn=fn;var bn=yn;const xn=["id"],Cn={class:"qp-forum-chapter-inner"},qn={class:"qp-forum-header"},kn={class:"qp-forum-header-profile"},$n={class:"qp-forum-header-profile-banner"},Wn=(0,r._)("div",{class:"image-slot"},null,-1),zn={class:"qp-forum-header-profile-avatar"},Tn=["textContent"],Sn=["textContent"],jn={class:"qp-forum-header-date"},Dn=["textContent"],Hn={class:"qp-forum-header-infos"},An={class:"qp-forum-header-infos-lastmessagedate"},En=["textContent"],Un=["textContent"],Fn={class:"qp-forum-header-infos-countmessages"},On=["textContent"];var Ln={__name:"qpChapterList",props:{world:{type:Object,default:()=>{}},territory:{type:Object,default:()=>{}},chapter:{type:Object,default:()=>{}}},setup(e){const t=e,a=(0,$e.tv)(),l=()=>{a.push({name:"WorldForumTerritoryChapter",params:{slug:t.world.slug,zone_pk:t.territory.zone.id,zone_slug:Vl(t.territory.zone.name),territory_pk:t.territory.id,territory_slug:Vl(t.territory.name),chapter_pk:t.chapter.id,chapter_slug:Vl(t.chapter.title)}})};return(e,a)=>{const o=(0,r.up)("el-image"),u=(0,r.up)("el-avatar"),i=(0,r.up)("el-icon");return t.chapter?((0,r.wg)(),(0,r.iD)("article",{key:0,id:`c${t.chapter.id}`,class:"qp-forum-chapter"},[(0,r._)("div",Cn,[(0,r._)("header",qn,[(0,r._)("div",kn,[(0,r._)("div",$n,[t.chapter.author?.avatar?((0,r.wg)(),(0,r.j4)(o,{key:0,src:t.chapter.author.avatar,fit:"cover"},{error:(0,r.w5)((()=>[Wn])),_:1},8,["src"])):(0,r.kq)("",!0)]),(0,r._)("div",zn,[(0,r.Wm)(u,{src:t.chapter.last_message?.author?.avatar},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(t.chapter.last_message?.author?.initials)},null,8,Tn)])),_:1},8,["src"])])]),(0,r._)("h2",{class:"qp-forum-header-title",onClick:a[0]||(a[0]=e=>l())},[(0,r._)("span",{textContent:(0,n.zw)(t.chapter.title)},null,8,Sn)]),(0,r._)("p",jn,[t.chapter.date?((0,r.wg)(),(0,r.iD)("span",{key:0,textContent:(0,n.zw)(t.chapter.date)},null,8,Dn)):(0,r.kq)("",!0)]),(0,r._)("ul",Hn,[(0,r._)("li",An,[(0,r.Wm)(i,{class:"mdi mdi-clock-outline"}),t.chapter.last_message?((0,r.wg)(),(0,r.iD)("span",{key:0,textContent:(0,n.zw)((0,s.SU)(Ml)(t.chapter.last_message.created_at))},null,8,En)):((0,r.wg)(),(0,r.iD)("span",{key:1,textContent:(0,n.zw)(e.$t("Never"))},null,8,Un))]),(0,r._)("li",Fn,[(0,r.Wm)(i,{class:"mdi mdi-message-text-outline"}),(0,r._)("span",{textContent:(0,n.zw)(t.chapter.count_messages)},null,8,On)])])])])],8,xn)):(0,r.kq)("",!0)}}};const Mn=Ln;var Rn=Mn;const Vn={class:"qp-vue qp-forum qp-singleton-territory"},Pn={key:0},Yn={class:"qp-container"},Nn={class:"qp-forum-territories"},Bn=["id"],In={class:"qp-forum-territory-inner"},Zn={class:"qp-forum-sectors"},Kn={key:0},Jn=(0,r.Uk)(" (en construction) "),Gn=["textContent"],Qn={class:"qp-forum-chapters"};var Xn={__name:"TerritoryView",props:{world:{type:Object,default:()=>{}}},setup(e){const t=e,{t:a}=Ve.global,l=(0,$e.yj)(),u=(0,$e.tv)(),i=(0,o.oR)(),p=(0,r.Fl)((()=>i.getters.rat)),d=(0,s.iH)(!0),c=(0,s.iH)(null),m=(0,r.Fl)((()=>{let e=[{name:g.value.forum.name,go:`/w/${l.params.slug}/forum`}];return g.value&&e.push({name:g.value.zone.name,go:`/w/${l.params.slug}/forum/z${l.params.zone_pk}-${l.params.zone_slug}`}),e}));(0,r.bv)((()=>{w()}));const g=(0,s.iH)(null),w=async()=>{d.value=!0,c.value=null;try{let e=await fetch(`${To}/worlds/territories/${l.params.territory_pk}/`,{method:"GET",headers:{Authorization:p.value}}),t=await e.json();if(200!==e.status)throw e;g.value=t}catch(e){403===e.status?c.value=a("YouDoesntHaveAccessToThisTerritory"):404===e.status?c.value=a("ThisTerritoryDoesntExistAnymore"):c.value=a("AnErrorOccurred")}d.value=!1},_=(0,r.Fl)((()=>{let e=1;return"page"in l.query&&Number(l.query.page)>0&&(e=Number(l.query.page)),e})),v=e=>{u.push({name:"WorldForumTerritory",params:{slug:l.params.slug,zone_pk:l.params.zone_pk,zone_slug:l.params.zone_slug,territory_pk:g.value.id,territory_slug:Vl(g.value.name)},query:{page:e}})},h=(0,s.iH)(!1),f=()=>{h.value=!0},y=()=>{h.value=!1};return(a,l)=>{const o=(0,r.up)("el-col"),u=(0,r.up)("el-pagination"),i=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",Vn,[d.value||c.value||!g.value?((0,r.wg)(),(0,r.j4)(pl,{key:1,isloading:d.value,hasError:c.value},null,8,["isloading","hasError"])):((0,r.wg)(),(0,r.iD)("div",Pn,[(0,r._)("div",Yn,[(0,r._)("section",Nn,[(0,r._)("article",{id:`t${g.value.id}`,class:"qp-forum-territory"},[(0,r._)("div",In,[(0,r.Wm)(Ll,{title:g.value.name,description:g.value.description,crumbs:(0,s.SU)(m)},null,8,["title","description","crumbs"]),h.value?((0,r.wg)(),(0,r.j4)(ln,{key:1,world:e.world,territory:g.value,onClose:l[1]||(l[1]=e=>y())},null,8,["world","territory"])):((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("section",Zn,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.value.sectors,((e,a)=>((0,r.wg)(),(0,r.j4)(bn,{key:`sector-${a}`,world:t.world,territory:g.value,sector:e},null,8,["world","territory","sector"])))),128)),g.value.sectors?.length?((0,r.wg)(),(0,r.iD)("hr",Kn)):(0,r.kq)("",!0)]),(0,r._)("section",null,[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r.Wm)(o,{span:24,md:12,lg:17},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[Jn])),_:1})])),_:1}),(0,r.Wm)(o,{span:24,md:12,lg:7},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,{clickable:"",bgcolor:"primary",onClick:l[0]||(l[0]=e=>f())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(a.$t("NewChapter"))},null,8,Gn)])),_:1})])),_:1}),(0,r.Wm)(o,{span:24,lg:17,style:{padding:"0"}},{default:(0,r.w5)((()=>[(0,r._)("section",Qn,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.value.chapters,((e,a)=>((0,r.wg)(),(0,r.j4)(Rn,{key:`chapter-${a}`,world:t.world,territory:g.value,chapter:e},null,8,["world","territory","chapter"])))),128)),g.value.chapters.length?((0,r.wg)(),(0,r.j4)(u,{key:0,background:"","hide-on-single-page":"",layout:"prev, pager, next",total:g.value.count_chapters,"page-size":g.value.perpage_chapters,"current-page":(0,s.SU)(_),"onUpdate:currentPage":v},null,8,["total","page-size","current-page"])):(0,r.kq)("",!0)])])),_:1}),(0,r.Wm)(o,{span:24,lg:7},{default:(0,r.w5)((()=>[(0,r.Wm)(Kr)])),_:1})])),_:1})])],64))])],8,Bn)])])]))])}}};const es=Xn;var ts=es;const as={class:"qp-vue qp-forum qp-singleton-sector"},ls={key:0},rs={class:"qp-container"},ns={class:"qp-forum-territories"},ss=["id"],os={class:"qp-forum-sector-inner"},us={key:0},is=(0,r.Uk)(" (en construction) "),ps=["textContent"],ds={class:"qp-forum-chapters"};var cs={__name:"SectorView",props:{world:{type:Object,default:()=>{}}},setup(e){const t=e,{t:a}=Ve.global,l=(0,$e.yj)(),u=(0,$e.tv)(),i=(0,o.oR)(),p=(0,r.Fl)((()=>i.getters.rat)),d=(0,s.iH)(!0),c=(0,s.iH)(null),m=(0,r.Fl)((()=>{let e=[{name:g.value.forum.name,go:`/w/${l.params.slug}/forum`}];return g.value?.zone&&e.push({name:g.value.zone.name,go:`/w/${l.params.slug}/forum/z${l.params.zone_pk}-${l.params.zone_slug}`}),g.value?.territory&&e.push({name:g.value.territory.name,go:`/w/${l.params.slug}/forum/z${l.params.zone_pk}-${l.params.zone_slug}/t${l.params.territory_pk}-${l.params.territory_slug}`}),e}));(0,r.bv)((()=>{w()}));const g=(0,s.iH)(null),w=async()=>{d.value=!0,c.value=null;try{let e=await fetch(`${To}/worlds/sectors/${l.params.sector_pk}/`,{method:"GET",headers:{Authorization:p.value}}),t=await e.json();if(200!==e.status)throw e;g.value=t}catch(e){403===e.status?c.value=a("YouDoesntHaveAccessToThisSector"):404===e.status?c.value=a("ThisSectorDoesntExistAnymore"):c.value=a("AnErrorOccurred")}d.value=!1},_=(0,r.Fl)((()=>{let e=1;return"page"in l.query&&Number(l.query.page)>0&&(e=Number(l.query.page)),e})),v=e=>{u.push({name:"WorldForumSector",params:{slug:l.params.slug,zone_pk:l.params.zone_pk,zone_slug:l.params.zone_slug,territory_pk:l.params.territory_pk,territory_slug:l.params.territory_slug,sector_pk:g.value.id,sector_slug:Vl(g.value.name)},query:{page:e}})},h=(0,s.iH)(!1),f=()=>{h.value=!0},y=()=>{h.value=!1};return(a,l)=>{const o=(0,r.up)("el-col"),u=(0,r.up)("el-pagination"),i=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",as,[d.value||c.value||!g.value?((0,r.wg)(),(0,r.j4)(pl,{key:1,isloading:d.value,hasError:c.value},null,8,["isloading","hasError"])):((0,r.wg)(),(0,r.iD)("div",ls,[(0,r._)("div",rs,[(0,r._)("section",ns,[(0,r._)("article",{id:`s${g.value.id}`,class:"qp-forum-sector"},[(0,r._)("div",os,[(0,r.Wm)(Ll,{title:g.value.name,description:g.value.description,crumbs:(0,s.SU)(m)},null,8,["title","description","crumbs"]),h.value?((0,r.wg)(),(0,r.j4)(ln,{key:1,type:"chapter",world:e.world,territory:g.value.territory,sector:g.value,onClose:l[1]||(l[1]=e=>y())},null,8,["world","territory","sector"])):((0,r.wg)(),(0,r.iD)("section",us,[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r.Wm)(o,{span:24,md:12,lg:17},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[is])),_:1})])),_:1}),(0,r.Wm)(o,{span:24,md:12,lg:7},{default:(0,r.w5)((()=>[(0,r.Wm)(_t,{clickable:"",bgcolor:"primary",onClick:l[0]||(l[0]=e=>f())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(a.$t("NewChapter"))},null,8,ps)])),_:1})])),_:1}),(0,r.Wm)(o,{span:24,lg:17,style:{padding:"0"}},{default:(0,r.w5)((()=>[(0,r._)("section",ds,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.value.chapters,((e,a)=>((0,r.wg)(),(0,r.j4)(Rn,{key:`chapter-${a}`,world:t.world,territory:g.value.territory,sector:g.value,chapter:e},null,8,["world","territory","sector","chapter"])))),128)),g.value.chapters.length?((0,r.wg)(),(0,r.j4)(u,{key:0,background:"","hide-on-single-page":"",layout:"prev, pager, next",total:g.value.count_chapters,"page-size":g.value.perpage_chapters,"current-page":(0,s.SU)(_),"onUpdate:currentPage":v},null,8,["total","page-size","current-page"])):(0,r.kq)("",!0)])])),_:1}),(0,r.Wm)(o,{span:24,lg:7},{default:(0,r.w5)((()=>[(0,r.Wm)(Kr)])),_:1})])),_:1})]))])],8,ss)])])]))])}}};const ms=cs;var gs=ms;const ws={class:"qp-forum-footer"},_s={class:"qp-forum-footer-buttons"},vs=["textContent"],hs=["textContent"];var fs={__name:"qpFooter",props:{crumbs:{type:Object,default:()=>{}},showBtnChapter:{type:Boolean,default:!1},showBtnReply:{type:Boolean,default:!1}},setup(e){const t=e;return(a,l)=>{const s=(0,r.up)("el-col"),o=(0,r.up)("el-button"),u=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("footer",ws,[(0,r.Wm)(u,{align:"middle"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{span:24,sm:12},{default:(0,r.w5)((()=>[t.crumbs?.length?((0,r.wg)(),(0,r.j4)(Wl,{key:0,crumbs:t.crumbs},null,8,["crumbs"])):(0,r.kq)("",!0)])),_:1}),(0,r.Wm)(s,{span:24,sm:12},{default:(0,r.w5)((()=>[(0,r._)("div",_s,[e.showBtnChapter?((0,r.wg)(),(0,r.j4)(o,{key:0,onClick:l[0]||(l[0]=e=>a.$emit("openNewChapter"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(a.$t("NewChapter"))},null,8,vs)])),_:1})):(0,r.kq)("",!0),e.showBtnReply?((0,r.wg)(),(0,r.j4)(o,{key:1,type:"primary",onClick:l[1]||(l[1]=e=>a.$emit("openNewReply"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(a.$t("ToReply"))},null,8,hs)])),_:1})):(0,r.kq)("",!0)])])),_:1})])),_:1})])}}};const ys=(0,W.Z)(fs,[["__scopeId","data-v-6adf28f5"]]);var bs=ys,xs=a(5499),Cs=a(327);const qs=e=>{let t=e;return t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replaceAll("\n","<br />").replaceAll("[g]",'<span style="font-weight:bold;">').replaceAll("[/g]","</span>").replaceAll("[i]",'<span style="font-style:italic;">').replaceAll("[/i]","</span>").replaceAll("[s]",'<span style="text-decoration:underline;">').replaceAll("[/s]","</span>").replaceAll("[b]",'<span style="text-decoration:line-through;">').replaceAll("[/b]","</span>").replaceAll("[gauche]",'<div style="text-align:left;">').replaceAll("[/gauche]","</div>").replaceAll("[centre]",'<div style="text-align:center;">').replaceAll("[/centre]","</div>").replaceAll("[droite]",'<div style="text-align:right;">').replaceAll("[/droite]","</div>").replace(/\[c=#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})\]/g,'<span style="color:#$1;">').replace(/\[c=([a-zA-Z0-9_]+)\]/g,'<span style="color:var(--c-$1);">').replaceAll("[/c]","</span>").replace(/\[p=(Indie Flower|Oswald|Quicksand|Roboto Condensed)\]/g,"<span style=\"font-family:'$1';\">").replaceAll("[/p]","</span>").replace(/\[url=([^<>[\]]+)\]/g,'<a href="$1">').replaceAll("[/url]","</a>").replace(/\[urlo=([^<>[\]]+)\]/g,'<a href="$1" target="_blank">').replaceAll("[/urlo]","</a>").replace(/\[img=([^<>[\]]+)\]/g,'<img src="$1" alt="" />').replace(/\[ico=([a-z- ]+)\]/g,'<i class="mdi $1"></i>'),t},ks={class:"qp-forum-writing-editmessage"},$s={class:"qp-forum-writing-editmessage-form"},Ws=["innerHTML"],zs=["textContent"],Ts=["textContent"];var Ss={__name:"qpWritingEdit",props:{message:{type:Object,default:()=>{}}},setup(e){const t=e,{t:a}=Ve.global,l=(0,$e.tv)(),u=(0,o.oR)(),i=(0,r.Fl)((()=>u.getters.app)),p=(0,r.Fl)((()=>u.getters.rat));(0,r.bv)((()=>{d()}));const d=()=>{w.text=t.message.text},c=(0,s.iH)(null),m=(0,s.iH)(!1),g=(0,s.iH)(),w=(0,s.qj)({text:""}),_=(0,s.qj)({text:[{required:!0,message:a("Thisfieldisrequired"),trigger:"blur"}]}),v=async()=>{c.value=null,m.value=!0,await g.value.validate(((e,t)=>{if(e)h();else{for(let[e,l]of Object.entries(t)){let t=a(`error${e}`);for(let e of l)c.value=`${t} : ${e.message}`}m.value=!1}}))},h=async()=>{c.value=null,m.value=!0;try{let e=new FormData;e.append("text",w.text);let r=await fetch(`${To}/worlds/messages/${t.message.id}/edit/`,{method:"PATCH",headers:{Authorization:p.value},body:e}),n=await r.json();if(200===r.status)l.go(n.route);else{for(let[e,t]of Object.entries(n)){let l=a(`error${e}`);for(let e of t)c.value=`${l} : ${e}`}m.value=!1}}catch{c.value=a("AnErrorOccurred"),m.value=!1}};return(e,t)=>{const a=(0,r.up)("el-input"),l=(0,r.up)("el-form-item"),o=(0,r.up)("el-form"),u=(0,r.up)("el-col"),p=(0,r.up)("el-alert"),d=(0,r.up)("el-button"),h=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("section",ks,[(0,r._)("section",$s,[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u,{style:(0,n.j5)((0,s.SU)(i).win.w<1200?"":"padding-right:180px")},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{ref_key:"formEditMessageRef",ref:g,model:w,"label-position":(0,s.SU)(i).win.w<1200?"top":"right",rules:_,"label-width":"180px","status-icon":""},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{label:e.$t("Text"),prop:"text"},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{modelValue:w.text,"onUpdate:modelValue":t[0]||(t[0]=e=>w.text=e),type:"textarea",rows:12,placeholder:e.$t("YourMessage")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model","label-position","rules"])])),_:1},8,["style"]),c.value?((0,r.wg)(),(0,r.j4)(u,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{type:"error","show-icon":""},{default:(0,r.w5)((()=>[(0,r._)("div",{innerHTML:c.value},null,8,Ws)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{disabled:m.value,onClick:t[1]||(t[1]=t=>e.$emit("close"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Cancel"))},null,8,zs)])),_:1},8,["disabled"]),(0,r.Wm)(d,{loading:m.value,type:"primary",onClick:t[2]||(t[2]=e=>v())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Send"))},null,8,Ts)])),_:1},8,["loading"])])),_:1})])),_:1})])])}}};const js=(0,W.Z)(Ss,[["__scopeId","data-v-0c0a4a34"]]);var Ds=js;const Hs=e=>((0,r.dD)("data-v-2d53a7a2"),e=e(),(0,r.Cn)(),e),As=["id"],Es={class:"qp-forum-message-inner"},Us={class:"qp-forum-header"},Fs={class:"qp-forum-header-profile"},Os={class:"qp-forum-header-profile-banner"},Ls=Hs((()=>(0,r._)("div",{class:"image-slot"},null,-1))),Ms={class:"qp-forum-header-profile-avatar"},Rs=["textContent"],Vs={class:"qp-forum-header-profile-infos"},Ps={class:"qp-forum-header-profile-name"},Ys=["textContent"],Ns={class:"qp-forum-header-profile-date"},Bs=["textContent"],Is={key:1,class:"qp-forum-message-text"},Zs={class:"qp-forum-message-text-inner"},Ks=["innerHTML"],Js={class:"qp-forum-message-footer"},Gs={key:0};var Qs={__name:"qpMessage",props:{world:{type:Object,default:()=>{}},chapter:{type:Object,default:()=>{}},message:{type:Object,default:()=>{}}},setup(e){const t=e,{t:a}=Ve.global,l=(0,$e.yj)(),u=(0,$e.tv)(),i=(0,o.oR)(),p=(0,r.Fl)((()=>i.getters.rat)),d=(0,r.Fl)((()=>i.getters.player)),c=(0,s.iH)(!1),m=()=>{c.value=!0,xs.T.confirm(a("Areyousureyouwanttodeletethismessage"),a("DeleteMessage"),{confirmButtonText:a("Delete"),cancelButtonText:a("Cancel"),type:"warning"}).then((()=>{g()})).catch((()=>{c.value=!1}))},g=async()=>{c.value=!0;try{let e=new FormData;e.append("id",t.message.id);let r=await fetch(`${To}/worlds/messages/${t.message.id}/delete/`,{method:"DELETE",headers:{Authorization:p.value},body:e});204===r.status?(u.go(l.fullPath),(0,Cs.bM)({title:a("Success"),message:a("MessageDeletedSuccessfully"),type:"success"})):((0,Cs.bM)({title:a("Error"),message:a("AnErrorOccurred"),type:"error"}),c.value=!1)}catch(e){(0,Cs.bM)({title:a("Error"),message:`${a("AnErrorOccurred")} : ${e}`,type:"error"}),c.value=!1}},w=(0,s.iH)(!1),_=()=>{w.value=!0},v=()=>{w.value=!1};return(e,a)=>{const l=(0,r.up)("el-image"),o=(0,r.up)("el-avatar"),u=(0,r.up)("el-icon"),i=(0,r.up)("el-button"),g=(0,r.up)("el-tooltip"),h=(0,r.Q2)("loading");return t.message?((0,r.wg)(),(0,r.iD)("article",{key:0,id:`m${t.message.id}`,class:"qp-forum-message"},[(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",Es,[(0,r._)("header",Us,[(0,r._)("div",Fs,[(0,r._)("div",Os,[t.message.author.avatar?((0,r.wg)(),(0,r.j4)(l,{key:0,src:t.message.author.avatar,fit:"cover"},{error:(0,r.w5)((()=>[Ls])),_:1},8,["src"])):(0,r.kq)("",!0)]),(0,r._)("div",Ms,[(0,r.Wm)(o,{src:t.message.author.avatar},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(t.message.author.initials)},null,8,Rs)])),_:1},8,["src"])]),(0,r._)("div",Vs,[(0,r._)("div",Ps,[(0,r._)("span",{textContent:(0,n.zw)(t.message.author.name)},null,8,Ys)]),(0,r._)("div",Ns,[(0,r._)("span",{textContent:(0,n.zw)((0,s.SU)(Ml)(t.message.created_at))},null,8,Bs)])])])]),w.value?((0,r.wg)(),(0,r.j4)(Ds,{key:0,message:t.message,onClose:a[0]||(a[0]=e=>v())},null,8,["message"])):((0,r.wg)(),(0,r.iD)("div",Is,[(0,r._)("div",Zs,[(0,r._)("div",{innerHTML:(0,s.SU)(qs)(t.message.text)},null,8,Ks)])])),(0,r._)("footer",Js,[(0,s.SU)(p)&&(0,s.SU)(d)?.id==t.message.author?.player?.id&&!w.value?((0,r.wg)(),(0,r.iD)("div",Gs,[(0,r.Wm)(g,{content:e.$t("EditMessage"),placement:"bottom-end"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{size:"small",onClick:a[1]||(a[1]=e=>_())},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"mdi mdi-pencil"})])),_:1})])),_:1},8,["content"]),(0,r.Wm)(g,{content:e.$t("DeleteMessage"),placement:"bottom-end"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{size:"small",onClick:a[2]||(a[2]=e=>m())},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"mdi mdi-close"})])),_:1})])),_:1},8,["content"])])):(0,r.kq)("",!0)])])),[[h,c.value]])],8,As)):(0,r.kq)("",!0)}}};const Xs=(0,W.Z)(Qs,[["__scopeId","data-v-2d53a7a2"]]);var eo=Xs;const to={class:"qp-forum-writing-newchapter"},ao={class:"qp-forum-writing-newchapter-form"},lo=["innerHTML"],ro=["textContent"],no=["textContent"];var so={__name:"qpWritingReply",props:{world:{type:Object,default:()=>{}},chapter:{type:Object,default:()=>{}}},setup(e){const t=e,{t:a}=Ve.global,l=(0,$e.tv)(),u=(0,o.oR)(),i=(0,r.Fl)((()=>u.getters.app)),p=(0,r.Fl)((()=>u.getters.rat)),d=(0,r.Fl)((()=>u.getters.heros));(0,r.bv)((()=>{m()}));const c=(0,s.iH)([]),m=()=>{c.value=[];for(const e of d.value)e.world.id==t.world.id&&c.value.push(e)},g=(0,s.iH)(null),w=(0,s.iH)(!1),_=(0,s.iH)(),v=(0,s.qj)({character:null,text:""}),h=(0,s.qj)({character:[{required:!0,message:a("Thisfieldisrequired"),trigger:"change"}],text:[{required:!0,message:a("Thisfieldisrequired"),trigger:"blur"}]}),f=async()=>{g.value=null,w.value=!0,await _.value.validate(((e,t)=>{if(e)y();else{for(let[e,l]of Object.entries(t)){let t=a(`error${e}`);for(let e of l)g.value=`${t} : ${e.message}`}w.value=!1}}))},y=async()=>{g.value=null,w.value=!0;try{let e=new FormData;e.append("chapter",t.chapter.id),e.append("author",v.character),e.append("text",v.text);let r=await fetch(`${To}/worlds/chapters/${t.chapter.id}/messages/create/`,{method:"POST",headers:{Authorization:p.value},body:e}),n=await r.json();if(201===r.status)l.push(n.route);else for(let[t,l]of Object.entries(n)){let e=a(`error${t}`);for(let t of l)g.value=`${e} : ${t}`}}catch{g.value=a("AnErrorOccurred")}w.value=!1};return(e,t)=>{const a=(0,r.up)("el-option"),l=(0,r.up)("el-select"),o=(0,r.up)("el-form-item"),u=(0,r.up)("el-input"),p=(0,r.up)("el-form"),d=(0,r.up)("el-col"),m=(0,r.up)("el-alert"),y=(0,r.up)("el-button"),b=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("section",to,[(0,r.Wm)(Ll,{title:e.$t("Writing"),description:e.$t("ToReply")},null,8,["title","description"]),(0,r._)("section",ao,[(0,r.Wm)(_t,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{style:(0,n.j5)((0,s.SU)(i).win.w<1200?"":"padding-right:180px")},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{ref_key:"formNewReplyRef",ref:_,model:v,"label-position":(0,s.SU)(i).win.w<1200?"top":"right",rules:h,"label-width":"180px","status-icon":""},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{label:e.$t("Character"),prop:"character"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{modelValue:v.character,"onUpdate:modelValue":t[0]||(t[0]=e=>v.character=e),placeholder:e.$t("ChooseACharacter")},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.value,((e,t)=>((0,r.wg)(),(0,r.j4)(a,{key:`character-${t}`,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,r.Wm)(o,{label:e.$t("Text"),prop:"text"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:v.text,"onUpdate:modelValue":t[1]||(t[1]=e=>v.text=e),type:"textarea",rows:12,placeholder:e.$t("YourReply")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model","label-position","rules"])])),_:1},8,["style"]),g.value?((0,r.wg)(),(0,r.j4)(d,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"error","show-icon":""},{default:(0,r.w5)((()=>[(0,r._)("div",{innerHTML:g.value},null,8,lo)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y,{disabled:w.value,onClick:t[2]||(t[2]=t=>e.$emit("close"))},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Cancel"))},null,8,ro)])),_:1},8,["disabled"]),(0,r.Wm)(y,{loading:w.value,type:"primary",onClick:t[3]||(t[3]=e=>f())},{default:(0,r.w5)((()=>[(0,r._)("span",{textContent:(0,n.zw)(e.$t("Send"))},null,8,no)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])])}}};const oo=(0,W.Z)(so,[["__scopeId","data-v-77c5f4d2"]]);var uo=oo;const io={class:"qp-vue qp-forum qp-singleton-zone"},po={key:0},co={class:"qp-container"},mo={key:0,class:"qp-forum-chapters"},go=["id"],wo={class:"qp-forum-chapter-inner"},_o={key:0,class:"qp-forum-messages"},vo={key:1,id:"reply",class:"qp-forum-writing"};var ho={__name:"ChapterView",props:{world:{type:Object,default:()=>{}}},setup(e){const t=e,{t:a}=Ve.global,l=(0,$e.yj)(),n=(0,$e.tv)(),u=(0,o.oR)(),i=(0,r.Fl)((()=>u.getters.rat)),p=(0,s.iH)(!0),d=(0,s.iH)(null),c=(0,r.Fl)((()=>{let e=[{name:m.value.forum.name,go:`/w/${l.params.slug}/forum`}];return m.value&&e.push({name:m.value.zone.name,go:`/w/${l.params.slug}/forum/z${l.params.zone_pk}-${l.params.zone_slug}`}),m.value&&e.push({name:m.value.territory.name,go:`/w/${l.params.slug}/forum/z${l.params.zone_pk}-${l.params.zone_slug}/t${l.params.territory_pk}-${l.params.territory_slug}`}),m.value?.sector&&e.push({name:m.value.sector.name,go:`/w/${l.params.slug}/forum/z${l.params.zone_pk}-${l.params.zone_slug}/t${l.params.territory_pk}-${l.params.territory_slug}/s${l.params.sector_pk}-${l.params.sector_slug}`}),e}));(0,r.bv)((()=>{w()}));const m=(0,s.iH)(null),g=(0,s.iH)(null),w=async()=>{p.value=!0,d.value=null;try{let e=await fetch(`${To}/worlds/chapters/${l.params.chapter_pk}/`,{method:"GET",headers:{Authorization:i.value}}),t=await e.json();if(200!==e.status)throw e;m.value=t,_()}catch(e){403===e.status?d.value=a("YouDoesntHaveAccessToThisChapter"):404===e.status?d.value=a("ThisChapterDoesntExistAnymore"):d.value=a("AnErrorOccurred")}p.value=!1},_=async()=>{p.value=!0,d.value=null;try{let e=await fetch(`${To}/worlds/chapters/${l.params.chapter_pk}/messages/?page=${h.value}`,{method:"GET",headers:{Authorization:i.value}}),t=await e.json();if(200!==e.status)throw e;g.value=t,v()}catch(e){403===e.status?d.value=a("YouDoesntHaveAccessToThisChapter"):404===e.status?d.value=a("ThisPageDoesntExistAnymore"):d.value=a("AnErrorOccurred")}p.value=!1},v=()=>{setTimeout((()=>{if(l.hash&&(l.hash.startsWith("#c")||l.hash.startsWith("#m"))){const e=document.getElementById(l.hash.replace("#",""));e&&e.scrollIntoView({behavior:"smooth"})}}),200)},h=(0,r.Fl)((()=>{let e=1;return"page"in l.query&&Number(l.query.page)>0&&(e=Number(l.query.page)),e})),f=e=>{let t="WorldForumTerritoryChapter",a={name:t,params:{slug:l.params.slug,zone_pk:l.params.zone_pk,zone_slug:l.params.zone_slug,territory_pk:l.params.territory_pk,territory_slug:l.params.territory_slug,chapter_pk:l.params.chapter_pk,chapter_slug:l.params.chapter_slug},query:{page:e}};m.value?.sector&&(a.name="WorldForumSectorChapter",a.params["sector_pk"]=l.params.sector_pk,a.params["sector_slug"]=l.params.sector_slug),n.push(a)},y=(0,s.iH)(!1),b=()=>{y.value=!0,setTimeout((()=>{const e=document.getElementById("reply");e?.scrollIntoView()}),100)},x=()=>{y.value=!1};return(e,a)=>{const l=(0,r.up)("el-pagination"),n=(0,r.up)("el-icon"),o=(0,r.up)("el-button"),u=(0,r.up)("el-tooltip"),i=(0,r.up)("el-col"),w=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)("div",io,[p.value||d.value||!m.value?((0,r.wg)(),(0,r.j4)(pl,{key:1,isloading:p.value,hasError:d.value},null,8,["isloading","hasError"])):((0,r.wg)(),(0,r.iD)("div",po,[(0,r._)("div",co,[m.value?((0,r.wg)(),(0,r.iD)("section",mo,[(0,r._)("article",{id:`c${m.value.id}`,class:"qp-forum-chapter"},[(0,r._)("div",wo,[(0,r.Wm)(Ll,{"show-btn-reply":"",title:m.value.title,description:m.value.description,crumbs:(0,s.SU)(c),onOpenNewReply:a[0]||(a[0]=e=>b())},null,8,["title","description","crumbs"]),g.value?((0,r.wg)(),(0,r.iD)("section",_o,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.value.results,((e,a)=>((0,r.wg)(),(0,r.j4)(eo,{key:`message-${a}`,world:t.world,chapter:m.value,message:e},null,8,["world","chapter","message"])))),128))])):(0,r.kq)("",!0),(0,r.Wm)(bs,{"show-btn-reply":"",crumbs:(0,s.SU)(c),onOpenNewReply:a[1]||(a[1]=e=>b())},null,8,["crumbs"]),g.value?.results.length?((0,r.wg)(),(0,r.j4)(l,{key:1,background:"","hide-on-single-page":"",layout:"prev, pager, next",total:g.value.count,"page-size":g.value.size,"current-page":(0,s.SU)(h),"onUpdate:currentPage":f},null,8,["total","page-size","current-page"])):(0,r.kq)("",!0)])],8,go),(0,r._)("footer",null,[(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{span:24,md:12},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{content:e.$t("DeleteChapter"),placement:"bottom-start"},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{size:"small",disabled:""},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{class:"mdi mdi-delete-forever"})])),_:1})])),_:1},8,["content"]),m.value.is_locked?((0,r.wg)(),(0,r.j4)(u,{key:0,content:e.$t("UnlockChapter"),placement:"bottom-start"},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{size:"small",disabled:""},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{class:"mdi mdi-lock-open"})])),_:1})])),_:1},8,["content"])):((0,r.wg)(),(0,r.j4)(u,{key:1,content:e.$t("LockChapter"),placement:"bottom-start"},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{size:"small",disabled:""},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{class:"mdi mdi-lock"})])),_:1})])),_:1},8,["content"]))])),_:1}),(0,r.Wm)(i,{span:24,md:12})])),_:1})])])):(0,r.kq)("",!0),y.value?((0,r.wg)(),(0,r.iD)("section",vo,[(0,r.Wm)(uo,{world:t.world,chapter:m.value,onClose:a[2]||(a[2]=e=>x())},null,8,["world","chapter"])])):(0,r.kq)("",!0)])]))])}}};const fo=ho;var yo=fo;const bo=[{path:"/w/:slug",name:"World",component:bl,children:[{path:"forum",name:"WorldForum",component:yr},{path:"forum/z:zone_pk(\\d+)-:zone_slug",name:"WorldForumZone",component:Sr},{path:"forum/z:zone_pk(\\d+)-:zone_slug/t:territory_pk(\\d+)-:territory_slug",name:"WorldForumTerritory",component:ts},{path:"forum/z:zone_pk(\\d+)-:zone_slug/t:territory_pk(\\d+)-:territory_slug/c:chapter_pk(\\d+)-:chapter_slug",name:"WorldForumTerritoryChapter",component:yo},{path:"forum/z:zone_pk(\\d+)-:zone_slug/t:territory_pk(\\d+)-:territory_slug/s:sector_pk(\\d+)-:sector_slug",name:"WorldForumSector",component:gs},{path:"forum/z:zone_pk(\\d+)-:zone_slug/t:territory_pk(\\d+)-:territory_slug/s:sector_pk(\\d+)-:sector_slug/c:chapter_pk(\\d+)-:chapter_slug",name:"WorldForumSectorChapter",component:yo}]}],xo=[{path:"/",name:"Home",component:dt},{path:"/me/characters",name:"MeCharacters",component:Dt},{path:"/me/worlds",name:"MeWorlds",component:ga},{path:"/heros/:pk",name:"HeroDetail",component:ya},{path:"/:catchAll(.*)",name:"Error",component:$a}];xo.push(...al),xo.push(...bo);const Co=(0,$e.p7)({history:(0,$e.PO)("/"),routes:xo});Co.beforeEach((async(e,t,a)=>{"slug"in e.params||document.getElementById("qp-custom-style")&&document.getElementById("qp-custom-style").remove(),st.dispatch("getPlayer"),await st.restored,a()}));var qo=Co,ko=a(4417),$o=a(4242);a(4415);const Wo=(0,l.ri)(Ue),zo={name:"Cynorrhodonnismes",shortname:"Cynorrs"},To="https://mcpronovost.pythonanywhere.com/api";Wo.use(Ve),Wo.use(st),Wo.use(qo),Wo.use(ko.Z,{locale:$o.Z}),Wo.mount("#app")},4465:function(e,t,a){e.exports=a.p+"img/logo-square-trans.png"}},t={};function a(l){var r=t[l];if(void 0!==r)return r.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,l,r,n){if(!l){var s=1/0;for(p=0;p<e.length;p++){l=e[p][0],r=e[p][1],n=e[p][2];for(var o=!0,u=0;u<l.length;u++)(!1&n||s>=n)&&Object.keys(a.O).every((function(e){return a.O[e](l[u])}))?l.splice(u--,1):(o=!1,n<s&&(s=n));if(o){e.splice(p--,1);var i=r();void 0!==i&&(t=i)}}return t}n=n||0;for(var p=e.length;p>0&&e[p-1][2]>n;p--)e[p]=e[p-1];e[p]=[l,r,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var r,n,s=l[0],o=l[1],u=l[2],i=0;if(s.some((function(t){return 0!==e[t]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(u)var p=u(a)}for(t&&t(l);i<s.length;i++)n=s[i],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(p)},l=self["webpackChunk_mcpronovost_cynorrs"]=self["webpackChunk_mcpronovost_cynorrs"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(7781)}));l=a.O(l)})();